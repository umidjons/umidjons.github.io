[
  {
    "html_url": "https://gist.github.com/b223e80db8cf17a3986636b0bc575b7d",
    "description": "Floating label (placeholder) on input focus",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b223e80db8cf17a3986636b0bc575b7d/raw/1596291ccefa09a912141c1eba9db7a851a06466/floating-label-placeholder-on-input-focus.md"
    ],
    "content": "# Floating label (placeholder) on input focus\n\nWorking [fiddle](https://jsfiddle.net/273ntk5s/299/)\n\nSample code:\n\n```html\n<style>\n.wrapper { position: relative; }\n\n.control:focus ~ .floating-label,\n.control:not(:focus):valid ~ .floating-label{\n  top: 6px;\n  left: 5px;\n  font-size: 11px;\n  opacity: 0.6;\n}\n\n.control {\n  font-size: 14px;\n  width: 200px;\n  height: 45px;\n}\n\n.floating-label {\n  position: absolute;\n  pointer-events: none;\n  left: 20px;\n  top: 14px;\n  transition: 0.3s ease all;\n}\n</style>\n\n<div class=\"wrapper\">\n  <input type=\"text\" class=\"control\" required/>\n  <span class=\"floating-label\">First Name</span>\n</div>\n<div class=\"wrapper\">\n  <input type=\"text\" class=\"control\" required/>\n  <span class=\"floating-label\">Last Name</span>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/2bef8bb80c041c0fdd4e69dd7175121a",
    "description": "Catch duplicate error (E11000) key index in MongoDB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2bef8bb80c041c0fdd4e69dd7175121a/raw/db57c45205b589448ce7403f8af1f2cfd1a450f6/catch-duplicate-error-key-index-mongodb.md"
    ],
    "content": "# Catch duplicate error (E11000) key index in MongoDB\n\n```js\nimport * as RPC from 'json-rpc-core';\nimport {utils, validate} from './utils';\n\n@RPC.module()\nexport default class Users {\n\t@RPC.params({\n\t\temail: {type: String, coerce: utils.trim, validate: validate.isEmail},\n\t\tname: {type: String, coerce: utils.trim, default: null},\n\t\tsurname: {type: String, coerce: utils.trim, default: null}\n\t})\n\tstatic async subscribe(params) {\n\t\tlet doc = {email: params.email};\n\n\t\tif (params.name) {\n\t\t\tdoc.name = params.name;\n\t\t}\n\n\t\tif (params.surname) {\n\t\t\tdoc.surname = params.surname;\n\t\t}\n\n\t\tlet resp = {success: false};\n\n\t\ttry {\n\t\t\tlet result = await db.main.users.insertOne(doc);\n\t\t\tif (result._id) {\n\t\t\t\tresp.success = true;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// We have unique index by email field\n\t\t\t// Here we catch duplicate error key and return success\n\t\t\t// If we get other errors, we will re-throw them\n\t\t\tif (error.name == 'MongoError' && error.code == 11000) {\n\t\t\t\tconsole.log('Email already exists, so ignoring it and returning success!');\n\t\t\t\tresp.success = true;\n\t\t\t} else {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\treturn resp;\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/ec7a60415c452787f2666ef6761bbf69",
    "description": "Create ssh tunnel and connect to the remote mongo database on command line",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ec7a60415c452787f2666ef6761bbf69/raw/f88a85dfe471736e907daad7a2f664b2e66ecf00/connect-remote-mongo-via-ssh-tunnel.md"
    ],
    "content": "## Create ssh tunnel and connect to the remote mongo database on command line\n\nAssume followings:\n\n`/mykeys/.ssh/prodserver.pem` - is a certificate file\n\n`umid` - is a user name\n\n`111.111.111.111` - is a remote host, that mongodb runs\n\n`2222` - is a remote port to connect via ssh\n\n`localhost:27017` - local host and port on remote machine\n\n`27018` - local port\n\n\n```\nssh -i /mykeys/.ssh/prodserver.pem umid@111.111.111.111 -p 2222 -Nf -L 27018:localhost:27017\n```\n\nConnect to the mongodb via opened tunnel, in this case `mydb` is database name\n```\nmongo --port 27018 mydb\n```\n"
  },
  {
    "html_url": "https://gist.github.com/fada437f22bfb6e430a18d708c90ca83",
    "description": "Using decorators. Transpile with Babel. Configure Gulp task.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/fada437f22bfb6e430a18d708c90ca83/raw/5d6f508bd51bcee17cef1a71fc4bc1b4016fa119/decorator-babel-gulp-example.md"
    ],
    "content": "# Using decorators. Transpile with Babel. Configure Gulp task.\n\nInstall necessary modules\n```\nnpm i -D babel-cli babel-plugin-transform-decorators-legacy\nnpm i -D gulp gulp-sourcemaps gulp-babel\n```\n\nConfigure `npm run build` and `npm start` commands.\nAlso specify babel options, such as `plugins`.\n\n`package.json` file\n\n```json\n{\n  \"name\": \"t1\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"node dist/s1.js\",\n    \"build\": \"gulp\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.16.0\",\n    \"babel-plugin-transform-decorators-legacy\": \"^1.3.4\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-babel\": \"^6.1.2\",\n    \"gulp-sourcemaps\": \"^1.6.0\"\n  },\n  \"babel\": {\n    \"plugins\": [\n      \"transform-decorators-legacy\"\n    ]\n  }\n}\n```\n\n`gulpfile.js` file\n```js\nvar gulp = require('gulp');\nvar babel = require('gulp-babel');\nvar sourceMaps = require('gulp-sourcemaps');\n\ngulp.task('compile:js', function () {\n    return gulp.src('src/**/*.js')\n        .pipe(sourceMaps.init())\n        .pipe(babel())\n        .pipe(sourceMaps.write('.'))\n        .pipe(gulp.dest('dist/'));\n});\n\ngulp.task('watch:js', function () {\n    return gulp.watch('src/**/*.js', ['compile:js']);\n});\n\ngulp.task('default', ['compile:js', 'watch:js']);\n```\n\n`src/s1.js` file\n```js\n@classLevel('debug')\n@instanceLevel('warning')\nclass Person {\n    constructor(name) {\n        this.name = name;\n    }\n}\n\nfunction classLevel(value) {\n    return function decorator(target) {\n        target.level = value; // add property to the target class\n    }\n}\n\nfunction instanceLevel(value) {\n    return function decorator(target) {\n        target.prototype.level = value; // add property to the target class instance\n    }\n}\n\nconsole.log('Person.level=', Person.level);\n\nlet jack = new Person('Jack');\nconsole.log('Jack.level=', jack.level);\n```\n\nStart build task\n```\nnpm run build\n```\n\nSample output\n```\n> t1@1.0.0 build f:\\projs\\t1\n> gulp\n\n[12:53:01] Using gulpfile f:\\projs\\t1\\gulpfile.js\n[12:53:01] Starting 'compile:js'...\n[12:53:01] Starting 'watch:js'...\n[12:53:01] Finished 'watch:js' after 13 ms\n[12:53:01] Finished 'compile:js' after 156 ms\n[12:53:01] Starting 'default'...\n[12:53:01] Finished 'default' after 31 μs\n```\n\nExecute `dist/s1.js`\n```\nnode dist/s1.js\n```\n\nSample output\n```\nPerson.level= debug\nJack.level= warning\n```\n"
  },
  {
    "html_url": "https://gist.github.com/1cfc2ddebf58b59fe3d4acc2567ebdd0",
    "description": "Get Free SSL Certificate & Configure Nginx to use it",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1cfc2ddebf58b59fe3d4acc2567ebdd0/raw/c00936388ffff5fa937fb47f7616e358081ab2b6/ssl-nginx.md"
    ],
    "content": "# Get Free SSL Certificate & Configure Nginx to use it\n\n - Register on [GoGetSSL](https://www.gogetssl.com).\n - Choose `SSL Certificates -> Domain Validation SSL` from top menu.\n - On products table click `Details` button on row `Comodo - Free SSL`.\n - On the opening page click `Create New Order` button.\n - In the Product Configuration section choose: `Product Type = SSL Certificates` and `Select Item = Comodo Trial SSL`, then click `Complete Order` button.\n - On the opening page click `Incomplete Orders` link.\n - In the `List of all your SSL certificates` table click `Generate` button.\n - With [Online CSR Generator](https://my.gogetssl.com/en/user/csr/generate/) generate CSR.\n - Copy & Paste generated CSR into `Paste your CSR` text area.\n - Then click `Validate CSR`.\n - On the opening page validate your domain via email, dns, http or https.\n - In case of validation via email, you will get your private key as post. Do not lost your private key.\n - After validation you will get access to `Download SSL` button on the `Manage SSL Certificates` page, in the certificate details section.\n - Download your certificate & extract it OR check your email, you will get your certificate as archive.\n - Assume your domain is `mysite.com`, then in the archive you will get `mysite_com.ca-bundle` and `mysite_com.crt` files.\n - Open `mysite_com.crt` file, copy its content, then open `mysite_com.ca-bundle` file and paste content to the beginning of the file, save the file.\n - Copy files into your domain's folder, for example, into `/www/mysite.com/cert/`.\n - Save your private key as `mysite_com.key` and download into `www/mysite.com/cert/` folder.\n - Set nginx configurations:\n\n```nginx\n server {\n    listen 80;\n    server_name \"mysite.com\";\n    root /www/mysite.com;\n    index index.html;\n    location / {\n        return 301 https://mysite.com;\n    }\n}\nserver {\n    listen 443 ssl;\n    server_name \"mysite.com\";\n    root /www/mysite.com;\n    index index.html;\n    ssl on;\n    ssl_certificate /www/mysite.com/cert/mysite_com.ca-bundle;\n    ssl_certificate_key /www/mysite.com/cert/mysite_com.key;\n    # ...\n}\n```\n\n## References\n\n- You can check SSL of your server with the following [tool](https://www.ssllabs.com/ssltest/index.html).\n- You can check your certificate with this decoder [tool](https://www.sslshopper.com/certificate-decoder.html).\n"
  },
  {
    "html_url": "https://gist.github.com/30ef5e0c9e2a93a6dd6db8fa185b7906",
    "description": "Socket.io Client events example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/30ef5e0c9e2a93a6dd6db8fa185b7906/raw/3b1618c494f2b29c41e43e2bcd222e23a0d971db/socket.io-client-events.md"
    ],
    "content": "# Socket.io Client (Manager) events example\n\n```\nnpm i -S socket.io express jquery\n```\n\nFile `server.js`:\n```js\nvar express = require('express');\nvar app = express();\nvar server = require('http').Server(app);\nvar io = require('socket.io')(server);\n\napp.use(express.static(__dirname + '/node_modules'));\n\nserver.listen(80);\n\napp.get('/', function (req, res) {\n    res.sendFile(__dirname + '/index.html');\n});\n\nio.on('connection', function (socket) {\n    socket.emit('news', {hello: 'world'});\n});\n```\n\nFile `index.html`:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Socket.io Client (Manager) Events</title>\n</head>\n<body>\n\n<div id=\"log\"></div>\n\n<script src=\"/socket.io/socket.io.js\"></script>\n<script src=\"/jquery/dist/jquery.min.js\"></script>\n<script>\n    jQuery(document).ready(function ($) {\n        function log(eventName, message) {\n            if (typeof message == 'object')\n                message = JSON.stringify(message);\n            var content = eventName + '>' + (message ? message : '');\n            $('#log').append($('<p>').text(content));\n        }\n\n        var socket = io.connect('http://localhost');\n        socket\n                .on('connect', function () {\n                    log('connect', 'connected');\n                })\n                .on('connect_error', function (err) {\n                    log('connect_error', err);\n                })\n                .on('connect_timeout', function () {\n                    log('connect_timeout');\n                })\n                .on('reconnect', function (attempt) {\n                    log('reconnect', 'Attempt #' + attempt);\n                })\n                .on('reconnecting', function (attempt) {\n                    log('reconnecting', 'Attempt #' + attempt);\n                })\n                .on('reconnect_attempt', function () {\n                    log('reconnect_attempt');\n                })\n                .on('reconnect_error', function (err) {\n                    log('reconnect_error', err);\n                })\n                .on('reconnect_failed', function () {\n                    log('reconnect_failed');\n                })\n                .on('news', function (data) {\n                    log('news', data);\n                });\n    });\n</script>\n\n</body>\n</html>\n```\n\nSample output:\n```\nconnect>connected\nnews>{\"hello\":\"world\"}\nreconnect_attempt>\nreconnecting>Attempt #1\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #2\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #3\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #4\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #5\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #6\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #7\nconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_error>{\"type\":\"TransportError\",\"description\":0}\nreconnect_attempt>\nreconnecting>Attempt #8\nreconnect>Attempt #8\nconnect>connected\nnews>{\"hello\":\"world\"}\nreconnect_attempt>\nreconnecting>Attempt #1\nreconnect>Attempt #1\nconnect>connected\nnews>{\"hello\":\"world\"}\n```"
  },
  {
    "html_url": "https://gist.github.com/7404ef96dca917d19d8105088c824ed1",
    "description": "Asynchronous programming overview",
    "files": [
      "https://gist.githubusercontent.com/umidjons/7404ef96dca917d19d8105088c824ed1/raw/f62a57c57e847f41568b2d7fa14fbc49de2099ba/async-prog-overview.md"
    ],
    "content": "# Асинхронное программирование\n\n- операция, который результат доступен не сразу же, а через некоторое время\n- а также называют event driven programming\n\n# Примеры асинхронных операций:\n\n- обращение к диску за данными\n- сетевые обращение (БД, веб-сервер, кеш сервер)\n\n## Пример - Обращение к БД\n\n- соединение с сервером БД\n- отправка запроса\n- ожидание ответа\n- чтение ответа\n\n## Пример - Удаление контакта с чата\n\n- соединение с сервером\n- отправка команды\n- ожидание ответа\n- чтение ответа\n- удаление контакта в интерфейсе\n\n# Еще какие методы есть?\n\n## Отдельный процесс\n\nСледующие программы используют мульти-процессы\n\n- Apache (mpm_prefork)\n- PostgreSQL\n- PHP FastCGI\n\n## Отдельный поток\n\nСледующие программы используют мульти-потоки\n\n- Apache (mpm_worker)\n- MySQL\n\n## Минусы мультипроцессов и потоков:\n\n- расходуется относительно много ресурсов (память, переключение контекста)\n- не подходит для обработки большого количество одновременных соединений\n\n## Плюсы:\n\n- идеален когда объем вычеслений высок\n- использует все доступные процессоры\n\n# Deferred и Promise\n\n## Promise vs Deferred\n\nA `promise` represents a value that is not yet known.\n\nМетоды `Promise`:\n\n- promise.then(successHandler, failHandler) - во многих модулях\n- Promise.then(successHandler).catch(failHandler)\n\nA `deferred` represents work that is not yet finished.\n\nМетоды `Deferred`:\n\n- Deferred.resolve() - called when work is success\n- Deferred.reject() - called when work is failed\n\n![](http://i.stack.imgur.com/cfa1p.png)\n\n# Links\n\n- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n- http://itvdn.com/ru/blog/article/programing-javascript\n- http://stackoverflow.com/questions/17308172/deferred-versus-promise\n- http://frontender.info/asynchronous-javascript/"
  },
  {
    "html_url": "https://gist.github.com/a42077352bafbe1e2f44b985fd904f42",
    "description": "Set JavaScript variable via Twig in OctoberCMS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a42077352bafbe1e2f44b985fd904f42/raw/cdb3413e9a84f8b77c344ab026cac43160ac85be/set-twig-variable-in-js-octobercms.md"
    ],
    "content": "# Set JavaScript variable via Twig in OctoberCMS\n\n`record` - is variable, that contains models (objects)\n\nI passed `JSON_PRETTY_PRINT`, `JSON_UNESCAPED_UNICODE` and `JSON_UNESCAPED_SLASHES` constants into `json_encode` filter.\n\n\n```js\n<script>\nvar infokioskList = JSON.parse(\"{{ records | json_encode(constant('JSON_PRETTY_PRINT') + constant('JSON_UNESCAPED_UNICODE') + constant('JSON_UNESCAPED_SLASHES')) | e('js') }}\");\nconsole.log('InfoKiosks List:', infokioskList);\n</script>\n```"
  },
  {
    "html_url": "https://gist.github.com/f88f62d173d249b50f0146d9e8d1d90c",
    "description": "Angular Google Maps directive example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f88f62d173d249b50f0146d9e8d1d90c/raw/6e91e1b348f7993d5fb834470670deba9db4136e/angular-google-maps-example.md"
    ],
    "content": "# Angular Google Maps directive example\n\n## Prepare assets\n```\nbower init\nbower i -S angular lodash angular-simple-logger angular-google-maps\n```\n\n## File `index.html`:\n\n```html\n<!doctype html>\n<html lang=\"en\" ng-app=\"GMapApp\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<meta name=\"viewport\"\n\t\t  content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\">\n\t<meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n\t<title>Google Maps Test</title>\n\t<link rel=\"stylesheet\" href=\"/css/style.css\">\n</head>\n<body ng-controller=\"MainCtrl\">\n\n<ui-gmap-google-map center='map.center' zoom='map.zoom'>\n\t<ui-gmap-markers models=\"markers\" coords=\"'self'\"\n\t\t\t\t\t options=\"markerOptions.options\"\n\t\t\t\t\t events=\"markerOptions.events\">\n\n\t\t<ui-gmap-windows show=\"show\">\n\t\t\t<div ng-non-bindable>\n\t\t\t\t<strong>Address:</strong> {{title}}\n\t\t\t</div>\n\t\t</ui-gmap-windows>\n\n\t</ui-gmap-markers>\n</ui-gmap-google-map>\n\n<script src=\"/bower_components/lodash/dist/lodash.min.js\"></script>\n<script src=\"/bower_components/angular/angular.min.js\"></script>\n<script src=\"/bower_components/angular-simple-logger/dist/angular-simple-logger.min.js\"></script>\n<script src=\"/bower_components/angular-google-maps/dist/angular-google-maps.min.js\"></script>\n<script src=\"/js/app.js\"></script>\n</body>\n</html>\n```\n\n## File `app.js`:\n\n```js\nangular.module('GMapApp', ['uiGmapgoogle-maps'])\n\t.config(function (uiGmapGoogleMapApiProvider) {\n\t\tuiGmapGoogleMapApiProvider.configure({\n\t\t\tkey: 'YOUR_API_KEY',\n\t\t\tlanguage: 'ru-RU'\n\t\t\t// libraries: 'geometry,places,visualization'\n\t\t});\n\t})\n\t.controller('MainCtrl', function ($scope, uiGmapGoogleMapApi) {\n\t\t$scope.map = {\n\t\t\tcenter: {\n\t\t\t\tlatitude: 41.319316,\n\t\t\t\tlongitude: 69.234390\n\t\t\t},\n\t\t\tzoom: 12\n\t\t};\n\n\t\t$scope.markers = [\n\t\t\t{\n\t\t\t\tid: 0,\n\t\t\t\tlatitude: 41.319316,\n\t\t\t\tlongitude: 69.283226,\n\t\t\t\ttitle: 'Alay Market',\n\t\t\t\tshow: false\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 1,\n\t\t\t\tlatitude: 41.328809,\n\t\t\t\tlongitude: 69.263402,\n\t\t\t\ttitle: 'Shaykhantakhur st.',\n\t\t\t\tshow: false\n\t\t\t}\n\t\t];\n\n\t\t$scope.markerOptions = {\n\t\t\toptions: {\n\t\t\t\ticon: '/images/pin-pink-flag.png' // path to custom marker\n\t\t\t},\n\t\t\tevents: {\n\t\t\t  // use either mouseover/mouseout OR click, not both\n\t\t\t\tmouseover: function (gmMarker, eventName, model) {\n\t\t\t\t\tconsole.log('eventName=', eventName, 'model=', model);\n\t\t\t\t\tmodel.show = true;\n\t\t\t\t},\n\t\t\t\tmouseout: function (gmMarker, eventName, model) {\n\t\t\t\t\tconsole.log('eventName=', eventName, 'model=', model);\n\t\t\t\t\tmodel.show = false;\n\t\t\t\t},\n\t\t\t\tclick: function (gmMarker, eventName, model) {\n\t\t\t\t\tconsole.log('eventName=', eventName, 'model=', model);\n\t\t\t\t\tmodel.show = !model.show;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tuiGmapGoogleMapApi.then(function (maps) {\n\t\t\tconsole.log('maps=', maps);\n\t\t\t// google maps sdk is ready to use...\n\t\t});\n\t});\n```\n\n## File `style.css`:\n\n```css\n.angular-google-map-container {\n\theight: 600px;\n\twidth: 1000px;\n}\n```\n\n## Test with http server (optional)\n\n```\nnpm i -g http-server\ncd my-gmap-app-dir\nhttp-server\n```"
  },
  {
    "html_url": "https://gist.github.com/16047079b76e3aef52edb39fc2577a5d",
    "description": "Spawn child process example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/16047079b76e3aef52edb39fc2577a5d/raw/917e3d743fe8669fa9de8a6b74863b392119886d/spawn-child-process.md"
    ],
    "content": "# Spawn child process example\n\n```js\n'use strict';\n\nvar spawn = require('child_process').spawn,\n    pwd = spawn('cmd', ['/c', 'dir']);\n\npwd.stdout.on('data', (data) => {\n    console.log('stdout:', data.toString());\n});\n\npwd.stderr.on('data', (data) => {\n    console.log('stderr:', data.toString());\n});\n\npwd.on('close', (code) => {\n    console.log('child process exited with code', code);\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/d7aa7fdbfa13c3932524c420bb6f9953",
    "description": "UDP Client/Server example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d7aa7fdbfa13c3932524c420bb6f9953/raw/d6b5b9ceb9876084d9466e104a327bc466a955ff/udp-client-server-nodejs.md"
    ],
    "content": "# UDP Client/Server example\n\nFile `server.js`:\n```js\n'use strict';\n\nvar dgram = require('dgram');\nvar server = dgram.createSocket('udp4');\n\nconst PORT = 3000;\n\nserver.on('message', (msg, info) => {\n    console.log(`Message ${msg} from ${info.address}:${info.port}`);\n});\n\nserver.bind(PORT);\n```\n\nFile `client.js`:\n```js\n'use strict';\n\nvar dgram = require('dgram');\nvar client = dgram.createSocket('udp4');\n\nvar SERVER = 'localhost';\nvar PORT = 3000;\n\nprocess.stdin.on('data', (data) => {\n    console.log(data.toString('utf8'));\n\n    client.send(data, 0, data.length, PORT, SERVER, (err, bytes) => {\n        if (err) {\n            console.error(err);\n        } else {\n            console.log('successful');\n        }\n    });\n});\n```\n\nSample output\n\nServer:\n```\nMessage hello\n from 127.0.0.1:59216\nMessage world\n from 127.0.0.1:59216\n```\n\nClient:\n```\nhello\nhello\n\nsuccessful\nworld\nworld\n\nsuccessful\n```"
  },
  {
    "html_url": "https://gist.github.com/dbad7723e15e89bb634991f974ad9a63",
    "description": "Socket client/server example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/dbad7723e15e89bb634991f974ad9a63/raw/0acd71474793ed2e6a347871cacdc9e7cf08eea1/socket-client-server.md"
    ],
    "content": "# Socket client/server example\n\nFile `server.js`:\n```js\n'use strict';\n\nvar net = require('net');\n\nconst PORT = 3000;\n\nvar server = net.createServer((conn) => {\n    console.log('connected');\n\n    conn.on('data', (data) => {\n        console.log(data.toString(), 'from', conn.remoteAddress, ':', conn.remotePort);\n        conn.write('Repeating:' + data);\n    });\n\n    conn.on('close', () => {\n        console.log('Client', conn.remoteAddress, ':', conn.remotePort, 'closed connection');\n    });\n}).listen(PORT);\n\nserver.on('listening', () => {\n    console.log('listening on port', PORT);\n});\n\nserver.on('error', (err) => {\n    if (err.code == 'EADDRINUSE') {\n        console.warn('Address in use, retrying...');\n        setTimeout(() => {\n            server.close();\n            server.listen(PORT);\n        }, 2000);\n    } else {\n        console.error(err);\n    }\n});\n```\n\nFile `client.js`:\n```js\n'use strict';\n\nvar net = require('net');\nvar client = net.Socket();\n\nconst HOST = 'localhost';\nconst PORT = 3000;\n\nclient.setEncoding('utf8');\n\nclient.connect(PORT, HOST, () => {\n    console.log('connected to the server');\n    client.write('Test from the client.');\n});\n\nprocess.stdin.on('data', (data) => {\n    client.write(data);\n});\n\nclient.on('data', (data) => {\n    console.log(data);\n});\n\nclient.on('close', () => {\n    console.log('connection is closed');\n});\n```\n\nSample output\n\nserver:\n```\nlistening on port 3000\nconnected\nTest from the client. from ::ffff:127.0.0.1 : 3415\nhello world\n from ::ffff:127.0.0.1 : 3415\nhow are you?\n from ::ffff:127.0.0.1 : 3415\n```\n\nclient:\n```\nconnected to the server\nRepeating:Test from the client.\nhello world\nRepeating:hello world\n\nhow are you?\nRepeating:how are you?\n```"
  },
  {
    "html_url": "https://gist.github.com/6b64e6445a0e0a8f4b2124ce85beb894",
    "description": "Compressing file using the zlib module",
    "files": [
      "https://gist.githubusercontent.com/umidjons/6b64e6445a0e0a8f4b2124ce85beb894/raw/3ee35681f78e4f2857b3c1fccc4b9f31e18987d2/compress-file-zlib.md"
    ],
    "content": "# Compressing file using the zlib module\n\n```js\n'use strict';\n\nvar zlib = require('zlib');\nvar fs = require('fs');\n\nvar gzip = zlib.createGzip();\n\nvar inp = fs.createReadStream('some.html');\nvar out = fs.createWriteStream('some.html.gz');\n\ninp.pipe(gzip).pipe(out);\n```\n"
  },
  {
    "html_url": "https://gist.github.com/934a0ee9be1e3959a55f22baa9bc7061",
    "description": "Environment variables",
    "files": [
      "https://gist.githubusercontent.com/umidjons/934a0ee9be1e3959a55f22baa9bc7061/raw/c434e40a792ae82dae57473c2adf08e6ffe93f6e/environment-vars.md"
    ],
    "content": "# Print out environment variables\n\n```js\n'use strict';\n\nvar path = require('path');\n\nvar variables = process.env.PATH\n    .split(path.delimiter)\n    .sort();\n\nfor (let v of variables) {\n    console.log(v);\n}\n```\n\nSample output:\n```\nC:\\OpenServer\\modules\\php\\PHP-5.6\nC:\\Program Files (x86)\\ImageMagick-6.8.9-Q16\nC:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common\nC:\\Program Files\\7-Zip\nC:\\Program Files\\Docker Toolbox\nC:\\Program Files\\TortoiseGit\\bin\nC:\\ProgramData\\ComposerSetup\\bin\nC:\\Python\\Python27\\\nC:\\Python\\Python27\\Scripts\nC:\\Ruby22\\bin\nC:\\Users\\devneo\\AppData\\Roaming\\npm\nC:\\Windows\nC:\\Windows\\System32\\Wbem\nC:\\Windows\\System32\\WindowsPowerShell\\v1.0\\\nC:\\Windows\\system32\nC:\\cURL\\bin\nC:\\imagemagick\nc:\\OpenServer\\domains\\yii\nc:\\Program Files\\Git\\bin\nc:\\Program Files\\MongoDB\\Server\\3.2\\bin\nc:\\imagemagick\nc:\\phpunit\nc:\\sonarscanner\\bin\nc:\\sqlite\n```"
  },
  {
    "html_url": "https://gist.github.com/bdbd8ea32a5438f600f41271ebe107c6",
    "description": "fs and path modules example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/bdbd8ea32a5438f600f41271ebe107c6/raw/3ad1887a9b6baa3aa364ee808218ae5e38679c47/fs-path-mod-ex-readdir-stat-isfile-extname-basename.md"
    ],
    "content": "# fs and path modules example\n\nRead the current directory, determine object is file or not,\nextract files extension and basename, print them out.\n\n```js\n'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\n\nfs.readdir('./', (err, files) => {\n    if (err) {\n        console.error(err);\n    }\n\n    for (let file of files) {\n        fs.stat(file, (err, stats) => {\n            if (stats.isFile()) {\n                let ext = path.extname(file);\n                let basename = path.basename(file, ext);\n\n                console.log(`File ${basename} with extension ${ext}`);\n            } else {\n                console.log(`Object ${file} is not a file.`);\n            }\n        });\n    }\n});\n```\n\nSample output:\n```\nObject .idea is not a file.\nFile client with extension .js\nFile index with extension .js\nObject node_modules is not a file.\nFile some with extension .html\nFile package with extension .json\nFile test-dns with extension .js\nFile test-os with extension .js\nFile stat-server with extension .js\n```"
  },
  {
    "html_url": "https://gist.github.com/16c2eac99619a587dd3e3243643aa9db",
    "description": "Determine file/directory permissions",
    "files": [
      "https://gist.githubusercontent.com/umidjons/16c2eac99619a587dd3e3243643aa9db/raw/cc4c410aef4616b410d944b9349558631e128a3f/file-directory-permissions.md"
    ],
    "content": "# Determine file's/directory's permissions\n\nInstall `stat-mode` module:\n```bash\nnpm i stat-mode -S\n```\n\n```js\n'use strict';\n\nvar fs = require('fs');\nvar StatMode = require('stat-mode');\n\nfs.stat('some.html', (err, stats) => {\n    if (err)\n        return console.log(err);\n\n    var mode = new StatMode(stats);\n    console.log('Mode (string):', mode.toString());\n    console.log('Mode (octal):', mode.toOctal());\n\n    console.log('Owner read:', mode.owner.read);\n    console.log('Owner write:', mode.owner.write);\n    console.log('Owner execute:', mode.owner.execute);\n    \n    console.log('Group read:', mode.group.read);\n    console.log('Group write:', mode.group.write);\n    console.log('Group execute:', mode.group.execute);\n    \n    console.log('Others read:', mode.others.read);\n    console.log('Others write:', mode.others.write);\n    console.log('Others execute:', mode.others.execute);\n});\n```\n\nSample output:\n```\nMode (string): -rw-rw-rw-\nMode (octal): 0666\nOwner read: true\nOwner write: true\nOwner execute: false\nGroup read: true\nGroup write: true\nGroup execute: false\nOthers read: true\nOthers write: true\nOthers execute: false\n```"
  },
  {
    "html_url": "https://gist.github.com/3fa6e555a1a782a36baf82998b19c404",
    "description": "Get information about OS and Hardware: OS module example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/3fa6e555a1a782a36baf82998b19c404/raw/77d0cfeb728c541b0b5376a72bf9f640d7610e35/os-hardware-info.md"
    ],
    "content": "# Get information about OS and Hardware: OS module example\n\n```js\n'use strict';\n\nvar os = require('os');\n\nconsole.log('Using EOL' + os.EOL + 'to insert a new line');\nconsole.log('Endianness:', os.endianness());\nconsole.log('Temp Dir:', os.tmpdir());\nconsole.log('Home Dir:', os.homedir());\nconsole.log('Free Mem:', os.freemem());\nconsole.log('Load Avg:', os.loadavg());\nconsole.log('Total Mem:', os.totalmem());\nconsole.log('Architecture:', os.arch());\nconsole.log('Platform:', os.platform());\nconsole.log('Type:', os.type());\nconsole.log('Release:', os.release());\nconsole.log('Uptime:', os.uptime());\nconsole.log('CPUs:', os.cpus());\nconsole.log('Network Interfaces:', os.networkInterfaces());\nconsole.log('Hostname:', os.hostname());\nconsole.log('User Info:', os.userInfo());\n```\n\nSample output:\n```\nUsing EOL\nto insert a new line\nEndianness: LE\nTemp Dir: C:\\Users\\admin\\AppData\\Local\\Temp\nHome Dir: C:\\Users\\admin\nFree Mem: 2283974656\nLoad Avg: [ 0, 0, 0 ]\nTotal Mem: 6292512768\nArchitecture: x64\nPlatform: win32\nType: Windows_NT\nRelease: 6.3.9600\nUptime: 39248.635218\nCPUs: [ { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 382687, nice: 0, sys: 236640, idle: 11244484, irq: 34203 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 389343, nice: 0, sys: 288468, idle: 11185750, irq: 15859 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 413875, nice: 0, sys: 218421, idle: 11231265, irq: 9171 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 495625, nice: 0, sys: 542921, idle: 10825015, irq: 23687 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 509171, nice: 0, sys: 193000, idle: 11161390, irq: 5531 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 541828, nice: 0, sys: 139187, idle: 11182546, irq: 7453 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 594296, nice: 0, sys: 547343, idle: 10721890, irq: 18046 } },\n  { model: 'Intel(R) Core(TM) i7-3612QM CPU @ 2.10GHz',\n    speed: 2095,\n    times: { user: 342750, nice: 0, sys: 175375, idle: 11345406, irq: 5828 } } ]\nNetwork Interfaces: { 'Беспроводная сеть':\n   [ { address: '192.171.1.180',\n       netmask: '255.255.255.0',\n       family: 'IPv4',\n       mac: 'e0:06:e6:d7:92:ef',\n       internal: false } ],\n  'VirtualBox Host-Only Network':\n   [ { address: 'fe83::d14:e27c:190a:a182',\n       netmask: 'ffff:ffff:ffff:ffff::',\n       family: 'IPv6',\n       mac: '0a:00:27:00:00:2a',\n       scopeid: 42,\n       internal: false },\n     { address: '192.171.56.1',\n       netmask: '255.255.255.0',\n       family: 'IPv4',\n       mac: '0a:00:27:00:00:2a',\n       internal: false } ],\n  'Ethernet 4':\n   [ { address: 'fe80::dcaa:b5ed:9562:7998',\n       netmask: 'ffff:ffff:ffff:ffff::',\n       family: 'IPv6',\n       mac: '0a:00:27:00:00:2b',\n       scopeid: 43,\n       internal: false },\n     { address: '169.254.121.152',\n       netmask: '255.255.0.0',\n       family: 'IPv4',\n       mac: '0a:00:27:00:00:2b',\n       internal: false } ],\n  'VirtualBox Host-Only Network #3':\n   [ { address: 'fe80::8196:fc20:51a:4038',\n       netmask: 'ffff:ffff:ffff:ffff::',\n       family: 'IPv6',\n       mac: '0a:00:27:00:00:2d',\n       scopeid: 45,\n       internal: false },\n     { address: '192.171.99.1',\n       netmask: '255.255.255.0',\n       family: 'IPv4',\n       mac: '0a:00:27:00:00:2d',\n       internal: false } ],\n  'Loopback Pseudo-Interface 1':\n   [ { address: '::1',\n       netmask: 'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff',\n       family: 'IPv6',\n       mac: '00:00:00:00:00:00',\n       scopeid: 0,\n       internal: true },\n     { address: '127.0.0.1',\n       netmask: '255.0.0.0',\n       family: 'IPv4',\n       mac: '00:00:00:00:00:00',\n       internal: true } ],\n  'Teredo Tunneling Pseudo-Interface':\n   [ { address: '2002:0:9d38:6ab8:388b:3735:3e57:fe4b',\n       netmask: 'ffff:ffff:ffff:ffff::',\n       family: 'IPv6',\n       mac: '00:00:00:00:00:00',\n       scopeid: 0,\n       internal: false },\n     { address: 'fe80::388b:3735:3f57:fe4b',\n       netmask: 'ffff:ffff:ffff:ffff::',\n       family: 'IPv6',\n       mac: '00:00:00:00:00:00',\n       scopeid: 15,\n       internal: false } ] }\nHostname: nbgeradm\nUser Info: { uid: -1,\n  gid: -1,\n  username: 'admin',\n  homedir: 'C:\\\\Users\\\\admin',\n  shell: null }\n```"
  },
  {
    "html_url": "https://gist.github.com/03546ec5df1c982db57320eaffcccf1b",
    "description": "Find out IP or Record Types of the domain: DNS module example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/03546ec5df1c982db57320eaffcccf1b/raw/c9793539bc1a28dcc7a2f7fcd38dad9fa1245597/find-out-ip-of-domain.md"
    ],
    "content": "# Find out IP of the domain: DNS module example\n\n```js\nvar dns = require('dns');\n\n// get first found IP\ndns.lookup('oreilly.com', (err, address, family) => {\n    if (err) {\n        return console.log(err);\n    }\n\n    console.log('address=', address);\n    console.log('family=', family);\n});\n\n// get all IPs with family\ndns.lookup('oreilly.com', {all: true}, (err, addresses) => {\n    if (err) {\n        return console.log(err);\n    }\n\n    console.log('addresses=', addresses);\n});\n```\n\nSample output:\n```\naddresses= [ { address: '199.27.145.65', family: 4 },\n  { address: '199.27.145.64', family: 4 },\n  { address: '199.27.145.65', family: 4 },\n  { address: '199.27.145.64', family: 4 } ]\naddress= 199.27.145.65\nfamily= 4\n```\n\n# Resolve hostname into record types\n\n```js\n'use strict';\n\nvar dns = require('dns');\n\nconst types = ['A', 'AAAA', 'MX', 'TXT', 'SRV', 'PTR', 'NS', 'CNAME', 'SOA'];\n\nfor (let type of types) {\n    dns.resolve('oreilly.com', type, (err, addresses) => {\n        if (err) {\n            return console.log(`\\nType(${type}):\\n`, err);\n        }\n\n        console.log(`\\nType(${type}) addresses:\\n`, addresses, '\\n');\n    });\n}\n```\n\nSample output:\n```\nType(A) addresses:\n [ '199.27.145.65', '199.27.145.64' ]\n\n\nType(AAAA):\n { Error: queryAaaa ENODATA oreilly.com\n    at errnoException (dns.js:28:10)\n    at QueryReqWrap.onresolve [as oncomplete] (dns.js:216:19)\n  code: 'ENODATA',\n  errno: 'ENODATA',\n  syscall: 'queryAaaa',\n  hostname: 'oreilly.com' }\n\nType(MX) addresses:\n [ { exchange: 'aspmx3.googlemail.com', priority: 10 },\n  { exchange: 'aspmx.l.google.com', priority: 1 },\n  { exchange: 'alt1.aspmx.l.google.com', priority: 5 },\n  { exchange: 'alt2.aspmx.l.google.com', priority: 5 },\n  { exchange: 'aspmx2.googlemail.com', priority: 10 } ]\n\n\nType(TXT) addresses:\n [ [ 'MS=ms43057904' ],\n  [ 'globalsign-domain-verification=aei6eSS-1p0PqmZ3x4jXFoJt_7l6MenGY6u2FV45qG' ],\n  [ 'v=spf1 include:_spf.google.com include:amazonses.com ip4:199.83.44.0/22 ip4:209.204.146.20 ip4:162.42.207.20 ip4:208.76.31.37  ip4:162.42.214.212 include:spf.mandrillapp.com -all' ] ]\n\n\nType(SRV):\n { Error: querySrv ENODATA oreilly.com\n    at errnoException (dns.js:28:10)\n    at QueryReqWrap.onresolve [as oncomplete] (dns.js:216:19)\n  code: 'ENODATA',\n  errno: 'ENODATA',\n  syscall: 'querySrv',\n  hostname: 'oreilly.com' }\n\nType(PTR):\n { Error: queryPtr ENODATA oreilly.com\n    at errnoException (dns.js:28:10)\n    at QueryReqWrap.onresolve [as oncomplete] (dns.js:216:19)\n  code: 'ENODATA',\n  errno: 'ENODATA',\n  syscall: 'queryPtr',\n  hostname: 'oreilly.com' }\n\nType(NS) addresses:\n [ 'a4-64.akam.net',\n  'a1-225.akam.net',\n  'a13-64.akam.net',\n  'a16-65.akam.net',\n  'a20-66.akam.net',\n  'a3-67.akam.net' ]\n\n\nType(SOA) addresses:\n { nsname: 'a1-225.akam.net',\n  hostmaster: 'nic-tc.oreilly.com',\n  serial: 2016052325,\n  refresh: 600,\n  retry: 1800,\n  expire: 5184000,\n  minttl: 3600 }\n\n\nType(CNAME):\n { Error: queryCname ENODATA oreilly.com\n    at errnoException (dns.js:28:10)\n    at QueryReqWrap.onresolve [as oncomplete] (dns.js:216:19)\n  code: 'ENODATA',\n  errno: 'ENODATA',\n  syscall: 'queryCname',\n  hostname: 'oreilly.com' }\n\n```"
  },
  {
    "html_url": "https://gist.github.com/88fa0041e6dd583491dd83662d007d2c",
    "description": "Client/Server post request example in pure Node.js",
    "files": [
      "https://gist.githubusercontent.com/umidjons/88fa0041e6dd583491dd83662d007d2c/raw/83341fab95c05c51997fceedaa9241ee1cc8beee/client-server-post-request-ex-in-pure-node.md"
    ],
    "content": "# Client/Server POST request example in pure Node.js\n\nFile `server.js`:\n```js\nvar http = require('http');\nvar querystring = require('querystring');\n\nvar server = http.createServer().listen(3000);\n\nserver.on('request', function (req, res) {\n    if (req.method == 'POST') {\n        var body = '';\n    }\n\n    req.on('data', function (data) {\n        body += data;\n    });\n\n    req.on('end', function () {\n        var post = querystring.parse(body);\n        console.log(post);\n        res.writeHead(200, {'Content-Type': 'text/plain'});\n        res.end('Hello World\\n');\n    });\n});\n\nconsole.log('Listening on port 3000');\n```\n\nFile `client.js`:\n```js\nvar http = require('http');\nvar querystring = require('querystring');\n\nvar postData = querystring.stringify({\n    msg: 'hello world'\n});\n\nvar options = {\n    hostname: 'localhost',\n    port: 3000,\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Content-Length': postData.length\n    }\n};\n\nvar req = http.request(options, function (res) {\n    console.log('STATUS:', res.statusCode);\n    console.log('HEADERS:', JSON.stringify(res.headers));\n\n    res.setEncoding('utf8');\n\n    res.on('data', function (chunk) {\n        console.log('BODY:', chunk);\n    });\n\n    res.on('end', function () {\n        console.log('No more data in response.');\n    });\n});\n\nreq.on('error', function (e) {\n    console.log('Problem with request:', e.message);\n});\n\nreq.write(postData);\nreq.end();\n```\n\nServer's output:\n```\n$ node index.js\nListening on port 3000\n{ msg: 'hello world' }\n```\n\nClient's output:\n```\n$ node client.js\nSTATUS: 200\nHEADERS: {\"content-type\":\"text/plain\",\"date\":\"Wed, 17 Aug 2016 09:22:04 GMT\",\"connection\":\"close\",\"transfer-encoding\":\"chunked\"}\nBODY: Hello World\n\nNo more data in response.\n```"
  },
  {
    "html_url": "https://gist.github.com/b1702a3883b86a0c0cc8b4df2ae8abed",
    "description": "Get input from standard input stream example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b1702a3883b86a0c0cc8b4df2ae8abed/raw/7303e7f5600fc126c5db3b837e82165da49f4587/stdin-read-example.md"
    ],
    "content": "# Get input from stdin example\n\n```js\n\"use strict\";\n\nprocess.stdin.setEncoding('utf8');\n\nprocess.stdin.on('readable', ()=> {\n    let input = process.stdin.read();\n\n    if (input !== null) {\n        input = input.trim();\n    }\n\n    if (input == 'exit' || input == 'quit' || input == 'bye') {\n        process.exit();\n    }\n\n    console.log('Input:', input);\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/9ce1e39a88438cebf41479c9a43d8ba2",
    "description": "Extending EventEmitter example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9ce1e39a88438cebf41479c9a43d8ba2/raw/d246620cb3d8ad98bb37e703dfa4bb5dccc224ee/extend-eventemitter.md"
    ],
    "content": "# Extending EventEmitter example\n\n```js\n\"use strict\";\n\nvar EventEmitter = require('events').EventEmitter;\n\nclass MyClass extends EventEmitter {\n    /**\n     * Create MyClass instance\n     * @param {int} start counter's start value\n     * @param {int} interval interval in milliseconds\n     */\n    constructor(start, interval = 3000) {\n        super();\n        this.counter = start;\n        this.interval = interval;\n    }\n\n    /**\n     * Some worker method, that emits myEvent event with counter's value\n     */\n    startWork() {\n        setInterval(()=> {\n            this.emit('myEvent', this.counter++);\n        }, this.interval);\n    }\n}\n\nvar myObj = new MyClass(10, 1000);\n\n// subscribe to the event\nmyObj.on('myEvent', (data)=> {\n    console.log('Event fired:', data);\n});\n\n// start very important work\nmyObj.startWork();\n```"
  },
  {
    "html_url": "https://gist.github.com/660872ebe7c5ee4872967f81ebead8c3",
    "description": "EventEmitter example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/660872ebe7c5ee4872967f81ebead8c3/raw/2761ad50b47182f515f13edc6513376e2882a335/event-emitter.md"
    ],
    "content": "# events.EventEmitter example\n\n```js\n\"use strict\";\n\nvar EventEmitter = require('events').EventEmitter;\nvar ee = new EventEmitter();\nvar counter = 1;\n\nsetInterval(function () {\n    ee.emit('timed', counter++);\n}, 3000);\n\nee.on('timed', function (data) {\n    console.log('timed ' + data);\n});\n```\n\nSample output:\n```\n> node test\ntimed 1\ntimed 2\ntimed 3\n^C\n```"
  },
  {
    "html_url": "https://gist.github.com/35e02f5ed9235788a026d8cf0654123b",
    "description": "Change home item in Breadcrumbs widget",
    "files": [
      "https://gist.githubusercontent.com/umidjons/35e02f5ed9235788a026d8cf0654123b/raw/2b5dd959b4da53a618f27fa4be104ad3c59351f7/breadcrumbs-home-link.md"
    ],
    "content": "## Change home item in Breadcrumbs widget\n\nTo change breadcrumbs home item, for example, in the main layout, add `homeLink` item like this:\n```php\n<div class=\"container\">\n    <?= Breadcrumbs::widget([\n        'homeLink' => ['label' => 'Главная', 'url' => Yii::$app->homeUrl],\n        'links' => isset($this->params['breadcrumbs']) ? $this->params['breadcrumbs'] : [],\n    ]) ?>\n    <?= $content ?>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/8d65ad422df6d2503bae4d2b60133c73",
    "description": "Yii2 Installation",
    "files": [
      "https://gist.githubusercontent.com/umidjons/8d65ad422df6d2503bae4d2b60133c73/raw/06c7fe8ecd1a1bf04a2c18ae3adfea71a5dce6a9/yii2-install.md"
    ],
    "content": "### Installing Yii2\n\n```\nmkdir app3.uz\ncd app3.uz\ncomposer global require fxp/composer-asset-plugin --no-plugins\ncomposer create-project --prefer-dist yiisoft/yii2-app-basic .\n```\n\n### Set the application root path via .htaccess\n\nCreate `.htaccess` file in the application root folder.\n```conf\nRewriteEngine On\nRewriteCond %{REQUEST_URI} !^web\nRewriteRule ^(.*)$ web/$1 [L]\n```\n\nAlso create `.htaccess` file in the `/web/` folder:\n```conf\nRewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . index.php\n```\n\nAdjusting URL generation (removing `/web/` part from generated URLs):\n\nIn file `config/web.php` set base URL to empty string, also enable `urlManager` component:\n```php\n<?php\n    // ...\n    'components' => [\n        'request' => [\n            'baseUrl' => '', // <--- set base URL\n            // ...\n        ],\n        // ...\n        'urlManager' => [\n            'enablePrettyUrl' => true,\n            'showScriptName' => false,\n            'rules' => [\n            ],\n        ],\n\t],\n\t// ...\n```\n\n"
  },
  {
    "html_url": "https://gist.github.com/a4ba72e228a7bbaa1bccc4f79d838f62",
    "description": "Installing micro clinic on Ubuntu",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a4ba72e228a7bbaa1bccc4f79d838f62/raw/570783459c12c835b8ca24a33c718da6c062b017/micro-clinic-setup-docker.md",
      "https://gist.githubusercontent.com/umidjons/a4ba72e228a7bbaa1bccc4f79d838f62/raw/ebf2a5b8b928517c7e43d827edbcffbb1863d922/micro-clinic-setup-prebuilt-images.md",
      "https://gist.githubusercontent.com/umidjons/a4ba72e228a7bbaa1bccc4f79d838f62/raw/ab031cadf119ab87b5fa67258ebc34b0ac3960a1/micro-clinic-setup.md"
    ],
    "content": "### DOCKER INSTALLATION ON UBUNTU 16.10\n\nSource: `https://docs.docker.com/engine/installation/linux/ubuntulinux/`\n\n```bash\n$ sudo mc\n# uname -r\n# apt-get update\n# apt-get install apt-transport-https ca-certificates\n# apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n# echo \"deb https://apt.dockerproject.org/repo ubuntu-wily main\" > /etc/apt/sources.list.d/docker.list\n# apt-get update\n# apt-get purge lxc-docker\n# apt-cache policy docker-engine\n# apt-get install linux-image-extra-$(uname -r)\n# apt-get update\n# apt-get install docker-engine\n# service docker start\n# docker run hello-world\n# docker ps -a\n# docker rm fc1044f892d3\n# docker rmi hello-world\n```\n\n### Build Web Server image\n\n#### Dockerfile to create web server image\n\nDockerfile:\n```\nFROM ubuntu:yakkety\nMAINTAINER Umidjons <almatov.us@gmail.com>\n\nWORKDIR /\n\nRUN apt-get update && apt-get install -y \\\n\t\tvim \\\n\t\tcurl \\\n\t\tgit \\\n\t\tsoftware-properties-common\n\nENV NVM_VERSION v0.31.2\nENV NODE_VERSION 6.3.0\n\nRUN apt-get update && apt-get install -y \\\n\t\tpython2.7 \\\n\t\tpython2.7-dev \\\n\t\tbuild-essential \\\n\t\tlibssl-dev\n\nRUN rm /bin/sh \\\n\t&& ln -s /bin/bash /bin/sh \\\n\t&& curl -sL https://raw.githubusercontent.com/creationix/nvm/$NVM_VERSION/install.sh -o install_nvm.sh \\\n\t&& bash install_nvm.sh \\\n\t&& . /root/.nvm/nvm.sh \\\n\t&& nvm install $NODE_VERSION \\\n\t&& npm config set python /usr/bin/python2.7 \\\n\t&& npm install pm2 -g \\\n\t&& git config --global user.name \"Umidjons\" \\\n\t&& git config --global user.email \"almatov.us@gmail.com\" \\\n\t&& git clone https://github.com/umidjons/micro-clinic.git \\\n\t&& cd micro-clinic/ \\\n\t&& npm install \\\n\t&& npm install -g bower \\\n\t&& bower install --allow-root --force-latest\n\nVOLUME /root/.pm2/logs\n\nWORKDIR /micro-clinic/\n\nEXPOSE 3000\nCMD [\"pm2\", \"start\", \"server.js\"]\n```\n\nBuild command:\n```bash\n$ docker build -f Dockerfile -t starmed/webserver:1.0 .\n```\n\n#### Manual build of image from container\n\nDo following steps:\n```bash\n$ docker pull ubuntu:yakkety\n$ docker-machine ssh default\n$ docker network create starmed-network\n$ docker run -it --name webserver ubuntu:yakkety bash\ncontainer# apt-get update\ncontainer# apt-get install -y vim\ncontainer# apt-get install -y curl\ncontainer# apt-get install -y software-properties-common\ncontainer# apt-get install -y python2.7 python2.7-dev\ncontainer# apt-get install -y build-essential libssl-dev\ncontainer# curl -sL https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh -o install_nvm.sh\ncontainer# bash install_nvm.sh\ncontainer# source ~/.profile\ncontainer# nvm ls-remote\ncontainer# nvm install 6.3.0\ncontainer# apt-get install -y git\ncontainer# npm config set python /usr/bin/python2.7\ncontainer# npm install pm2 -g\ncontainer# git config --global user.name \"Umidjons\"\ncontainer# git config --global user.email \"almatov.us@gmail.com\"\ncontainer# git config -l\ncontainer# git clone https://github.com/umidjons/micro-clinic.git\ncontainer# cd micro-clinic/\ncontainer# npm install\ncontainer# npm install -g bower\ncontainer# bower install --allow-root --force-latest\ncontainer# pm2 start server.js\ncontainer# pm2 stop all\ncontainer# pm2 delete all\ncontainer# exit\n$ docker commit webserver starmed/webserver:manual\n```\n\n#### Export image into file\n\n```bash\n$ docker save -o webserver_1.0.tar starmed/webserver:1.0\n```\n\n#### Load image from file\n\n```bash\n$ docker load -i webserver_1.0.tar\n```\n\n### Dump & Restore database\n\nDump database on host machine I use following command:\n```bash\n$ mongodump --db starmed --out dbdumps/15072016171000\n```\n\nNote, number 15072016171000 means 15.07.2016 17:10:00.\n\nRun database image with dumps volume\n```bash\n$ docker run -d --name db --net starmed-network -v /data/db:/data/db -v /data/configdb:/data/configdb -v /home/superuser/StarmedDist/Dumps:/data/dumps mongo:3.2.8\n```\n\n`/home/superuser/StarmedDist/Dumps` on host machine points to `/data/dumps` on docker container.\n\nThen run mongo restore on that container:\n```bash\n$ docker exec db mongorestore -d starmed /data/dumps/15072016171000/starmed\n```\n\n`db` is container name\n`-d` is mongorestore option, it specified database name to import\n\n### PREPARE NETWORK\n\nCreate network for docker containers\n```bash\ndocker network create starmed-network\n```\n\n### RUNNING MONGO IN DOCKER CONTAINER\n\nPull mongo image:\n```bash\ndocker pull mongo:3.2.8\n```\n\nRun container:\n```bash\ndocker run -d \\\n\t--name db \\\n\t--net starmed-network \\\n\t-v /data/db:/data/db \\\n\t-v /data/configdb:/data/configdb \\\n\t-v /home/superuser/StarmedDist/Dumps:/data/dumps \\\n\tmongo:3.2.8\n```\n\nContainer name is: db\nNetwork is: starmed-network\nMounted volumes: \n\tFor database files: /data/db -> /data/db\n\t\t\t\t\t\t/data/configdb -> /data/configdb\n\tFor dumps: /home/superuser/StarmedDist/Dumps -> /data/dumps\n\nRestore dump example:\n```bash\ndocker exec db mongorestore -d starmed /data/dumps/15072016171000/starmed\n```\n\n### RUNNING APP IN DOCKER CONTAINER\n\nDocker file `Dockerfile_node` to build App container:\n```Dockerfile\nFROM node:6\nMAINTAINER Umidjons <almatov.us@gmail.com>\n\nWORKDIR /\n\nRUN npm install -g pm2\n\n# copy current directory contents from build context into app directory\nCOPY . /usr/src/app\n\nWORKDIR /usr/src/app\n\n# pm2 logs\nVOLUME /root/.pm2/logs\n\nEXPOSE 3000\nCMD [\"pm2\", \"start\", \"server.js\", \"-i\", \"0\", \"--no-daemon\"]\n```\n\nBuild image:\n```bash\ncd /home/me/dist/app/\ndocker build -f Dockerfile_node -t ws:1.0 .\n```\n\nRun container in daemon mode:\n```bash\nmkdir /var/log/pm2\ndocker run -d --name ws --net starmed-network -p 80:3000 -v /var/log/pm2:/root/.pm2/logs ws:1.0\n```\n\nStop container:\n```bash\ndocker stop ws\n```\n\nDelete container:\n```bash\ndocker rm ws\n```\n\nShow logs:\n```bash\ndocker logs -f ws\n```\n\nExport app image\n```bash\ndocker save -o ws_1.0.tar ws:1.0\n```\n\nLoad app image:\n```bash\ndocker load -i ws_1.0.tar\n```### Installing application\n\nInstall Node.js\n```bash\nsudo curl -L https://deb.nodesource.com/setup_6.x | sudo -E bash -\nsudo apt-get install -y nodejs\nsudo npm install pm2 -g\n```\n\nInstalling MongoDB\n```bash\nsudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv EA312927\ncd /etc/apt/sources.list.d\ntouch mongodb-org-3.2.list\necho \"deb http://repo.mongodb.org/apt/debian wheezy/mongodb-org/3.2 main\" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.2.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org\nsudo service mongod start\n```\n\nCopy source files into Linux server.\n\nStart application:\n```bash\nnode server\nsudo pm2 start server.js -i 0\nsudo pm2 monit\nsudo pm2 stop all\nsudo pm2 delete all\nsudo pm2 reload all\n```\n\nExport DB data:\n```bash\nmongodump --db starmed --out dbdumps/210627144000\n```\n\nWorking with mongo shell:\n```js\nroot@calibre:~/starmed0# mongo\nMongoDB shell version: 3.2.7\nconnecting to: test\nServer has startup warnings:\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten]\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten]\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten] **        We suggest setting it to 'never'\n2016-07-09T15:04:31.775+0500 I CONTROL  [initandlisten]\n>\n>\n>\n>\n>\n> show dbs\nlocal    0.000GB\nstarmed  0.001GB\n>\n>\n>\n> use starmed\nswitched to db starmed\n>\n>\n>\n> show collections\nbranches\ncashes\ncompanies\ndeposits\ndiscounts\nlog\npartners\npatients\npatientservices\npermissions\nresidents\nservicecategories\nservices\nsettings\nsexes\nstates\nsystem.profile\nusers\n```\n\nApplication settings are in `include/config.js` file."
  },
  {
    "html_url": "https://gist.github.com/b47d0fbf538e432bbd4e1760816447f6",
    "description": "Generate Excel file via AJAX",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b47d0fbf538e432bbd4e1760816447f6/raw/a39248abc2213f2f6c99cc379f372294d228e1b4/excel-via-ajax.md"
    ],
    "content": "# Generate Excel file via AJAX\n\nInstall dependencies\n```bash\nnpm init\nnpm i express body-parser node-excel-export jquery -S\n```\n\nFile `server.js`:\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar bodyParser = require('body-parser');\nvar excel = require('node-excel-export');\nvar path = require('path');\n\n// serve static assets from node_modules\napp.use('/assets', express.static('node_modules'));\n\n// configure parsers\napp.use(bodyParser.urlencoded({extended: true, limit: '1mb'}));\napp.use(bodyParser.json({limit: '5mb'}));\n\napp\n    .get('/', function (req, res) {\n        res.sendFile(__dirname + '/index.html');\n    })\n    .get('/export', function (req, res) {\n        // example from https://github.com/andreyan-andreev/node-excel-export\n        let styles = {\n            headerDark: {\n                fill: {\n                    fgColor: {\n                        rgb: 'FF000000'\n                    }\n                },\n                font: {\n                    color: {\n                        rgb: 'FFFFFFFF'\n                    },\n                    sz: 14,\n                    bold: true,\n                    underline: true\n                }\n            },\n            cellPink: {\n                fill: {\n                    fgColor: {\n                        rgb: 'FFFFCCFF'\n                    }\n                }\n            },\n            cellGreen: {\n                fill: {\n                    fgColor: {\n                        rgb: 'FF00FF00'\n                    }\n                }\n            }\n        };\n\n        // Array of objects representing heading rows\n        let heading = [\n            [\n                {value: 'a1', style: styles.headerDark},\n                {value: 'b1', style: styles.headerDark},\n                {value: 'c1', style: styles.headerDark}\n            ],\n            ['a2', 'b2', 'c2'] // <-- It can be only values\n        ];\n\n        // export structure\n        let specification = {\n            customer_name: { // <- the key should match the actual data key\n                displayName: 'Customer', // <- Here you specify the column header\n                headerStyle: styles.headerDark, // <- Header style\n                cellStyle: function (value, row) { // <- style renderer function\n                    // if the status is 1 then color in green else color in red\n                    // Notice how we use another cell value to style the current one\n                    return (row.status_id == 1) ? styles.cellGreen : {fill: {fgColor: {rgb: 'FFFF0000'}}}; // <- Inline cell style is possible\n                },\n                width: 120 // <- width in pixels\n            },\n            status_id: {\n                displayName: 'Status',\n                headerStyle: styles.headerDark,\n                cellFormat: function (value, row) { // <- Renderer function, you can access also any row.property\n                    return (value == 1) ? 'Active' : 'Inactive';\n                },\n                width: '10' // <- width in chars (when the number is passed as string)\n            },\n            note: {\n                displayName: 'Description',\n                headerStyle: styles.headerDark,\n                cellStyle: styles.cellPink, // <- Cell style\n                width: 220 // <- width in pixels\n            }\n        };\n\n        // The data set should have the following shape (Array of Objects)\n        // The order of the keys is irrelevant, it is also irrelevant if the\n        // dataset contains more fields as the report is build based on the\n        // specification provided above. But you should have all the fields\n        // that are listed in the report specification\n        let dataset = [\n            {customer_name: 'IBM', status_id: 1, note: 'some note', misc: 'not shown'},\n            {customer_name: 'HP', status_id: 0, note: 'some note'},\n            {customer_name: 'MS', status_id: 0, note: 'some note', misc: 'not shown'}\n        ];\n\n        // Create the excel report.\n        // This function will return Buffer\n        let report = excel.buildExport(\n            [ // <- Notice that this is an array. Pass multiple sheets to create multi sheet report\n                {\n                    name: 'Sheet name', // <- Specify sheet name (optional)\n                    heading: heading, // <- Raw heading array (optional)\n                    specification: specification, // <- Report specification\n                    data: dataset // <-- Report data\n                }\n            ]\n        );\n\n        // convert excel file content to base64 and send to a client\n        res.send({content: report.toString('base64')});\n    })\n    .listen(4000, function () {\n        console.log(`Listening on http://localhost:4000`);\n    });\n```\n\nFile `index.html`:\n```html\n<html>\n<head>\n    <title>Export to Excel via AJAX</title>\n    <script src=\"/assets/jquery/dist/jquery.min.js\"></script>\n</head>\n<body>\n\n<button id=\"export\">Export To Excel</button>\n\n<script>\n    \"use strict\";\n\n    jQuery(document).ready(function ($) {\n\n        $('#export').on('click', function () {\n            $.get('/export', function (resp) {\n                let uri = \"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,\";\n                let url = uri + resp.content;\n                setTimeout(function () {\n                    location.href = url;\n                }, 100);\n            });\n        });\n\n    });\n</script>\n</body>\n</html>\n```\n\nRun server:\n```bash\nnode server\n```\n\nOpen `http://localhost:4000` in web browser, then click button to download excel file."
  },
  {
    "html_url": "https://gist.github.com/e325d2ce8b3bc2113c788d1d52f8c497",
    "description": "Prevent \"OverwriteModelError: Cannot overwrite model once compiled.\" error",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e325d2ce8b3bc2113c788d1d52f8c497/raw/0fe8f13f42a777188c80a2e27942dfdaa2584a06/prevent-overwritemodelerror-mongoose-error.md"
    ],
    "content": "### Prevent \"OverwriteModelError: Cannot overwrite model once compiled.\" error\n\n```js\nafter(function (done) {\n    mongoose.models = {};\n    mongoose.modelSchemas = {};\n    mongoose.connection.close();\n    done();\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/829ef6c2ce26ed6527ddf30684465c59",
    "description": "E2E Testing: Selenium Tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/829ef6c2ce26ed6527ddf30684465c59/raw/0b28760ad9b883aef6330d550c6dbfbdd02a8ec9/e2e-testing-selenium-tips.md"
    ],
    "content": "### E2E Testing: Selenium Tips\n\nSpecifying driver on Selenium Server run:\n```bash\n# chromedriver.exe in the current directory\njava -Dwebdriver.chrome.driver=chromedriver.exe -jar selenium-server-standalone-2.53.0.jar\n```"
  },
  {
    "html_url": "https://gist.github.com/2f1c158aaf8e2bcc8e2463bb71162f5c",
    "description": "Update each element of the array in multiple documents",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2f1c158aaf8e2bcc8e2463bb71162f5c/raw/0aa80831df0327d7cb42f738ec434e162a5839a3/update-multiple-documents-array-each-element.md"
    ],
    "content": "Update each element of the array in multiple documents\n===\n\n```js\n// Branch document to set for each Pay document\nvar branch={\n    \"_id\" : ObjectId(\"574da2d03f0b7f4c16bc08e6\"),\n    \"user\" : ObjectId(\"57483e928e061688284ceffb\"),\n    \"title\" : \"\\\"Main Office\\\" Ltd.\",\n    \"shortTitle\" : \"Main\",\n    \"address\" : \"Tashkent city\",\n    \"phone\" : \"998710000000\",\n    \"state\" : {\n        \"_id\" : \"active\",\n        \"title\" : \"Active\"\n    },\n    \"created\" : ISODate(\"2016-05-31T14:42:05.344Z\"),\n    \"__v\" : 0\n};\n\ndb.getCollection('patientservices').find()\n.forEach(function(doc){\n    // doc.pays is array of Pay objects\n    doc.pays.forEach(function(pay){\n        // set branch of the pay\n        pay.branch = branch;\n    });\n    // save current document - patientservice item\n    db.getCollection('patientservices').save(doc);\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/39469865d16b67bdfbea82ce85e11188",
    "description": "MongoDB aggregate(), $lookup example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/39469865d16b67bdfbea82ce85e11188/raw/6ed423cca62a3fc9e4c3a0bc702caba625faeb99/mongodb-aggregate-lookup-example.md"
    ],
    "content": "MongoDB aggregate(), $lookup example\n===\n\n```js\ndb.patientservices.aggregate([\n  {\n      $unwind: '$pays'\n  },\n  {\n      $group: {\n          _id: {patientId: '$patientId', 'payTime': '$pays.created'},\n          payAmount: {$sum: '$pays.amount'}\n      }\n  },\n  {\n      $sort: {'_id.payTime': -1}\n  },\n  {\n      $lookup: {\n          from: 'patients',\n          localField: '_id.patientId',\n          foreignField: '_id',\n          as: 'patient'\n      }\n  },\n  {\n      $unwind: '$patient'\n  },\n  {\n      $project: {\n          _id: 0,\n          patientId: '$_id.patientId',\n          patient: '$patient',\n          payTime: '$_id.payTime',\n          payAmount: '$payAmount'\n      }\n  }\n]);\n```"
  },
  {
    "html_url": "https://gist.github.com/7b390e4ab6639578cd438c4c0315d496",
    "description": "Docker tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/7b390e4ab6639578cd438c4c0315d496/raw/ea80ca6dfb32519295b7bd6fe5243bcef4039fab/docker-tips.md"
    ],
    "content": "# Docker Tips\n\n## Installation and first time run experience on Windows 8.1\n\nI use Windows 8.1 for Docker.\n\nAfter installation when I tried to run docker, for example `docker run hello-world` from `cmd` I received the following error:\n```\nC:\\Program Files\\Docker Toolbox\\docker.exe: An error occurred trying to connect: Post http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.23/containers/create: open //./pipe/docker_engine: The system cannot find the file specified..\nSee 'C:\\Program Files\\Docker Toolbox\\docker.exe run --help'.\n```\n\nRun docker on Windows with `start.sh` script from Docker installation directory.\nOutput would be like following:\n```\n\n\n                        ##         .\n                  ## ## ##        ==\n               ## ## ## ## ##    ===\n           /\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\\___/ ===\n      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~\n           \\______ o           __/\n             \\    \\         __/\n              \\____\\_______/\n\ndocker is configured to use the default machine with IP 192.168.99.100\nFor help getting started, check out the docs at https://docs.docker.com\n\nStart interactive shell\n\ndevneo@host MINGW64 ~\n$\n```\n\nIf you get error about certification, try to regenerated them (`default` is the default VM name):\n```\n$ docker-machine regenerate-certs -f default\n```\n\nWhen I tried to access terminal on a container I got following error:\n```bash\n$ docker run -it hello-world\ncannot enable tty mode on non tty input\n```\n\nTo solve this problem I logged into `default` VM via `ssh` using `docker-machine`, then run container from there:\n```bash\n$ docker-machine ssh default\n                        ##         .\n                  ## ## ##        ==\n               ## ## ## ## ##    ===\n           /\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\"\\___/ ===\n      ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ /  ===- ~~~\n           \\______ o           __/\n             \\    \\         __/\n              \\____\\_______/\n _                 _   ____     _            _\n| |__   ___   ___ | |_|___ \\ __| | ___   ___| | _____ _ __\n| '_ \\ / _ \\ / _ \\| __| __) / _` |/ _ \\ / __| |/ / _ \\ '__|\n| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__|   <  __/ |\n|_.__/ \\___/ \\___/ \\__|_____\\__,_|\\___/ \\___|_|\\_\\___|_|\nBoot2Docker version 1.11.1, build HEAD : 7954f54 - Wed Apr 27 16:36:45 UTC 2016\nDocker version 1.11.1, build 5604cbe\ndocker@default:~$\ndocker@default:~$ docker run -i -t ubuntu bash\nroot@976029f4f84d:/#\n```\n\n## Cheat-sheet\n\n| Command      | Description               | Example |\n---------------|---------------------------|---------|\n|`docker`| list available docker commands| |\n| `docker ps`  | shows running containers  | |\n| `docker ps -a` | shows all containers, including stopped ones | |\n| `docker images` | lists images | |\n| `docker run repo/image:tag` | runs a container | `docker run library/mongo:3.2.6` |\n| `docker run --name <name> -d image` | runs a container in detached mode | `docker run --name db -d library/mongo:latest` |\n| `docker run --name <name> -p locPort:contPort -d image` | runs a container in detached mode forwarding localport to containers port | `docker run --name webapp -p 80:3000 -d umidjons/webserver:1.3` `docker run -p 80:3000 -d umidjons/webserver:1.0 bash /var/www/startws.sh`|\n| `docker run -i -t image cmd` | runs a container in interactive mode | `docker run -it ubuntu bash` |\n| `docker logs <shortId|name>` | shows container's last output once | `docker logs db` |\n| `docker logs -f <shortId|name>` | shows container's output in real time | `docker logs -f a23d91dd002f` |\n| `docker commit <shortId|name> repo/image:tag` | commits container changes as an image | `docker commit a23d91dd002f umidjons/myapp:1.0` |\n| `docker stop <shortId|name>` | stops container, useful to stop detached container | `docker stop a23d91dd002f` |\n| `docker exec -i -t repo/image:tag cmd` | start a new process for container, when exits doesn't stops main container with PID 1 | `docker exec -i -t ubuntu:latest bash` |\n| `docker rm <shortId|name>` | removes a container | `docker rm db` |\n| `docker tag image:tag repo/user/image:tag` | tags image with new tags | `docker tag myubuntu:1.0 umidjons/webserver:1.0` `docker tag 7d9495d03763 umidjons/app-main:latest` |\n| `docker push user/image:tag` | pushes image to docker hub | `docker push umidjons/webserver:1.0`|\n| `docker inspect <shortId|name>` | inspects container, information about container, image | `docker inspect a23d91dd002f` `docker inspect myapp` `docker inspect db | grep IPAddress`|\n| `docker-machine`| show usage and available command | `docker-machine` |\n| `docker-machine ip <vmname>` | find out VM's IP address | `docker-machine ip default` |\n| `docker-machine ls` | list available VMs | `docker-machine ls` |\n| `docker-machine status <vmname>` | find out VM's status | `docker-machine status default` |\n| `docker-machine env <vmname>` | set environment variables for the specified machine | `docker-machine env default` |\n| `docker save -o imagefullpath.tar image`| saves images into specified location in `tar` archive format | `docker save -o /c/Users/umidjons/Images/my_webserver_1.0.tar umidjons/webserver:1.0` |\n| `docker load -i image.tar` | loads saved image into docker | `docker load -i my_webserver_1.0.tar` |\n| `docker build -t image:tag path` | build image according to Dockerfile located in path | `docker build -t umidjons/myapp:latest .` |\n| `docker run -v locPath:contPath image cmd` | mounts local path to the specified container's path | `docker run -i -t -p 3000:3000 -v /c/Users/umidjons/projects/myapp/:/var/www/myapp umidjons/myapp:4.7 node /var/www/myapp/server.js` |\n| `docker network ls` | list available networks | `docker network ls` |\n| `docker network inspect <networkName>` | inspects given network (shows information about that network) | `docker network inspect mynetwork` |\n| `docker network create --driver bridge <networkName>` | creates isolated network | `docker network create --driver bridge mynetwork` |\n| `docker run -d --net=<networkName> --name <containerName> <image>` | run container with specifying network | `docker run -d --net=mynetwork --name mymongodb mongo` `docker run -d --net=mynetwork --name nodeapp -p 80:3000 node` from now inside `nodeapp` container we can use host name `mymongodb` as they are in the same network |\n| `docker-compose build` | build containers from `docker-compose.yml` file | |\n| `docker-compose up` | up built containers according to `docker-compose.yml` | |\n| `docker-compose up -d` | up built containers in daemon mode according to `docker-compose.yml` | |\n| `docker-compose down` | tear down (also removes containers) running containers | |\n| `docker-compose ps` | show information about running containers | |\n| `docker-compose logs` | show logs from all running containers | |\n\nRun docker on external 8080 port, map that port into internal 3000 port on the container, create volum that points current directory into containers /var/www directory, then with -w set working directory in the container to /var/www, run node image with command node app.js:\n`docker run -p 8080:3000 -v $(pwd):/var/www -w \"/var/www\" node:6 node app.js`"
  },
  {
    "html_url": "https://gist.github.com/5cf2a23cc1ff80ca4c92cebd22502fd9",
    "description": "Change file attribute",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5cf2a23cc1ff80ca4c92cebd22502fd9/raw/bbe9590287f71e76ce14b51aeaa74d51fc666b22/change-file-attribute.md"
    ],
    "content": "Change File Attribute\n===\n\n```bash\nsudo apt-get install libimage-exiftool-perl\nexiftool -Title=\"Some title\" -Author=\"Me\" myfile.pdf\n```"
  },
  {
    "html_url": "https://gist.github.com/47f616867cf35592512e4c52a9259fc6",
    "description": "Simple microservice with Seneca and Express",
    "files": [
      "https://gist.githubusercontent.com/umidjons/47f616867cf35592512e4c52a9259fc6/raw/7603d46cb5c3e1e1edd8a65b385c86e8daac36ae/microservice-seneca-express.md"
    ],
    "content": "# Simple microservice with Seneca and Express\n\n## Microservice implementation\n\n### Installing microservice dependencies\n\n```bash\nmkdir mathms\ncd mathms\nnpm init\nnpm i seneca -S\n```\n\n### Seneca 'Math' plugin\n\nFile `mathms/MathPlugin.js`:\n\n```javascript\nmodule.exports = function MathPlugin(options) {\n    this.add('role:math,cmd:sum', sum);\n    this.add('role:math,cmd:product', product);\n\n    // middleware for 'role:math,*' pins, that prepares values and calls actions themselves\n    this.wrap('role:math', function (msg, respond) {\n        msg.left = Number(msg.left).valueOf();\n        msg.right = Number(msg.right).valueOf();\n\n        // execute previously matched action\n        this.prior(msg, respond);\n    });\n\n    function sum(msg, respond) {\n        respond(null, {answer: msg.left + msg.right});\n    }\n\n    function product(msg, respond) {\n        respond(null, {answer: msg.left * msg.right});\n    }\n};\n```\n\n### Seneca 'Math' microservice\n\nFile `mathms/MathMS.js`:\n\n```javascript\nrequire('seneca')()\n    .use('MathPlugin') // equal to .use(require('./MathPlugin'))\n    .listen({\n        type: 'tcp', // communicate via TCP\n        pin: 'role:math' // listen only this pin pattern\n    });\n```\n\n### Running the microservice\n\nRun our `mathms/MathMS.js` with the following command:\n```bash\nnode MathMS\n```\n\nSample output looks like to this:\n\n```\n2016-04-26T08:21:53.579Z iqpuwz8vca8t/1461658913554/2348/- INFO hello   Seneca/2.0.1/iqpuwz8vca8t/1461658913554/2348/-\n2016-04-26T08:21:54.924Z iqpuwz8vca8t/1461658913554/2348/- INFO listen  {type:tcp,pin:role:math}\n```\n\n## Express application implementation\n\n### Installing application dependencies\n\n```bash\nmkdir myapp\ncd myapp\nnpm init\nnpm i express body-parser seneca -S\n```\n\n### Seneca 'MathAPI' plugin\n\nFile `myapp/MathAPI.js`:\n```javascript\nmodule.exports = function MathAPI(options) {\n\n    // valid operations list\n    var valid_ops = {sum: 'sum', product: 'product'};\n\n    this.add('role:api,path:calculate', function (msg, respond) {\n        // talking to the microservice\n        this.act('role:math', {\n            cmd: valid_ops[msg.operation],\n            left: msg.left,\n            right: msg.right\n        }, respond);\n    });\n\n    // plugin initialization\n    this.add('init:MathAPI', function (msg, respond) {\n        // http://localhost:3000/api/calculate/sum?left=2&right=3\n        //                       ^      ^       ^   ^-------^\n        //                  prefix action operation arguments\n        this.act('role:web', {\n            use: {\n                prefix: '/api',\n                pin: 'role:api,path:*',\n                map: {\n                    calculate: {GET: true, suffix: '/:operation'}\n                }\n            }\n        }, respond);\n    });\n};\n```\n\n### Express application\n\nFile `myapp/server.js`:\n\n```javascript\nvar seneca = require('seneca')()\n    .use('MathAPI') // equal to .use(require('./MathAPI'))\n    .client({type: 'tcp', pin: 'role:math'});\n\nvar app = require('express')()\n    .use(require('body-parser').json())\n    .use(seneca.export('web'))\n    .listen(3000);\n```\n\n### Running the express application\n\n```bash\nnode server.js\n```\n\nSample output looks like to this:\n\n```\n2016-04-26T08:24:40.571Z obe5f3hoxbu4/1461659080545/7820/- INFO hello   Seneca/2.0.1/obe5f3hoxbu4/1461659080545/7820/-\n2016-04-26T08:24:40.944Z obe5f3hoxbu4/1461659080545/7820/- INFO client  {type:tcp,pin:role:math}\n```\n\n### Testing express application\n\nSend GET requests to the following URLs or open them in a web browser:\n* `http://localhost:3000/api/calculate/sum?left=2&right=3` outputs `{answer: 5}`\n* `http://localhost:3000/api/calculate/product?left=2&right=3` outputs `{answer: 6}`\n\n## Resources\n* [Seneca](http://senecajs.org/)\n* [Seneca Web Server Integration example](http://senecajs.org/get-started/#web-server-integration)\n* [Express](http://expressjs.com/)"
  },
  {
    "html_url": "https://gist.github.com/30fe9558b5dff6558a91a5d46b6abd00",
    "description": "Examples of using readline module",
    "files": [
      "https://gist.githubusercontent.com/umidjons/30fe9558b5dff6558a91a5d46b6abd00/raw/6375fe3f0f47206de37374e98856fedd91b5bbe5/readline-example.md"
    ],
    "content": "Dummy examples for using `readline` module\n===\n\nIteratively accept data from a user until one of the `exit|close|quit|bye` \ncommand reaches.\n\nFile `example1.js`:\n```javascript\nconst readline = require('readline');\n\nconst rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n});\n\nrl.setPrompt('task>');\n\n// show prompt\nrl.prompt();\n\nrl\n    .on('line', (line) => {\n        switch (line.trim()) {\n            case 'exit':\n            case 'quit':\n            case 'close':\n            case 'bye':\n                rl.close();\n                break;\n            default:\n                console.log('answer>', line.trim());\n                break;\n        }\n\n        // show prompt after each input\n        rl.prompt();\n    })\n    .on('close', () => {\n        console.log('Have a great day!');\n        process.exit(0);\n    });\n```\n\nSample output:\n```\n$ node example1.js\ntask>1\nanswer> 1\ntask>2\nanswer> 2\ntask>3\nanswer> 3\ntask>exit\nHave a great day!\n```"
  },
  {
    "html_url": "https://gist.github.com/c136e7d036af2d7fb8d012401d8d8187",
    "description": "Very dummy Express app and Mocha test for it",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c136e7d036af2d7fb8d012401d8d8187/raw/73ef6f4528e5170c42eded1656e22246e65dbc95/dummy-mocha-test.md"
    ],
    "content": "# Very dummy Express app and Mocha test for it\n\n```bash\nnpm init\nnpm i express -S\nnpm i mocha superagent expect.js --save-dev\n```\n\nFile `package.json`:\n```json\n{                         \n  \"name\": \"app1\",         \n  \"version\": \"1.0.0\",     \n  \"description\": \"\",      \n  \"main\": \"app.js\",       \n  \"scripts\": {            \n    \"test\": \"mocha tests\"  \n  },                      \n  \"author\": \"\",           \n  \"license\": \"ISC\",       \n  \"dependencies\": {       \n    \"express\": \"^4.13.4\"  \n  },                      \n  \"devDependencies\": {    \n    \"expect.js\": \"^0.3.1\",\n    \"mocha\": \"^2.4.5\",    \n    \"superagent\": \"^1.8.3\"\n  }                       \n}                         \n```\n\nFile `app.js`:\n```javascript\nvar http = require('http');\nvar express = require('express');\nvar app = express();\n\n// set application port\napp.set('port', 3000);\n\n// respond to all GET request with Hello World string\napp.get('*', function(req, res){\n  res.send('Hello World');\n});\n\n// create a server\nvar server = http.createServer(app);\n\n// implement necessary functions to run app as a module\n\nvar boot = function(){\n  server.listen(app.get('port'), function(){\n    console.log('Listening on port ' + app.get('port'));\n  });\n}\n\nvar shutdown = function(){\n  server.close();\n}\n\n// run an app as a standalone program or export it as a module\nif (require.main == module) {\n  boot();\n} else {\n  console.log('Running app as a module');\n  exports.boot = boot;\n  exports.shutdown = shutdown;\n  exports.port = app.get('port');\n}\n```\n\nFile `tests/index.js`:\n```javascript\nvar app = require('../app');\nvar superagent = require('superagent');\nvar expect = require('expect.js');\n\ndescribe('server', function(){\n\n  before(function(){\n    app.boot();\n  });\n\n  describe('homepage', function(){\n\n    it('should respond to GET', function(done){\n      superagent\n        .get('http://localhost:' + app.port)\n        .end(function(err, res){\n\t        expect(res.status).to.equal(200);\n\t        done();\n\t    });\n    });\n\n  });\n\n  after(function(){\n    app.shutdown();\n  });\n\n});\n\n```\n\nNow we can run test with:\n```bash\nmocha tests\n```\nor\n```bash\nnpm test\n```\n\n"
  },
  {
    "html_url": "https://gist.github.com/57e0f672106feab544f246cf705f3e4f",
    "description": "MEAN application example: step by step guide",
    "files": [
      "https://gist.githubusercontent.com/umidjons/57e0f672106feab544f246cf705f3e4f/raw/87958717f117d509fc23e365376e51d84640a7b1/mean-app-step-by-step.md"
    ],
    "content": "## Creating MEAN application: step by step guide\n\n### Table of Content\n\n* [Project structure](#project-structure)\n* [Installing prerequisites](#installing-prerequisites)\n* [Creating server](#creating-server)\n* [Render pages with Nunjucks](#render-pages-with-nunjucks)\n* [Middleware to render *.html requests with Nunjucks](#middleware-to-render-html-requests-with-nunjucks)\n* [Accept data from users](#accept-data-from-users)\n* [Work with MongoDB via Mongoose](#work-with-mongodb-via-mongoose)\n* [Create Patient model](#create-patient-model)\n* [Creating POST /patient route](#creating-post-patient-route)\n* [Creating GET /patient route](#creating-get-patient-route)\n* [Adjusting home page to list available operations](#adjusting-home-page-to-list-available-operations)\n* [Routers](#routers)\n* [Creating Patient router](#creating-patient-router)\n* [Using Patient router](#using-patient-router)\n* [Integrating AngularJS](#integrating-angularjs)\n* [Integrating $resource](#integrating-resource)\n* [Retrieving list of patients](#retrieving-list-of-patients)\n* [Create new patient](#create-new-patient)\n\n### Project structure\n\nCreate root folder for our application:\n```bash\nmkdir myapp\ncd myapp\n```\n\nCreate folder for models & routes:\n```bash\nmkdir models\nmkdir routes\n```\n\nCreate folder for frontend:\n```bash\nmkdir public\nmkdir public/lib\nmkdir public/src\nmkdir public/src/js\nmkdir public/src/css\nmkdir public/src/images\nmkdir public/views\n```\n\n### Installing prerequisites\n\nInitialize Node project and install necessary modules:\n```bash\nnpm init\nnpm i express nunjucks mongoose body-parser -S\n```\n\n### Creating server\n\nCreate `index.js` file.\n\n```js\nvar express = require('express');\nvar app = express();\n\napp.get('/', function (req, res) {\n    res.send('Hello World!');\n});\n\napp.listen(3000, function () {\n    console.log('Listening http://localhost:3000...');\n});\n```\n\nRun it on the console with `node index`.\nOn the console you should see text:\n```\nListening http://localhost:3000...\n```\n\nNavigate to the http://localhost:3000 on the browser.\nAs response you should see the text `Hello World!`.\n\n### Render pages with Nunjucks\n\nAdd `'use strict'` into beginning of the `index.js` to enable strict mode.\n\nInclude `nunjucks` to use template engine in views.\n```js\nvar nunjucks = require('nunjucks');\n```\n\nInclude built-in `path` module to work with paths:\n```js\nvar path = require('path');\n```\n\nSet views path to `public/views`:\n```js\nconst VIEW_PATH = path.join(__dirname, 'public', 'views');\n```\n\nConfigure nunjucks, bind it with our express app and set view engine to it:\n```js\n// configure Nunjucks templating\nnunjucks.configure(\n    VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n    {express: app} // tell nunjucks, that this is express app\n);\n\n// set view engine to custom extension - njk\napp.set('view engine', 'njk');\n```\n\nChange handler for root `/` to the following code:\n```js\napp.get('/', function (req, res) {\n    res.render('main', {myname: 'John Doe'});\n});\n```\n\nIn the above code we are rendering `main.njk` view with `myname='John Doe'`.\n\nCreate `public/views/main.njk` view with the following content:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application</title>\n</head>\n<body>\nHello, {{ myname }}!\n</body>\n</html>\n```\n\nRestart application and navigate to the home page in the browser: `http://localhost:3000/`.\n\nYou should see the text `Hello, John Doe!`.\n\n### Middleware to render *.html requests with Nunjucks\n\nCreate middleware to render all `*.html` requests with `*.njk` files:\n```js\napp.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n    // show original URL in the console\n    console.log('Original URL: %s', req.originalUrl);\n\n    // generate path to view\n    let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n    // replace *.html to *.njk\n    view_path = view_path.replace(/\\..+/, '.njk');\n\n    console.log('File to render: %s', view_path);\n\n    // render template\n    res.render(view_path);\n});\n```\n\nNow, if we navigate to the page `http://localhost:3000/patient.html`, then node will render the view `public/views/patient.njk` with `Nunjucks`.\n\n### Content of `index.js`\n\nNow our `index.js`:\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\n\nconst VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n// configure Nunjucks templating\nnunjucks.configure(\n    VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n    {express: app} // tell nunjucks, that this is express app\n);\n\n// set view engine to custom extension - njk\napp.set('view engine', 'njk');\n\n\napp.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n    // show original URL in the console\n    console.log('Original URL: %s', req.originalUrl);\n\n    // generate path to view\n    let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n    // replace *.html to *.njk\n    view_path = view_path.replace(/\\..+$/, '.njk');\n\n    console.log('File to render: %s', view_path);\n\n    // render template\n    res.render(view_path);\n});\n\n\napp.get('/', function (req, res) {\n    res.render('main', {myname: 'John Doe'});\n});\n\napp.listen(3000, function () {\n    console.log('Listening http://localhost:3000...');\n});\n```\n\n### Accept data from users\n\nInclude `body-parser` module into our application. It parses request body and makes them available via `req.body`.\n```js\nvar bodyParser = require('body-parser');\n\napp.use(bodyParser.urlencoded({extended: false}));\n```\n\nAlso change root route handler to the following:\n```js\napp.get('/', function (req, res) {\n    res.render('main');\n});\n```\n\nChange view `main.njk` to accept data from a user:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application</title>\n</head>\n<body>\n\n<form action=\"/patient/create\" method=\"post\">\n    <label>\n        First Name: <input type=\"text\" name=\"firstName\">\n    </label>\n    <label>\n        Last Name: <input type=\"text\" name=\"lastName\">\n    </label>\n    <button>Create New Patient</button>\n</form>\n\n</body>\n</html>\n```\n\nIt will send `POST` request to a route `/patient/create`, so let's create route handler for it:\n```js\napp.post('/patient/create', function (req, res) {\n    console.log('Request body:', req.body);\n    res.render('info', {message: 'Patient successfully created.', url: '/'});\n});\n```\n\nFor now, the handler shows parsed request body on the console, also renders a view `public/views/info.njk` with a given message and return URL. Let's create that view:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application | Info</title>\n</head>\n<body>\n\n<h3>Message</h3>\n\n<p>{{ message }}</p>\n\n<a href=\"{{ url }}\">Back</a>\n\n</body>\n</html>\n```\n\nRestart the application and navigate to the home page.\nEnter first and last names and submit the form.\nApplication will render info page with message and the URL to return.\n\n### Content of `index.js`\n\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\nvar bodyParser = require('body-parser');\n\nconst VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n// configure Nunjucks templating\nnunjucks.configure(\n    VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n    {express: app} // tell nunjucks, that this is express app\n);\n\n// set view engine to custom extension - njk\napp.set('view engine', 'njk');\n\napp.use(bodyParser.urlencoded({extended: false}));\n\napp.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n    // show original URL in the console\n    console.log('Original URL: %s', req.originalUrl);\n\n    // generate path to view\n    let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n    // replace *.html to *.njk\n    view_path = view_path.replace(/\\..+$/, '.njk');\n\n    console.log('File to render: %s', view_path);\n\n    // render template\n    res.render(view_path);\n});\n\n\napp.get('/', function (req, res) {\n    res.render('main');\n});\n\napp.post('/patient/create', function (req, res) {\n    console.log('Request body:', req.body);\n    res.render('info', {message: 'Patient successfully created.', url: '/'});\n});\n\napp.listen(3000, function () {\n    console.log('Listening http://localhost:3000...');\n});\n```\n\n### Work with MongoDB via Mongoose\n\n**NOTE: Make sure you have running MongoDB!**\n\nInclude `mongoose` into our application:\n```js\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost:27017/mydb');\nvar db = mongoose.connection;\n```\n\nMove all code into `open` event handler, it means our server will start after connection established to the DB:\n```js\ndb.once('open', function () {\n    const VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n    // configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {express: app} // tell nunjucks, that this is express app\n    );\n\n    // set view engine to custom extension - njk\n    app.set('view engine', 'njk');\n\n    app.use(bodyParser.urlencoded({extended: false}));\n\n    app.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+$/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    });\n\n\n    app.get('/', function (req, res) {\n        res.render('main');\n    });\n\n    app.listen(3000, function () {\n        console.log('Listening http://localhost:3000...');\n    });\n});\n```\n\n#### Create `Patient` model\n\nCreate `models/Patient.js` with the following content:\n```js\nvar mongoose = require('mongoose');\n\nvar PatientSchema = mongoose.Schema({\n    firstName: {type: String, required: true, maxlength: 50},\n    lastName: {type: String, required: true, maxlength: 50}\n});\n\nvar Patient = mongoose.model('Patient', PatientSchema);\n\nmodule.exports = Patient;\n```\n\nCreate `models/index.js` file with the following content:\n```js\nvar PatientModel = require('./Patient');\n//var UserModel = require('./User');\n\nmodule.exports.Patient = PatientModel;\n//module.exports.User = UserModel;\n```\n\nWe need `models/index.js` to include all models at once. In it we can list other models.\n\nInclude our models into `index.js` (our application entry point) file:\n```js\nvar models = require('./models');\n```\n\n#### Creating POST /patient route\n\nThis route will create new patient and save it into DB.\n\nRemove `/patient/create` route and create `post /patient` route with the following handler:\n```js\napp.post('/patient', function (req, res) {\n    console.log('Request body:', req.body);\n\n    // create model and fill fields from request body\n    let newPatient = new models.Patient(req.body);\n\n    // try to save patient\n    newPatient.save(function (err) {\n        // if there is error, show it and stop handler with return\n        if (err) {\n            return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n        }\n\n        // all right, show success message\n        res.render('info', {message: 'Patient successfully created.', url: '/'});\n    });\n});\n```\n\nAbove handler will try to save a patient and shows appropriate message (error or success).\n\nMove patient creation form into own view `public/views/create.njk`:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application | New Patient</title>\n</head>\n<body>\n\n<a href=\"/\">Back</a>\n\n<h3>New Patient</h3>\n\n<form action=\"/patient\" method=\"post\">\n    <label>\n        First Name: <input type=\"text\" name=\"firstName\">\n    </label>\n    <label>\n        Last Name: <input type=\"text\" name=\"lastName\">\n    </label>\n    <button>Create New Patient</button>\n</form>\n\n</body>\n</html>\n```\n\n#### Creating GET /patient route\n\nThis route will show list of existing patients.\n\nCreate new route with the following handler:\n```js\napp.get('/patient', function (req, res) {\n    models.Patient.find(function (err, patients) {\n        if (err) {\n            return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n        }\n\n        console.log('List of patients:', patients);\n        res.render('patients', {patients: patients});\n    });\n});\n```\n\nCreate new view for it `public/views/patients.njk`:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application | Patients</title>\n</head>\n<body>\n\n<a href=\"/\">Back</a>\n\n<h3>Patients</h3>\n\n<table>\n\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>First Name</th>\n        <th>Last Name</th>\n        <th></th>\n    </tr>\n    </thead>\n\n    <tbody>\n\n    {% for patient in patients %}\n\n        <tr>\n            <td>{{ loop.index }}</td>\n            <td>{{ patient.firstName }}</td>\n            <td>{{ patient.lastName }}</td>\n        </tr>\n\n    {% endfor %}\n\n    </tbody>\n\n</table>\n\n</body>\n</html>\n```\n\nHere we use [for/endfor](https://mozilla.github.io/nunjucks/templating.html#for) tag of Nunjucks.\n\n#### Adjusting home page to list available operations\n\nReplace the content of the `public/views/main.njk` with this:\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application</title>\n</head>\n<body>\n\n<ul>\n    <li><a href=\"/patient\">Patients</a></li>\n    <li><a href=\"/create.html\">New Patient</a></li>\n</ul>\n\n</body>\n</html>\n```\n\n#### Complete `index.js` content\n\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\nvar bodyParser = require('body-parser');\nvar mongoose = require('mongoose');\nvar models = require('./models');\n\nmongoose.connect('mongodb://localhost:27017/mydb');\nvar db = mongoose.connection;\n\ndb.once('open', function () {\n    const VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n    // configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {express: app} // tell nunjucks, that this is express app\n    );\n\n    // set view engine to custom extension - njk\n    app.set('view engine', 'njk');\n\n    app.use(bodyParser.urlencoded({extended: false}));\n\n    app.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+$/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    });\n\n\n    app.get('/', function (req, res) {\n        res.render('main');\n    });\n\n    app.get('/patient', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            console.log('List of patients:', patients);\n            res.render('patients', {patients: patients});\n        });\n    });\n\n    app.post('/patient', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, show it and stop handler with return\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            // all right, show success message\n            res.render('info', {message: 'Patient successfully created.', url: '/'});\n        });\n    });\n\n    app.listen(3000, function () {\n        console.log('Listening http://localhost:3000...');\n    });\n});\n```\n\n#### Checking new features\n\n* Restart the application.\n* Navigate to the home page in the browser.\n* Try to create new patient\n\t* Submit the form without filling fields, you should see error message;\n\t* Submit the form with correct data, you should see success message;\n* Navigate to Patients page, you should see list of existing patients\n\n### Routers\n\nIf we have `/patient` and `/user` routes keeping all route handlers in `index.js` is not the best practice.\nTo improve maintainability of our code base we will move group of routes into own router.\n\n#### Creating Patient router\n\nCreate `routes/Patient.js` file. Create router object and include our models too.\n```js\n'use strict';\n\nvar router = require('express').Router();\nvar models = require('../models');\n```\n\nMove `.get('/patient')` and `.post(/patient)` handlers into `routes/Patient.js`. Replace `app.` with `router.` and `/patient` with `/`. Also export router instance.\n```js\nrouter\n    .get('/', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            console.log('List of patients:', patients);\n            res.render('patients', {patients: patients});\n        });\n    })\n    .post('/', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, show it and stop handler with return\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            // all right, show success message\n            res.render('info', {message: 'Patient successfully created.', url: '/'});\n        });\n    });\n\nmodule.exports = router;\n```\n\nCreate `routes/index.js` with the following content:\n```js\nvar PatientRouter = require('./Patient');\n// var UserRouter = require('./user');\n\nmodule.exports.Patient = PatientRouter;\n// module.exports.User = UserRouter;\n```\nIt allows us to include all routers with one require statement.\n\nComplete `routes/Patient.js`:\n```js\n'use strict';\n\nvar router = require('express').Router();\nvar models = require('../models');\n\nrouter\n    .get('/', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            console.log('List of patients:', patients);\n            res.render('patients', {patients: patients});\n        });\n    })\n    .post('/', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, show it and stop handler with return\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            // all right, show success message\n            res.render('info', {message: 'Patient successfully created.', url: '/'});\n        });\n    });\n\nmodule.exports = router;\n```\n\n#### Using Patient router\n\nRemove including models from `index.js`\n```js\nvar models = require('./models'); // remove this line\n```\n\nInclude router into `index.js`\n```js\nvar routers = require('./routes');\n```\n\nReplace `app.get('/patient', ...)` and `app.post('/patient', ...)` with this line:\n```js\napp.use('/patient', routers.Patient);\n```\nIt means, use `routers.Patient` router for all routes starting with `/patient` URL.\nThat's why we replaced `/patient` to `/` in get/post router handlers.\n\n#### Complete `index.js`\n\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\nvar bodyParser = require('body-parser');\nvar mongoose = require('mongoose');\nvar routers = require('./routes');\n\nmongoose.connect('mongodb://localhost:27017/mydb');\nvar db = mongoose.connection;\n\ndb.once('open', function () {\n    const VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n    // configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {express: app} // tell nunjucks, that this is express app\n    );\n\n    // set view engine to custom extension - njk\n    app.set('view engine', 'njk');\n\n    app.use(bodyParser.urlencoded({extended: false}));\n\n    app.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+$/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    });\n\n\n    app.get('/', function (req, res) {\n        res.render('main');\n    });\n\n    app.use('/patient', routers.Patient);\n\n    app.listen(3000, function () {\n        console.log('Listening http://localhost:3000...');\n    });\n});\n```\n\n### Integrating AngularJS\n\nInitialize bower:\n```bash\nbower init\n```\n\nCreate `.bowerrc` file on root path with the following content:\n```json\n{\n  \"directory\": \"public/lib\"\n}\n```\n\nInstall necessary libraries:\n```bash\nbower install angularjs -S\nbower install angular-ui-router -S\nbower install angular-resource -S\n```\n\nIn `index.js` after `app.set('view engine', ...);` add following line:\n```js\napp.use('/assets', express.static(path.join(__dirname, 'public')));\n```\nIt will serve assets from `public` directory. For example, `/assets/js/angular.js` means download it from `/public/js/angular.js`.\n\nInclude libraries into `public/views/main.njk` just before the closing `</body>` tag:\n```html\n<script src=\"/assets/lib/angular/angular.min.js\"></script>\n<script src=\"/assets/lib/angular-ui-router/release/angular-ui-router.min.js\"></script>\n<script src=\"/assets/lib/angular-resource/angular-resource.min.js\"></script>\n</body>\n```\n\nCreate `public/src/js/app.js` with the following content:\n```js\nangular.module('MyApp', ['ngResource', 'ui-router'])\n    .controller('PatientCtrl', function ($scope) {\n    \n    });\n```\n\nThis is our angular application. In it we require `ngResource` and `ui-router` modules.\nInclude it in the `public/views/main.njk` too just before closing body tag.\n```html\n<script src=\"/assets/src/js/app.js\"></script>\n```\n\nConvert our main page into angular application putting `ng-app` directive into `<html>` tag:\n```html\n<html lang=\"en\" ng-app=\"MyApp\">\n```\n\nWe will change `public/views/main.njk` to show menu and container for views:\n```html\n<ul>\n    <li><a ui-sref=\"patientList\">Patients</a></li>\n    <li><a ui-sref=\"patientCreate\">New Patient</a></li>\n</ul>\n\n<ui-view/>\n```\n\nValues in the `ui-sref` attributes are states of UI Router.\n\n`<ui-view/>` is the container for our partial views. When states changed partials loads into that container.\n\nNow let's create/configure states in `public/src/js/app.js`:\n```js\nangular.module('MyApp', ['ngResource', 'ui.router'])\n    .config(function ($stateProvider, $urlRouterProvider) {\n        $stateProvider\n            .state('patientList', {\n                url: '/patient/list', // URL to show in the address bar\n                templateUrl: '/patients.html', // partial view to load into <ui-view/>\n                controller: 'PatientsCtrl' // controller to use in that partial view\n            })\n            .state('patientCreate', {\n                url: '/patient/create',\n                templateUrl: '/create.html',\n                controller: 'PatientCtrl'\n            });\n\n        // by default go to this address (patientList state)\n        $urlRouterProvider.otherwise('/patient/list');\n    })\n    .controller('PatientCtrl', function ($scope) {\n\n    })\n    .controller('PatientsCtrl', function ($scope) {\n\n    });\n```\n\nAs you know, our views `public/views/patients.njk` and `public/views/create.njk` are partials, not full HTML source, so we leave only necessary parts of them and delete unnecessary HTML tags.\n\nFile `public/views/patients.njk`:\n```html\n<h3>Patients</h3>\n\n<table>\n\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>First Name</th>\n        <th>Last Name</th>\n        <th></th>\n    </tr>\n    </thead>\n\n    <tbody>\n\n    {% for patient in patients %}\n\n        <tr>\n            <td>{{ loop.index }}</td>\n            <td>{{ patient.firstName }}</td>\n            <td>{{ patient.lastName }}</td>\n        </tr>\n\n    {% endfor %}\n\n    </tbody>\n\n</table>\n```\n\nFile `public/views/create.njk`:\n```html\n<h3>New Patient</h3>\n\n<form action=\"/patient\" method=\"post\">\n    <label>\n        First Name: <input type=\"text\" name=\"firstName\">\n    </label>\n    <label>\n        Last Name: <input type=\"text\" name=\"lastName\">\n    </label>\n    <button>Create New Patient</button>\n</form>\n```\n\nFile `public/views/main.njk`:\n```html\n<!doctype html>\n<html lang=\"en\" ng-app=\"MyApp\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>My Application</title>\n</head>\n<body>\n\n<ul>\n    <li><a ui-sref=\"patientList\">Patients</a></li>\n    <li><a ui-sref=\"patientCreate\">New Patient</a></li>\n</ul>\n\n<ui-view/>\n\n<script src=\"/assets/lib/angular/angular.min.js\"></script>\n<script src=\"/assets/lib/angular-ui-router/release/angular-ui-router.min.js\"></script>\n<script src=\"/assets/lib/angular-resource/angular-resource.min.js\"></script>\n<script src=\"/assets/src/js/app.js\"></script>\n</body>\n</html>\n```\n\n#### Content of `index.js`:\n\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\nvar bodyParser = require('body-parser');\nvar mongoose = require('mongoose');\nvar routers = require('./routes');\n\nmongoose.connect('mongodb://localhost:27017/mydb');\nvar db = mongoose.connection;\n\ndb.once('open', function () {\n    const VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n    // configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {express: app} // tell nunjucks, that this is express app\n    );\n\n    // set view engine to custom extension - njk\n    app.set('view engine', 'njk');\n\n    app.use('/assets', express.static(path.join(__dirname, 'public')));\n\n    app.use(bodyParser.urlencoded({extended: false}));\n\n    app.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+$/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    });\n\n\n    app.get('/', function (req, res) {\n        res.render('main');\n    });\n\n    app.use('/patient', routers.Patient);\n\n    app.listen(3000, function () {\n        console.log('Listening http://localhost:3000...');\n    });\n});\n```\n\n#### Check UI Router\n\nFor now you cannot create new patient. Also patients page does not show list of patients. But navigation should work. We will implement creating new patients and showing list of patients features later.\n\n* Restart the application, then navigate to `http://localhost:3000`.\nIn the address bar you should see the URL `http://localhost:3000/#/patient/list`, because our UI Router loads it by default. \n* Try to navigate by `Patients` and `New Patient` links.\nOn the page only URL on the address bar and container for our views should be changed. Navigation links should remain as is.\n\n### Integrating $resource\n\nAfter integrating `$resource` we will have following functions:\n* `Patient.query()` - to retrieve list of patients\n* `Patient.get()` - to retrieve one patient by `id`\n* `Patient.$save()` - to create new patient\n* `Patient.$update()` - to update existing patient by `id`\n* `Patient.$delete()` - to delete existing patient by `id`\n\n#### Retrieving list of patients\n\nCreate factory to work with Patient model in `public/src/js/app.js`:\n```js\nangular.module('MyApp', ['ngResource', 'ui.router'])\n    .config(function ($stateProvider, $urlRouterProvider) {\n        // ... doesn't changed ...\n    })\n    .factory('Patient', function ($resource) {\n        return $resource(\n            '/patient/:id', // URL to patient backend API\n            {id: '@_id'}, // obtain id from _id field of patient object\n            {\n                update: {\n                    method: 'PUT' // for .update() method use PUT request\n                }\n            }\n        );\n    })\n    .controller('PatientCtrl', function ($scope) {\n\n    })\n    .controller('PatientsCtrl', function ($scope, Patient) {\n        $scope.patients = Patient.query(); // get list of patients\n    });\n```\n\nChange `public/views/patients.njk`:\n```html\n<h3>Patients</h3>\n\n<table>\n\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>First Name</th>\n        <th>Last Name</th>\n        <th></th>\n    </tr>\n    </thead>\n\n    <tbody>\n\n    <tr ng-repeat=\"patient in patients\">\n        <td>{{ $index+1 }}</td>\n        <td>{{ patient.firstName }}</td>\n        <td>{{ patient.lastName }}</td>\n    </tr>\n\n    </tbody>\n\n</table>\n```\nWe removed `{%for/endfor%}` nunjucks tags.\nInstead used angular's `ng-repeat` tag.\n\nNunjucsk uses `{{ }}` tags to render values, Angular uses same syntax, so there is conflict.\nWe have to configure Nunjucks's tags to something else, for example, to `{{{ }}}`, change `nunjucks.configure(...)` in `index.js` to the following:\n```js\n// configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {\n            express: app, // tell nunjucks, that this is express app\n            tags: {\n                variableStart: '{{{',\n                variableEnd: '}}}'\n            }\n        }\n    );\n```\n\nAdd body parser for JSON format in `index.js` after `app.use(bodyParser.urlencoded({extended: false}));` call:\n```js\n    app.use(bodyParser.json());\n```\n\nChange `GET /` request handler in `routes/Patient.js` to response in JSON format, instead of rendering HTML page:\n```js\nrouter\n    .get('/', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.json({message: 'Error occured: ' + err.message});\n            }\n\n            console.log('List of patients:', patients);\n            res.json(patients);\n        });\n    })\n```\n\nRestart the application and test patients list page.\nIt should show the list of patients.\n\n#### Content of changed files\nFile `index.js`:\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\nvar bodyParser = require('body-parser');\nvar mongoose = require('mongoose');\nvar routers = require('./routes');\n\nmongoose.connect('mongodb://localhost:27017/mydb');\nvar db = mongoose.connection;\n\ndb.once('open', function () {\n    const VIEW_PATH = path.join(__dirname, 'public', 'views');\n\n    // configure Nunjucks templating\n    nunjucks.configure(\n        VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n        {\n            express: app, // tell nunjucks, that this is express app\n            tags: {\n                variableStart: '{{{',\n                variableEnd: '}}}'\n            }\n        }\n    );\n\n    // set view engine to custom extension - njk\n    app.set('view engine', 'njk');\n\n    app.use('/assets', express.static(path.join(__dirname, 'public')));\n\n    app.use(bodyParser.urlencoded({extended: false}));\n    app.use(bodyParser.json());\n\n    app.use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+$/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    });\n\n\n    app.get('/', function (req, res) {\n        res.render('main');\n    });\n\n    app.use('/patient', routers.Patient);\n\n    app.listen(3000, function () {\n        console.log('Listening http://localhost:3000...');\n    });\n});\n```\n\nFile `routes/Patient.js`:\n```js\n'use strict';\n\nvar router = require('express').Router();\nvar models = require('../models');\n\nrouter\n    .get('/', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.json({message: 'Error occured: ' + err.message});\n            }\n\n            console.log('List of patients:', patients);\n            res.json(patients);\n        });\n    })\n    .post('/', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, show it and stop handler with return\n            if (err) {\n                return res.render('info', {message: 'Error occured: ' + err.message, url: '/'});\n            }\n\n            // all right, show success message\n            res.render('info', {message: 'Patient successfully created.', url: '/'});\n        });\n    });\n\nmodule.exports = router;\n```\n\nFile `public/src/js/app.js`:\n```js\nangular.module('MyApp', ['ngResource', 'ui.router'])\n    .config(function ($stateProvider, $urlRouterProvider) {\n        $stateProvider\n            .state('patientList', {\n                url: '/patient/list', // URL to show in the address bar\n                templateUrl: '/patients.html', // partial view to load into <ui-view/>\n                controller: 'PatientsCtrl' // controller to use in that partial view\n            })\n            .state('patientCreate', {\n                url: '/patient/create',\n                templateUrl: '/create.html',\n                controller: 'PatientCtrl'\n            });\n\n        // by default go to this address (patientList state)\n        $urlRouterProvider.otherwise('/patient/list');\n    })\n    .factory('Patient', function ($resource) {\n        return $resource(\n            '/patient/:id', // URL to patient backend API\n            {id: '@_id'}, // obtain id from _id field of patient object\n            {\n                update: {\n                    method: 'PUT' // for .update() method use PUT request\n                }\n            }\n        );\n    })\n    .controller('PatientCtrl', function ($scope) {\n\n    })\n    .controller('PatientsCtrl', function ($scope, Patient) {\n        $scope.patients = Patient.query(); // get list of patients\n    });\n```\n\nFile `public/views/patients.njk`:\n```html\n<h3>Patients</h3>\n\n<table>\n\n    <thead>\n    <tr>\n        <th>#</th>\n        <th>First Name</th>\n        <th>Last Name</th>\n        <th></th>\n    </tr>\n    </thead>\n\n    <tbody>\n\n    <tr ng-repeat=\"patient in patients\">\n        <td>{{ $index+1 }}</td>\n        <td>{{ patient.firstName }}</td>\n        <td>{{ patient.lastName }}</td>\n    </tr>\n\n    </tbody>\n\n</table>\n```\n\n#### Create new patient\n\nTo actually create new patient we need to implement functionality in the `PatientCtrl` controller in `public/src/js/app.js`. Change `PatientCtrl` to the following:\n```js\nangular.module('MyApp', ['ngResource', 'ui.router'])\n// ...\n.controller('PatientCtrl', function ($scope, Patient, $state) {\n        $scope.patient = new Patient(); // create empty patient object\n\n        $scope.addPatient = function () {\n            // send ajax request to create new patient\n            $scope.patient.$save(function (resp) {\n                console.log('Save response:', resp);\n\n                // after save go to the patients list\n                $state.go('patientList');\n            });\n        }\n    })\n    // ...\n```\n\nWe inject `Patient` service into the controller to access its methods. We also inject `$state` provider to programmatically navigate between states. We use `$state.go('patientList')` to show Patients list page.\n\nWe will change our form in `public/views/create.njk` to angular form:\n```html\n<h3>New Patient</h3>\n\n<form name=\"formPatient\" novalidate>\n    <label>\n        First Name: <input type=\"text\" name=\"firstName\" ng-model=\"patient.firstName\" required>\n    </label>\n    <label>\n        Last Name: <input type=\"text\" name=\"lastName\" ng-model=\"patient.lastName\" required>\n    </label>\n    <button ng-click=\"addPatient()\" ng-disabled=\"formPatient.$invalid\">Create New Patient</button>\n</form>\n```\n\n`novalidate` attribute turn off HTML5 built in validations, AngularJS has own validations, so we don't need them. We also set `name` attribute of the form, then we can use it, for example, to enable/disable button according to the form state, if form is invalid (`formPatient.$invalid == true`), then we will disable `Create New Patient` button, if form is valid (`formPatient.$invalid == false`) then enable that button. To enable/disable the button we use `ng-disabled` attribute, if it is `true`, then button will be disabled, otherwise it will be enabled.\n\n`ng-model` attribute will bind input to the `$scope.patient` object's fields.\nAfter filling all fields with valid values button will be enabled and we can click it.\n`ng-click` will bind `$scope.addPatient()` function to the button.\n\nNow we should change our backend to respond with JSON, instead of HTML, so we have to use `res.json()` instead of `res.render()`. Open `routes/Patient.js` and change `POST /` handler to the following code:\n```js\nrouter\n\t// ...\n\t.post('/', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, send it and stop handler with return\n            if (err) {\n                return res.json({message: 'Error occured: ' + err.message});\n            }\n\n            // all right, show success message\n            res.json({message: 'Patient successfully created.'});\n        });\n    });\n```\n\nNow restart the app and try to create some new patients.\n\n#### Content of changed files\n\nFile `public/src/js/app.js`:\n```js\nangular.module('MyApp', ['ngResource', 'ui.router'])\n    .config(function ($stateProvider, $urlRouterProvider) {\n        $stateProvider\n            .state('patientList', {\n                url: '/patient/list', // URL to show in the address bar\n                templateUrl: '/patients.html', // partial view to load into <ui-view/>\n                controller: 'PatientsCtrl' // controller to use in that partial view\n            })\n            .state('patientCreate', {\n                url: '/patient/create',\n                templateUrl: '/create.html',\n                controller: 'PatientCtrl'\n            });\n\n        // by default go to this address (patientList state)\n        $urlRouterProvider.otherwise('/patient/list');\n    })\n    .factory('Patient', function ($resource) {\n        return $resource(\n            '/patient/:id', // URL to patient backend API\n            {id: '@_id'}, // obtain id from _id field of patient object\n            {\n                update: {\n                    method: 'PUT' // for .update() method use PUT request\n                }\n            }\n        );\n    })\n    .controller('PatientCtrl', function ($scope, Patient, $state) {\n        $scope.patient = new Patient(); // create empty patient object\n\n        $scope.addPatient = function () {\n            // send ajax request to create new patient\n            $scope.patient.$save(function (resp) {\n                console.log('Save response:', resp);\n\n                // after save go to the patients list\n                $state.go('patientList');\n            });\n        }\n    })\n    .controller('PatientsCtrl', function ($scope, Patient) {\n        $scope.patients = Patient.query(); // get list of patients\n    });\n```\n\nFile `public/views/create.njk`:\n```html\n<h3>New Patient</h3>\n\n<form name=\"formPatient\" novalidate>\n    <label>\n        First Name: <input type=\"text\" name=\"firstName\" ng-model=\"patient.firstName\" required>\n    </label>\n    <label>\n        Last Name: <input type=\"text\" name=\"lastName\" ng-model=\"patient.lastName\" required>\n    </label>\n    <button ng-click=\"addPatient()\" ng-disabled=\"formPatient.$invalid\">Create New Patient</button>\n</form>\n```\n\nFile `routes/Patient.js`:\n```js\n'use strict';\n\nvar router = require('express').Router();\nvar models = require('../models');\n\nrouter\n    .get('/', function (req, res) {\n        models.Patient.find(function (err, patients) {\n            if (err) {\n                return res.json({message: 'Error occured: ' + err.message});\n            }\n\n            console.log('List of patients:', patients);\n            res.json(patients);\n        });\n    })\n    .post('/', function (req, res) {\n        console.log('Request body:', req.body);\n\n        // create model and fill fields from request body\n        let newPatient = new models.Patient(req.body);\n\n        // try to save patient\n        newPatient.save(function (err) {\n            // if there is error, send it and stop handler with return\n            if (err) {\n                return res.json({message: 'Error occured: ' + err.message});\n            }\n\n            // all right, show success message\n            res.json({message: 'Patient successfully created.'});\n        });\n    });\n\nmodule.exports = router;\n```\n\n#### Updating existing patients\n\nComing soon...\n\n#### Deleting patient\n\nComing soon...\n\n#### Advanced validation in models\n\nComing soon...\n\n#### Toaster integration\n\nComing soon...\n\n#### Searching patients\n\nComing soon...\n\n#### User Authorization\nComing soon..."
  },
  {
    "html_url": "https://gist.github.com/059ff2cb135529dd3de847d0011071ef",
    "description": "ExpressJS application example using MongoDB via Mongoose",
    "files": [
      "https://gist.githubusercontent.com/umidjons/059ff2cb135529dd3de847d0011071ef/raw/21c9a4930bd015d0d410c9458163ad7ae312694c/expressjs-app-example-with-mongodb-mongoose.md"
    ],
    "content": "ExpressJS application example using MongoDB via Mongoose\n===\n\nCreate folders:\n```\nmkdir myapp\ncd myapp\n```\n\nInstall express, mongoose, body-parser modules:\n```\nnpm init\nnpm i express mongoose body-parser -S\n```\n\nCreate `index.js` file:\n```js\n// create application\nvar express = require('express');\nvar app = express();\n\n\n// connect to the mongodb via mongoose\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost:27017/test');\nvar db = mongoose.connection;\n\n\n// configure body parser\nvar bodyParser = require('body-parser');\napp.use(bodyParser.urlencoded({extended: false})); // accept data from forms\napp.use(bodyParser.json()); // accept data in json format\n\n\n// start application logic, when connection established to the DB\ndb.once('open', function () {\n\n    // create schema for Patient\n    var PatientSchema = mongoose.Schema(\n        {\n            firstName: {type: String, required: true, maxlength: 50},\n            lastName: {type: String, required: true, maxlength: 50},\n            middleName: {type: String, maxlength: 50},\n            address: {type: String, minlength: 10, maxlength: 500}\n        },\n        {\n            autoIndex: true, // disable auto index creation\n            minimize: false // do not remove empty fields\n        }\n    );\n\n    // create model from schema\n    var Patient = mongoose.model('Patient', PatientSchema);\n\n\n    // ------< routes >------\n\n    // root path\n    app.get('/', function (req, res) {\n        // find and return all patients\n        Patient.find(function (err, patients) {\n            // print found patients into the console\n            console.log('Found patients:', patients);\n\n            // return list of patients in JSON format\n            res.json(patients);\n        });\n    });\n\n    // create new patient\n    app.post('/create', function (req, res) {\n        var params = req.body;\n        console.log('Create new patient:', params);\n\n        // create model from received params\n        var newPatient = new Patient(params);\n\n        // try to save new patient\n        newPatient.save(function (err) {\n\n            if (err) {\n                console.log('Error occurred on creating new patient:', err);\n                return res.json({code: 1, error: err.message});\n            }\n\n            console.log('Success! Patient created');\n            res.json({code: 0, error: 'Patient created.'});\n        });\n    });\n\n    // ------< routes />------\n\n\n    // start application\n    app.listen(3000, function () {\n        console.log('Listening requests on http://localhost:3000');\n    });\n});\n```\n\nExample post request to create new patient\n```\nPOST /create HTTP/1.1\nHost: localhost:3000\nCache-Control: no-cache\nPostman-Token: 598337a5-f823-d6ce-b3c8-55901b241dd9\nContent-Type: application/x-www-form-urlencoded\n\nfirstName=John&lastName=Doe&middleName=Smith&address=USA%2C+New+York+city\n```"
  },
  {
    "html_url": "https://gist.github.com/278cd7ffc06903ba7abc",
    "description": "Using Nunjucks with Express without consolidate.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/278cd7ffc06903ba7abc/raw/af4d04c71dc35fcaf361b7415f7cf29de8c67265/nunjucks-express.md"
    ],
    "content": "Using Nunjucks with Express without consolidate\n===\n\nInstall necessary components:\n\n```bash\nnpm init\nnpm i express nunjucks -S\n```\n\nFile `index.js`:\n\n```js\n'use strict';\n\nvar express = require('express');\nvar app = express();\nvar nunjucks = require('nunjucks');\nvar path = require('path');\n\nconst VIEW_PATH = path.join(__dirname, 'views');\n\n// configure Nunjucks templating\nnunjucks.configure(\n    VIEW_PATH, // tell nunjucks, that all views are in views/ folder\n    {express: app} // tell nunjucks, that this is express app\n);\n\n// set view engine to custom extension - njk\napp.set('view engine', 'njk');\n\napp\n    .use('*.html', function (req, res) { // render all html files with Nunjucks\n\n        // show original URL in the console\n        console.log('Original URL: %s', req.originalUrl);\n\n        // generate path to view\n        let view_path = path.join(VIEW_PATH, req.originalUrl);\n\n        // replace *.html to *.njk\n        view_path = view_path.replace(/\\..+/, '.njk');\n\n        console.log('File to render: %s', view_path);\n\n        // render template\n        res.render(view_path);\n    })\n    .get('/', function (req, res) {\n        // for home page just show this HTML\n        res.send('<h1>Home Page</h1>');\n    })\n    .get('/patient/:id?', function (req, res) {\n        // generate path to the specific view\n        let view_path = path.join(VIEW_PATH, 'patient.njk');\n\n        // pass id parameter to the view as patient_id variable\n        res.render(view_path, {patient_id: req.params.id});\n    })\n    .listen(3003);\n```\n\nFile `views/patient.njk`:\n\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Patient Page</title>\n</head>\n<body>\n<h1>Patient Page</h1>\n\n{% if patient_id %}\n    <h4>Patient ID: {{ patient_id }}</h4>\n{% else %}\n    <h4>Patient ID not specified</h4>\n{% endif %}\n\n</body>\n</html>\n```\n\nRun application:\n\n```bash\nnode index\n```\n\nOn browser try to access following URLs:\n```\n* http://localhost:3003/\n* http://localhost:3003/patient\n* http://localhost:3003/patient/123\n* http://localhost:3003/patient.html\n```"
  },
  {
    "html_url": "https://gist.github.com/ca5cf06d37c1e303e539",
    "description": "Git Tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ca5cf06d37c1e303e539/raw/6ab7360ddb3e9da4b86d6c6ed248d528c66294e9/git-tips.md"
    ],
    "content": "Cancel last commit and leave files and index\n====\n\n```bash\ngit reset --soft HEAD~1\n```"
  },
  {
    "html_url": "https://gist.github.com/83763cff52cdeb8d4427",
    "description": "Command Line Arguments example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/83763cff52cdeb8d4427/raw/2428d876703f46c4380927f701de4f4f845707eb/command-line-args-nodejs.md"
    ],
    "content": "Command Line Arguments example\n===\n\n```bash\nnpm init\nnpm install --save mongodb command-line-args\n```\n\nFile `app.js`:\n\n```javascript\nvar MongoClient=require('mongodb').MongoClient;\nvar commandLineArgs=require('command-line-args');\nvar assert=require('assert');\n\nvar options=commandLineOptions();\n\nMongoClient.connect('mongodb://localhost:27017/crunchbase11',function(err,db){\n  assert.equal(err,null);\n  console.log('Connected to MongoDB');\n\n  var query=queryDocument(options);\n  var projection={_id:0,name:1,founded_year:1,number_of_employees:1,crunchbase_url:1};\n\n  var cursor=db.collection('companies').find(query,projection);\n  var numMatches=0;\n\n  cursor.forEach(\n    function(doc){\n      console.log(doc);\n      ++numMatches;\n    },\n    function(err){\n      assert.equal(err,null);\n      console.log('Our query was:',JSON.stringify(query));\n      console.log('Matching documents:',numMatches);\n      return db.close();\n    }\n  );\n});\n\nfunction commandLineOptions(){\n  var cli=commandLineArgs([\n        {name:'firstYear',alias:'f',type:Number},\n        {name:'lastYear',alias:'l',type:Number},\n        {name:'employees',alias:'e',type:Number}\n      ]);\n\n  var options=cli.parse();\n\n  if(!(('firstYear' in options) && ('lastYear' in options))){\n    console.log(cli.getUsage({\n      title:'Usage',\n      description:'The two options below are required. The rest are optional'\n    }));\n    process.exit();\n  }\n\n  return options;\n}\n\nfunction queryDocument(options){\n  console.log(options);\n\n  var query={\n    founded_year:{\n      '$gte':options.firstYear,\n      '$lte':options.lastYear\n    }\n  };\n\n  if('employees' in options)\n    query.number_of_employees={'$gte':options.employees};\n\n  return query;\n}\n```\n\nRunning\n====\n\nWithout options specified\n\n```bash\n> node app\n\nUsage\n\n  The two options below are required. The rest are optional\n\nOptions\n\n  -f, --firstYear number\n  -l, --lastYear number\n  -e, --employees number\n```\n\nWith first and last year\n\n```bash\n> node app -f 2004 -l 2008\n...\n{ name: 'Eazeeloans',\n  crunchbase_url: 'http://www.crunchbase.com/company/eazeeloans',\n  number_of_employees: 25,\n  founded_year: 2006 }\n{ name: 'cotralis',\n  crunchbase_url: 'http://www.crunchbase.com/company/cotralis',\n  number_of_employees: 1,\n  founded_year: 2008 }\n{ name: 'Axon Solutions',\n  crunchbase_url: 'http://www.crunchbase.com/company/axon-solutions',\n  number_of_employees: null,\n  founded_year: 2004 }\nOur query was: {\"founded_year\":{\"$gte\":2004,\"$lte\":2008}}\nMatching documents: 7888\n```\n\nWith first, last years and employees count\n\n```bash\n> node app -f 2004 -l 2008 -e 100\n...\n{ name: 'Swiftprosys',\n  crunchbase_url: 'http://www.crunchbase.com/company/swiftprosys',\n  number_of_employees: 180,\n  founded_year: 2005 }\n{ name: 'G5 Entertainment',\n  crunchbase_url: 'http://www.crunchbase.com/company/g5-entertainment',\n  number_of_employees: 107,\n  founded_year: 2006 }\n{ name: 'NextLabs',\n  crunchbase_url: 'http://www.crunchbase.com/company/nextlabs',\n  number_of_employees: 100,\n  founded_year: 2004 }\nOur query was: {\"founded_year\":{\"$gte\":2004,\"$lte\":2008},\"number_of_employees\":{\"$gte\":100}}\nMatching documents: 333\n```"
  },
  {
    "html_url": "https://gist.github.com/1617cf046d0cc27296ec",
    "description": "Curvor vs toArray(). mongoimport example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1617cf046d0cc27296ec/raw/3e8f172a31e289c9cb901c00babc3fb410c9faac/cursor-vs-toarray-mongoimport.md"
    ],
    "content": "Curvor vs toArray(). mongoimport example\n===\n\nImport data in JSON format into database\n```bash\nmongoimport -d mydb -c mycollection objects.json\n```\n\nCheck imported data\n```bash\n# mongo\n> use mydb\n> db.mycollection.find().count()\n> db.mycollection.findOne()\n> exit\n```\n\nExample application\n```bash\nnpm init\nnpm install --save mongodb\n```\n\nRetrieving data from imported collection\n====\n\nNOT EFFICIENT WAY: `toArray(callback)` retrieves all documents from collection, then executes callback.\n\n```javascript\nvar MongoClient=require('mongodb').MongoClient,\n    assert=require('assert');\n\nMongoClient.connect('mongodb://localhost:27017/mydb',function(err,db){\n  assert.equal(err,null);\n  console.log('Successfully connected to MongoDB');\n\n  var query={some_field:'some value'};\n\n  db.collection('mycollection').find(query).toArray(function(err,docs){\n    assert.equal(err,null);\n    assert.notEqual(docs.length,0);\n\n    docs.forEach(function(doc){\n      console.log(doc.some_field+\"-\"+doc.some_other_field);\n    });\n\n    db.close();\n  });\n});\n```\n\nEFFICIENT WAY: retrieving data started on `cursor.forEach(callback,errhandler)` call and documents streamed to the callback (does not wait until all documents returned).\n\n```javascript\nvar MongoClient=require('mongodb').MongoClient,\n    assert=require('assert');\n\nMongoClient.connect('mongodb://localhost:27017/mydb',function(err,db){\n  assert.equal(err,null);\n  console.log('Successfully connected to MongoDB');\n\n  var query={some_field:'some value'};\n\n  var cursor=db.collection('mycollection').find(query);\n\n  cursor.forEach(\n      function(doc){\n        console.log(doc.some_field+\"-\"+doc.some_other_field);\n      },\n      function(err){\n        assert.equal(err,null);\n        return db.close();\n      }\n    );\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/960cc251b33cbb52a30c",
    "description": "Using third party API with superagent (HTTP(S) requests) module example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/960cc251b33cbb52a30c/raw/3010463e467986a5c275de9fc3d9bb358ff2aaf6/superagent-http-requests-expressjs-nodejs.md"
    ],
    "content": "Using third party API with superagent (HTTP(S) requests) module example\n===\n\n```bash\nnpm init\nnpm install --save express superagent\n```\n\nFile `service.js` simulates our third party API\n```javascript\nvar express=require('express');\nvar app=express();\n\napp.get('/date',function(req,res){\n  res.send({date_:new Date()});\n});\n\napp.listen(3001,function(){\n  console.info('Listening for incoming requests on http://localhost:3001');\n});\n```\n\nFile `index.js`\n```javascript\nvar express=require('express');\nvar app=express();\nvar superagent=require('superagent');\n\napp.get('/',function(req,res){\n  superagent\n  .get('http://localhost:3001/date')\n  .end(function(err,data){\n    console.log('Response:',data.body);\n    res.send(data.body.date_);\n  });\n});\n\napp.listen(3000,function(){\n  console.info('Running on http://localhost:3000');\n});\n```\n\nRun `service.js`, then `index.js`\n```bash\nnode service\n```\n\nIn another terminal\n```bash\nnode index\n```\n\nAccess home page `http://localhost:3000`.\nWe should see current date and time."
  },
  {
    "html_url": "https://gist.github.com/083e8ed4c1ca54555828",
    "description": "Handling Error with Domain",
    "files": [
      "https://gist.githubusercontent.com/umidjons/083e8ed4c1ca54555828/raw/219d88db62d7c408f1fc27f4f44f85c4a1cc8e51/handling-error-with-domain-nodejs.md"
    ],
    "content": "Handling error with domain\n===\n\nFile `app.js`\n```javascript\nvar domain=require('domain');\n\n// create domain and listen for errors\nvar d=domain.create();\nd.on('error',function(e){\n  console.log('Custom Error:',e);\n});\n\nd.run(function(){\n  // run error prone code here\n  setTimeout(function(){\n    throw new Error('Fail');\n  },Math.round()*100);\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/a1300e542e3011d1ad57",
    "description": "Socket.io example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a1300e542e3011d1ad57/raw/e6b2af49989e5334ea99c264c68e736bde200fb0/socket.io-example-expressjs-nodejs.md"
    ],
    "content": "Socket.io example\n===\n\n```bash\nnpm init\nnpm install --save express body-parser socket.io morgan consolidate nunjucks\nmkdir -p public/views\n```\n\nFile `app.js`\n```javascript\nvar express=require('express'),\n    app=express(),\n    consolidate=require('consolidate'),\n    logger=require('morgan'),\n    path=require('path'),\n    bodyParser=require('body-parser'),\n    socketIO=require('socket.io'),\n    http=require('http');\n\n// configure template engine\napp.engine('html',consolidate.nunjucks);\napp.set('view engine','html');\napp.set('views',path.join(__dirname,'public','views'));\n\napp.use(logger('dev'));\napp.use(express.static(path.join(__dirname,'public')));\napp.use(bodyParser.urlencoded({extended:false}));\n\napp.get('/',function(req,res){\n  res.render('index');\n});\n\nvar server=http.createServer(app);\nvar io=socketIO.listen(server);\nio.sockets.on('connection',function(socket){\n  \n  // listen test1 event from client\n  socket.on('test1',function(data){\n    console.log('Received ',data);\n    \n    // trigger test2 event to client\n    socket.emit('test2', data.time+' from server');\n  });\n});\n\nserver.listen(3000,function(){\n  console.log('Listening on http://localhost:3000');\n});\n```\n\nFile `public\\views\\index.html`\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Socket.io example</title>\n</head>\n<body>\n  <h1>Socket.io example</h1>\n  \n  <p>Here we sending <em>test1</em> event to the server and listening for <em>test2</em> event from the server.</p>\n  \n  <button onclick=\"sendTest1()\">Emit 'test1'</button>\n  \n  Received Message: <pre id=\"received-message\">(empty)</pre>\n\n  <script src=\"/socket.io/socket.io.js\"></script>\n  <script>\n    var socket=io.connect('http://localhost:3000');\n    \n    // listen for 'test2'\n    socket.on('test2',function(data){\n      console.log('received %s',data);\n      document.querySelector('#received-message').innerText=data;\n    });\n\n    var sendTest1=function(){\n      var data=new Date();\n      // emit 'test1'\n      socket.emit('test1',{time:data});\n    }\n  </script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/635d28916e223e3cd7ba",
    "description": "HTTP Security Headers with Helmet module in Express.js application.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/635d28916e223e3cd7ba/raw/c6bee8b46b9be4356b62ffd4e41748e6e2a3f68f/http-security-headers-helmet-expressjs.md"
    ],
    "content": "HTTP Security Headers with Helmet module in Express.js application\n===\n\n```bash\nnpm init\nnpm install --save express helmet\nvim app.js\n```\n\n`app.js` file:\n```javascript\nvar express=require('express'),\n    app=express(),\n    helmet=require('helmet');\n\napp.use(helmet());\n\napp.get('*',function(req,res){\n  res.send('hello world');\n});\n\napp.listen(3000);\n```\n\nAdded headers:\n```\nX-Content-Type-Options:nosniff\nX-Download-Options:noopen\nX-Frame-Options:SAMEORIGIN\nX-XSS-Protection:1; mode=block\n```\nIt also removes `X-Powered-By` header."
  },
  {
    "html_url": "https://gist.github.com/c9f3e51fed6d183e89a2",
    "description": "CSRF Preventing example in Express.js",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c9f3e51fed6d183e89a2/raw/92eade63287c6454354172868196948341e544e3/csrf-expressjs.md"
    ],
    "content": "CSRF Preventing example in Express.js\n===\n\n```bash\nnpm init\nnpm install --save express csurf cookie-parser body-parser consolidate nunjucks\nmkdir -p public/views\nvim app.js\n```\n\nFile `app.js`:\n```javascript\nvar express=require('express');\nvar app=express();\nvar cookieParser=require('cookie-parser');\nvar bodyParser=require('body-parser');\nvar csrf=require('csurf');\nvar consolidate=require('consolidate');\nvar path=require('path');\n\n// configure template engine\napp.engine('html',consolidate.nunjucks);\napp.set('view engine','html');\napp.set('views',path.join(__dirname,'public','views'));\n\n// configure middlewares\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname,'public','views')));\napp.use(bodyParser.urlencoded({extended:false}));\napp.use(csrf({cookie:true}));\n\n// routes\napp\n.get('/form',function(req,res){\n  res.render('send',{ csrfToken: req.csrfToken() }); // render send.html with csrfToken\n})\n.post('/process',function(req,res){\n  console.log('Request Body:',req.body);\n  res.send('Data is being processed.');\n})\n.listen(3000);\n```\n\nFile `public/views/send.html`:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>CSRF Example</title>\n</head>\n<body>\n  <form action=\"/process\" method=\"POST\">\n    <input type=\"hidden\" name=\"_csrf\" value=\"{{csrfToken}}\">\n    Favorite Color: <input type=\"text\" name=\"favoriteColor\">\n    <button>Submit</button>\n  </form>\n</body>\n</html>\n```\n\nRun:\n```bash\nnode app.js\n```\n\nIn browser open `http://localhost:3000/form` and submit form.\n\nConsole output at server:\n```\nRequest Body: { _csrf: 'iv5QqjGY-tZz3PuJejXeb4I5C4nDN_uXVjpY',\n  favoriteColor: 'Yellow' }\n```"
  },
  {
    "html_url": "https://gist.github.com/47fb4e063957e181daea",
    "description": "Less Middleware, Nunjucks example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/47fb4e063957e181daea/raw/165b9b05d13645d49cb7371d8e9d40b905b77f5f/less-middleware-nunjucks-express.md"
    ],
    "content": "Less Middleware, Nunjucks example\n===\n\n```bash\nnpm init\nnpm install --save express consolidate nunjucks less-middleware\nmkdir -p public/css\nmkdir -p public/views\n```\n\nFile `app.js`:\n```javascript\nvar express=require('express'),\n    app=express(),\n    path=require('path'),\n    less=require('less-middleware'),\n    consolidate=require('consolidate');\n\n// configure Less & static assets/views\napp.use(less(path.join(__dirname,'public')))\n  .use(express.static(path.join(__dirname,'public')));\n\n// configure view engine to Nunjucks\napp.engine('html',consolidate.nunjucks);\napp.set('view engine','html');\napp.set('views',path.join(__dirname,'public','views'));\n\n// routes\napp.get('/',function(req,res){\n  res.render('main');\n});\n\napp.listen(3000);\n```\n\nFile `public\\css\\styles.less`:\n```less\n// Variables\n@bgColor: #cccccc;\n@titleBgColor: #000;\n@textColor: red;\n\n// common styles\nbody{\n  background-color: @bgColor\n}\n\nh1{\n  color: @textColor;\n  background-color: @titleBgColor;\n}\n```\n\nFile `public\\views\\main.html`:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <link rel=\"stylesheet\" href=\"css/styles.css\">\n  <title>Test</title>\n</head>\n<body>\n  <h1>Hello World</h1>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/a7b26af9651df282ae51",
    "description": "Nunjucks template engine, Consolidate, Stylus middleware example in Express.js",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a7b26af9651df282ae51/raw/282b3f56553ee09bf6fac791026fd8185b624078/nunjucks-consolidate-stylus-expressjs.md"
    ],
    "content": "Nunjucks template engine, Consolidate, Stylus middleware example in Express.js\n===\n\n```bash\nnpm init\nnpm install --save express stylus consolidate nunjucks\nmkdir public\nmkdir public\\css\nmkdir public\\views\n```\n\nFile: `app.js`\n```javascript\nvar express=require('express'),\n    app=express(),\n    stylus=require('stylus'),\n    path=require('path'),\n    consolidate=require('consolidate');\n\napp.use(stylus.middleware(path.join(__dirname,'public','css')));\napp.use(express.static(path.join(__dirname,'public')));\n\napp.engine('html',consolidate.nunjucks);\napp.set('view engine','html');\napp.set('views',path.join(__dirname,'public','views'));\n\napp.get('*',function(req,res){\n  res.render('main');\n});\n\napp.listen(3000);\n```\n\nFile `public\\css\\styles.styl`:\n```stylus\nbody\n  background grey\n\nh1\n  color lime\n  background black\n```\n\nFile `public\\views\\main.html`:\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <link rel=\"stylesheet\" href=\"css/styles.css\">\n  <title>Test Page</title>\n</head>\n<body>\n  <h1>Hello World</h1>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/a9a522d13f702f9d7a6d",
    "description": "Cluster example in Express.js",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a9a522d13f702f9d7a6d/raw/959852c54ecc960277c320783719c9a9710a870f/express-cluster.md"
    ],
    "content": "Cluster example in Express.js\n===\n\nCreate Express.js app & install necessary modules:\n\n```bash\nnpm init\nnpm install --save express cluster\nvim app.js\n```\n\n`app.js` file content:\n\n```javascript\nvar cluster=require('cluster'),\n    numCpus=require('os').cpus().length,\n    express=require('express');\n\nif(cluster.isMaster){\n  console.log('Fork %s worker(s) from master', numCpus);\n  \n  for(var i=0; i<numCpus; i++)\n    cluster.fork();\n\n  cluster.on('online',function(worker){\n    console.log('Worker is running on %s pid', worker.process.pid);\n  });\n\n  cluster.on('exit',function(worker,code,signal){\n    console.log('Worker with %s is closed', worker.process.id);\n  });\n} else if(cluster.isWorker){\n  // our express.js app\n  var port=3000;\n  console.log('Worker (%s) is now listening to http://localhost:%s', cluster.worker.process.pid, port);\n\n  var app=express();\n  app.get('*',function(req,res){\n    res.status(200).send('cluster '+cluster.worker.process.pid+' responded\\n');\n  });\n  app.listen(port);\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/5fe798cbf14a1e9cccd3",
    "description": "Настройка MongoDB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5fe798cbf14a1e9cccd3/raw/3e612a3817a117c8fca79c3d89f40941f0707ba8/configure-mongodb.md"
    ],
    "content": "Настройка MongoDB\n===\n\nПуть установки `d:\\shopper\\mongodb`\n\nУстановить переменные системы\n===\n1. `Win + R`, наберем `control`, нажимаем `ENTER`\n2. В открывшемся окне в строке Поиск набрать `\"систем\"`\n3. В результатах поиска выбрать пункт `\"Изменение системных переменных среды\"`\n4. В path для системы добавить путь `d:\\shopper\\mongodb\\bin`\n5. Ok, Ok, Ok...\n\nЗапуск `cmd` от имени администратора\n===\n1. нажать кнопку Win\n2. набрать `cmd.exe` и нажать `CTRL + SHIFT + ENTER`\n\nКонфигурационный файл `mongod.cfg`\n===\n\n`engine` по умолчанию `WiredTiger`. В новых версиях x64 Windows работает нормально.\n\n```\nsystemLog:\n    destination: file\n    path: d:\\shopper\\mongodb\\log\\mongod.log\nstorage:\n    engine: mmapv1\n    dbPath: d:\\shopper\\mongodb\\data\n```\n\nУстановить MongoDB как службу\n===\n```\nd:\\SHOPPER\\mongodb\\bin\\mongod.exe --config d:\\SHOPPER\\mongodb\\bin\\mongod.cfg --install --serviceName MongoDB --serviceDisplayName MongoDB\n```\n\nЗапустить/остановить службу\n===\n```\nnet start MongoDB\nnet stop MongoDB\n```\n\nУдалить службу\n===\n```\nsc delete MongoDB\n```"
  },
  {
    "html_url": "https://gist.github.com/2e5f2793e2d90e9f0674",
    "description": "Using Redis as session store",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2e5f2793e2d90e9f0674/raw/f4cd0deb79d682de99cb9bd44558881d37ed99ec/redis-as-session-store.md"
    ],
    "content": "Using Redis as session store\n===\n\nInstall & run `Redis`. Default host & port: `localhost:6379`.\n\nInstall necessary packages:\n```bash\nnpm init\nnpm install --save express cookie-parser express-session connect-redis\n```\n\n```javascript\nvar express=require('express');\nvar app=express();\nvar cookieParser=require('cookie-parser');\nvar session=require('express-session');\nvar RedisStore=require('connect-redis')(session);\n\napp.use(cookieParser());\n\napp.use(session({\n  resave:true,\n  saveUninitialized:true,\n  store:new RedisStore({host:'localhost',port:6379}),\n  secret:'HELLO-WORLD',\n  cookie:{path:'/',maxAge:3600000}\n}));\n\napp.get('/',function(req,res){\n  console.log('Session ID:',req.sessionID);\n\n  if(!req.session.counter) \n    req.session.counter=0;\n\n  req.session.counter++;\n\n  res.send('Counter:'+req.session.counter);\n});\n\napp.listen(3000);\n```\n\nChecking stored sessions:\n\nRun Redis CLI\n```bash\nredis-cli\n```\n\nList all session IDs\n```\nkeys sess*\n```\n\nOutput:\n```\n1) \"sess:NDsf6P6ZbY7qp9h7vn00zr_t5tYlIgkn\"\n2) \"sess:WTsf6P6ZbY7qp1m0vn00zr_t5tOwIpaQ\"\n```\n\nOr, if we know session ID\n```\nget sess:NDsf6P6ZbY7qp9h7vn00zr_t5tYlIgkn\n```\n\nOutput\n```\n\"{\\\"cookie\\\":{\\\"originalMaxAge\\\":3600000,\\\"expires\\\":\\\"2016-01-15T05:33:32.701Z\\\",\\\"httpOnly\\\":true,\\\"path\\\":\\\"/\\\"},\\\"counter\\\":4}\"\n```"
  },
  {
    "html_url": "https://gist.github.com/6b0f278f3c87f3b9f8cd",
    "description": "Compile MQL5 in console",
    "files": [
      "https://gist.githubusercontent.com/umidjons/6b0f278f3c87f3b9f8cd/raw/9661db8ddc7b8f7a579a65a9efe3e88b175a5d4f/compile-mql5.md"
    ],
    "content": "Compile MQL5 from console\n===\n\n```\n\"c:\\Program Files\\MetaTrader 5\\metaeditor64.exe\" /portable /compile:candlestick_patterns.mq5 /inc:candlesticktype.mqh /log:mql.log\n```"
  },
  {
    "html_url": "https://gist.github.com/5f772cb2fad891e66070",
    "description": "Пример получения исторических баров",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5f772cb2fad891e66070/raw/b2e505df500f5acc7479de4737d46cba09c7c2d3/copyrates-example.md"
    ],
    "content": "Пример получения исторических баров\n===\n\n```mql\nint OnStart()\n  {\n   MqlRates rates[];\n   ArraySetAsSeries(rates,true);\n\n   int copied=CopyRates(Symbol(),PERIOD_CURRENT,0,100,rates);\n   if(copied>0)\n     {\n      Print(\"Скопированы баров: \",copied);\n\n      string format=\"open=%G, high=%G, low=%G, close=%G, volume=%d\";\n      string out;\n      int size=fmin(copied,10);\n\n      for(int i=0;i<size;i++)\n        {\n         MqlRates r=rates[i];\n         out=i+\": \"+TimeToString(r.time);\n         out+=\" \"+StringFormat(format,r.open,r.high,r.low,r.close,r.tick_volume);\n         Print(out);\n        }\n     }\n   else\n      Print(\"Не удалось получить исторические данные по символу \",Symbol());\n   return(INIT_SUCCEEDED);\n  }\n```"
  },
  {
    "html_url": "https://gist.github.com/af10ea416c8e2e7359af",
    "description": "async.parallel() example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/af10ea416c8e2e7359af/raw/7f5973f7075e34503bf1d77f4d9220f4cd1d8ced/async-parallel-example.md"
    ],
    "content": "async.parallel() example\n===\n\n```js\nvar mongojs=require('mongojs');\nvar db=mongojs('mydb',['users','orders','products']);\nvar async=require('async');\n\nvar userHasActivity=function(user_id,cbk){\n  async.parallel(\n    {\n      orders:function(callback){\n        db.orders.count({userId:user_id},callback);\n      },\n      products:function(callback){\n        db.products.count({userId:user_id},callback);\n      }\n    },\n    function(err,results){\n      console.log(err,results); // err = null results = { orders: 140, products: 0 }\n      var act_count=results.orders+results.products;\n      cbk(err,act_count>0);\n    }\n  );\n}\n\n// usage example\nuserHasActivity(req.params.id,function(err,hasActivity){\n    // todo: some logic\n});\n```"
  },
  {
    "html_url": "https://gist.github.com/857013a6c8fbd1c99ada",
    "description": "Authenticate a Node.js API with JSON Web Tokens",
    "files": [
      "https://gist.githubusercontent.com/umidjons/857013a6c8fbd1c99ada/raw/0ff67d78e66b287d587a9ad239512c8cfc55636c/authenticate-nodejs-api-with-jsonwebtoken.md"
    ],
    "content": "Authenticate a Node.js API with JSON Web Tokens\n====\n\nOriginal article: https://scotch.io/tutorials/authenticate-a-node-js-api-with-json-web-tokens\n\nSet up AngularJS toaster (backend NodeJS app)\n====\n\n```bash\nmkdir au\ncd au\nvim package.json\n```\n\n`package.json` content:\n```json\n{\n\t\"name\":\"authapp\",\n\t\"main\":\"server.js\"\n}\n```\n\n```bash\nnpm install express body-parser morgan mongoose jsonwebtoken --save\n```\n\n```bash\nmkdir app\\models\nvim app\\models\\user.js\n```\n\n`user.js` content:\n```js\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\nmodule.exports = mongoose.model('User', new Schema({\n  name: String,\n  password: String,\n  admin: Boolean\n}));\n```\n\n`config.js` content:\n```js\nmodule.exports = {\n  secret: 'SomeSecretString',\n  database: 'mongodb://localhost:27017/au'\n};\n```\n\n```bash\nvim server.js\n```\n\n`server.js` content:\n```js\nvar express = require('express');\nvar app = express();\nvar bodyParser = require('body-parser');\nvar morgan = require('morgan');\nvar mongoose = require('mongoose');\nvar jwt = require('jsonwebtoken');\nvar config = require('./config');\nvar User = require('./app/models/user');\n\nvar port = process.env.PORT || 3000;\nmongoose.connect(config.database);\n\napp.set('superSecret',config.secret);\n\napp.use(bodyParser.urlencoded({extended:false}));\napp.use(bodyParser.json());\n\napp.use(morgan('dev'));\n\napp.get('/',function(req,res){\n  res.send('Hello! The api is at http://localhost:'+port+'/api');\n});\n\napp.get('/setup',function(req,res){\n  // create a sample user\n  var nick = new User({\n    name: 'John Doe',\n    password: '123',\n    admin: true\n  });\n\n  // save the user\n  nick.save(function(err){\n    if(err) throw err;\n\n    console.log('User saved successfully');\n    res.json({success: true});\n  });\n});\n\nvar apiRoutes = express.Router();\n\napiRoutes.post('/authenticate',function(req,res){\n  User.findOne({name: req.body.name}, function(err,user){\n    if(err) throw err;\n\n    if(!user){\n      res.json({success:false, message:'Authentication failed! User not found.'});\n    }\n    else if(user){\n      if(user.password != req.body.password){\n\t\tres.json({success:false,message:'Authentication failed! Invalid password.'});\n      } else {\n\t\tvar token = jwt.sign({name:user.name}, app.get('superSecret'),{ expiresInMinutes: 1440});\n\t\tres.json({\n\t\t  success: true,\n\t\t  message: 'Enjoy your token!',\n\t\t  token: token\n\t\t});\n      }\n    }\n  });\n});\n\napiRoutes.use(function(req,res,next){\n  var token = req.body.token || req.query.token || req.headers['x-access-token'];\n  if(token){\n    jwt.verify(token, app.get('superSecret'), function(err,decoded){\n      if(err){\n\t\treturn res.json({success:false, message:'Failed to authenticate token.'});\n      } else {\n\t\treq.decoded = decoded;\n\t\tnext();\n      }\n    });\n  } else {\n    return res.status(403).send({\n      success: false,\n      message: 'No token provided.'\n    });\n  }\n});\n\napiRoutes.get('/',function(req,res){\n  res.json({message: 'Welcome to the coolest API on earth!'});\n});\n\napiRoutes.get('/users',function(req,res){\n  User.find({},function(err,users){\n    res.json(users);\n  });\n});\n\napp.use('/api', apiRoutes);\n\napp.listen(port);\n\nconsole.log('Magic happens at http://localhost:'+port);\n```\n\nCreate user\n```\nhttp://localhost:3000/setup\n```\n\nAuthenticate a user:\n```\npost request http://localhost:3000/api/authenticate\nwith body (x-www-form-urlencoded)\nname=John Doe\npassword=123\n```\n\nSave token from response:\n```json\n{\n  \"success\": true,\n  \"message\": \"Enjoy your token!\",\n  \"token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NjZhNWRmZWM0YTBmNWI4MWY3ZGUyN2EiLCJuYW1lIjoiSm9obiBEb2UiLCJwYXNzd29yZCI6IjEyMyIsImFkbWluIjp0cnVlLCJfX3YiOjB9.1lVy8FFahyEl1OBGHTNTn5c1r4xJZFgTsdJ-OsQpqvo\"\n}\n```\n\nAccess protected areas with this token:\n```\nhttp://localhost:3000/api/\nwith header\nx-access-token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NjZhNWRmZWM0YTBmNWI4MWY3ZGUyN2EiLCJuYW1lIjoiSm9obiBEb2UiLCJwYXNzd29yZCI6IjEyMyIsImFkbWluIjp0cnVlLCJfX3YiOjB9.1lVy8FFahyEl1OBGHTNTn5c1r4xJZFgTsdJ-OsQpqvo\n\nOR\ntoken query parameter\nhttp://localhost:3000/api/users?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiI1NjZhNWRmZWM0YTBmNWI4MWY3ZGUyN2EiLCJuYW1lIjoiSm9obiBEb2UiLCJwYXNzd29yZCI6IjEyMyIsImFkbWluIjp0cnVlLCJfX3YiOjB9.1lVy8FFahyEl1OBGHTNTn5c1r4xJZFgTsdJ-OsQpqvo\n```\n\n"
  },
  {
    "html_url": "https://gist.github.com/0eaf7a6a2fb2516e48d7",
    "description": "Using AngularJS toaster with NodeJS application example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0eaf7a6a2fb2516e48d7/raw/1733fe45b96481022d14003804d0b064dd36e73e/angularjs-toaster-in-nodejs-app.md"
    ],
    "content": "Using AngularJS toaster with NodeJS application example\n====\n\nInstall angularjs, angular-animate and angular-toaster\n```bash\nbower install angularjs-toaster\n```\n\nInclude toaster's CSS and JS (File: `main.html`)\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"MyApp\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<base href=\"/\">\n\t<link rel=\"stylesheet\" href=\"lib/angularjs-toaster/toaster.min.css\">\n\t<link rel=\"stylesheet\" href=\"src/css/styles.css\">\n\t<title>My App</title>\n</head>\n<body>\n\n<div class=\"container\">\n\n\t<toaster-container></toaster-container>\n\n</div>\n\n<script src=\"lib/jquery/dist/jquery.min.js\"></script>\n<script src=\"lib/angular/angular.min.js\"></script>\n<script src=\"lib/angular-animate/angular-animate.min.js\"></script>\n<script src=\"lib/angularjs-toaster/toaster.min.js\"></script>\n<script src=\"src/js/app.js\"></script>\n</body>\n</html>\n```\n\nConfigure AngularJS app (File: `app.js`):\n```js\nangular.module('MyApp',['ngAnimate','toaster'])\n  .config(function($httpProvider){\n    $httpProvider.interceptors.unshift(function($q,toaster){\n      return {\n        response     :function(response){\n          var hMsg=response.headers('X-MSG');\n          if(hMsg){\n            hMsg=decodeURI(hMsg);\n            var xMessages=JSON.parse(hMsg);\n            if(xMessages.length>0)\n              xMessages.forEach(function(xMsg){\n                if(xMsg.code && xMsg.message){\n                  if(xMsg.code==200) // success\n                    toaster.pop('success','',xMsg.message);\n                  else if(xMsg.code==455) // warning\n                    toaster.pop('warning','',xMsg.message);\n                  else\n                    toaster.pop('error','Error',xMsg.message); // error\n                }\n              });\n          }\n          return response || $q.when(response);\n        },\n        responseError:function(response){\n          return $q.reject(response);\n        }\n      };\n    });\n  })\n  .factory('F',function(toaster,$timeout){\n    var self={\n      isDef:function(v){return v && v!=null && angular.isDefined(v);},\n      msg  :{\n        error  :function(msg){$timeout(function(){toaster.pop('error','',msg);})},\n        warning:function(msg){$timeout(function(){toaster.pop('warning','',msg);})},\n        info   :function(msg){$timeout(function(){toaster.pop('info','',msg);})},\n        success:function(msg){$timeout(function(){toaster.pop('success','',msg);})}\n      }\n    };\n    return self;\n  })\n  .run(function($rootScope,F){\n    $rootScope._=_;\n    $rootScope.F=F;\n  });\n```\n\nConstants module (File: `constants.js`):\n```js\nvar constants_={\n  STATUS:{\n    SUCCESS:200,\n    WARNING:455,\n    ERROR  :400\n  }\n};\nmodule.exports=constants_;\n```\n\nMessage module (File: `msg.js`):\n```js\nvar Const=require('./constants');\n\nvar Msg={\n  SUCCESS:Const.STATUS.SUCCESS,\n  WARNING:Const.STATUS.WARNING,\n  ERROR  :Const.STATUS.ERROR,\n  /**\n   * Add message to X-MSG header as JSON string.\n   * @param res HTTP Response object instance\n   * @param {string} msg message text\n   * @param {int} status status code (200-success, 455-warning,400-error)\n   */\n  add    :function(res,msg,status){\n    status=status || this.SUCCESS;\n    var msg_={\n      message:msg,\n      code   :status\n    };\n\n    var hdr=res.get('X-MSG'); // get header\n\n    if(hdr) hdr=JSON.parse(decodeURI(hdr));\n    else hdr=[];\n\n    hdr.push(msg_);\n    hdr=encodeURI(JSON.stringify(hdr));\n\n    res.set('X-MSG',hdr); // set header\n  }\n};\n\nmodule.exports=Msg;\n```\n\nNodeJS application (File: `server.js`):\n```js\nvar path=require('path'),\n  express=require('express'),\n  app=express(),\n  bodyParser=require('body-parser'),\n  Msg=require('./msg');\n\napp.locals.publicPath=path.join(__dirname,'public');\napp.locals.viewPath=path.join(app.locals.publicPath,'views');\napp.locals.sendFileOptions={root:app.locals.publicPath};\n\napp\n  .use(express.static('./public'))\n  .use(bodyParser.json())\n  .get('/',function(req,res){\n    res.sendFile('main.html',app.locals.sendFileOptions);\n  })\n  .get('/testmsg',function(req,res){\n    Msg.add(res,'Success message is here',Msg.SUCCESS);\n    Msg.add(res,'Warning message is here',Msg.WARNING);\n    Msg.add(res,'Error message is here'  ,Msg.ERROR  );\n    res.json({txt:'some string'});\n  })\n  .listen(3000);\n```"
  },
  {
    "html_url": "https://gist.github.com/b31236a31d2eb0ea60a8",
    "description": "MongoDB beginners tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b31236a31d2eb0ea60a8/raw/5ecd32057d5746c2529b75b48ca9a83b0c1cf577/mongodb-tips.md"
    ],
    "content": "Get document's created timestamp\n```js\ndb.links.find()[0]._id.getTimestamp();\n// OUTPUT: ISODate(\"2015-11-27T04:24:40Z\")\n```\n\nCounter function to create sequences\n```js\nfunction counter(name){\n\tvar ret=db.counters.findAndModify({\n\t\tquery:{_id:name},\n\t\tupdate:{$inc:{next:1}},\n\t\tnew:true,\n\t\tupsert:true\n\t});\n\treturn ret.next;\n}\n```\n\nExample of using `counter()`\n```js\ndb.products.insert({_id:counter('products'),name:'product 1'});\ndb.products.insert({_id:counter('products'),name:'product 2'});\ndb.products.insert({_id:counter('products'),name:'product 3'});\n```\n\nShow inserted documents:\n```js\ndb.products.find().pretty();\n```\n\nOutput:\n```\n{ \"_id\" : 1, \"name\" : \"product 1\" }\n{ \"_id\" : 2, \"name\" : \"product 2\" }\n{ \"_id\" : 3, \"name\" : \"product 3\" }\n```\n\nShow counters current values:\n```js\ndb.counters.find().pretty()\n```\n\nOutput:\n```\n{ \"_id\" : \"products\", \"next\" : 3 }\n```\n\nAlternative to SQL statement `UPDATE QUIZZES SET AUTHOR='Mike' WHERE AUTHOR IS NULL`\n```js\ndb.quizzes.update({author:{$exists:0}},{$set:{author:\"Mike\"}},{multi:1})\n```\n\nAlternative to SQL statement `update products set price=price*1`\n```js\ndb.products.find().forEach(function(item){ db.products.update({_id:item._id},{$set:{price:item.price*1}}); })\n```"
  },
  {
    "html_url": "https://gist.github.com/06bb3636aa36a1bb1741",
    "description": "Show input controls validity in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/06bb3636aa36a1bb1741/raw/a4b23314202a731f38961dfbb3699be7ab09ac4c/input-controls-validity.md"
    ],
    "content": "Show input controls validity in AngularJS\n===\n\n```css\n.ng-dirty.ng-invalid.form-control {\n    border-color: #a94442;\n    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);\n}\n.ng-dirty.ng-invalid.form-control:focus {\n    border-color: #843534;\n    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #ce8483;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 6px #ce8483;\n}\n.ng-dirty.ng-invalid + .input-group-addon {\n    color: #a94442;\n    background-color: #f2dede;\n    border-color: #a94442;\n}\ninput[type=checkbox].ng-invalid {\n    outline: 1px solid #a94442;\n    outline-offset: -1px;\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/886f246e997b495e604d",
    "description": "AngularJS `$formatters` and `$parsers` example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/886f246e997b495e604d/raw/c5c7f427531c81298f5df426b6f5b465a3be91bb/formatters-parsers.md"
    ],
    "content": "AngularJS `$formatters` and `$parsers` example\n===\n\nUnderstanding formatters and parsers:\n- Formatters change how model values will appear in the view.\n- Parsers change how view values will be saved in the model.\n\n```js\n  // formats text going to user (from model to view)\n  ngModel.$formatters.push(function(value) {\n    return value.toUpperCase();\n  });\n\n  // formats text from the user (from view to model)\n  ngModel.$parsers.push(function(value) {\n    return value.toLowerCase();\n  });\n```\n\nFormat number set programmatically via custom directive\n```js\nangular.module('MyApp',[])\n\t.directive('formatNumber',function($filter){\n\t\treturn {\n\t\t\trequire:'ngModel',\n\t\t\tlink   :function(scope,elem,attrs,ngModelCtrl){\n\t\t\t\t// formats text going to user (from model to view)\n\t\t\t\tngModelCtrl.$formatters.push(function(v){\n\t\t\t\t\treturn $filter('number')(v,2); // programmatically set value will be formatted\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t})\n\t.controller('SiteCtrl',function($scope){\n\t    // default value\n\t\t$scope.val={num:0};\n\t\t\n\t\t// change value programmatically\n\t\tsetTimeout(function(){\n\t\t\t$scope.val.num=123456.786; // in input will be shown as 123,456.79\n\t\t},1000);\n\t});\n```\n\nUsing `format-number` directive:\n```html\n<div ng-app=\"MyApp\" class=\"site-index\">\n\t<div ng-controller=\"SiteCtrl\" class=\"body-content\">\n\t\t<form name=\"form_1\">\n\t\t\t<input ng-model=\"val.num\" format-number>\n\t\t\tModel value:\n\t\t\t<pre>{{val.num}}</pre>\n\t\t</form>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/d07297271849d0b227df",
    "description": "AngularJS 'ensureUnique' custom directive to check value uniqueness and use it in Yii2 app",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d07297271849d0b227df/raw/1ff3f07d88364004217ad838c55d23633e2fa4ac/custom-directive-ensure-unique.md"
    ],
    "content": "AngularJS 'ensureUnique' custom directive to check value uniqueness\n===\n\nCreate `Validation` module. Also configure HTTP request parameters.\n```js\nangular.module('Validation',[])\n\t.config(function($httpProvider){\n\t\t// Use x-www-form-urlencoded Content-Type\n\t\t$httpProvider.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded;charset=utf-8';\n\t\t$httpProvider.defaults.headers.post['X-Requested-With']='XMLHttpRequest';\n\t\t/**\n\t\t * The workhorse; converts an object to x-www-form-urlencoded serialization.\n\t\t * @param {Object} obj\n\t\t * @return {String}\n\t\t */\n\t\tvar param=function(obj){\n\t\t\tvar query='',name,value,fullSubName,subName,subValue,innerObj,i;\n\t\t\tfor(name in obj){\n\t\t\t\tvalue=obj[name];\n\t\t\t\tif(value instanceof Array){\n\t\t\t\t\tfor(i=0; i<value.length; ++i){\n\t\t\t\t\t\tsubValue=value[i];\n\t\t\t\t\t\tfullSubName=name+'['+i+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value instanceof Object){\n\t\t\t\t\tfor(subName in value){\n\t\t\t\t\t\tsubValue=value[subName];\n\t\t\t\t\t\tfullSubName=name+'['+subName+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value!==undefined && value!==null)\n\t\t\t\t\tquery+=encodeURIComponent(name)+'='+encodeURIComponent(value)+'&';\n\t\t\t}\n\t\t\treturn query.length?query.substr(0,query.length-1):query;\n\t\t};\n\t\t// Override $http service's default transformRequest\n\t\t$httpProvider.defaults.transformRequest=[function(data){\n\t\t\treturn angular.isObject(data) && String(data)!=='[object File]'?param(data):data;\n\t\t}];\n\t})\n```\n\nCreate `ensureUnique` directive.\n```js\nangular.module('Validation')\n\t.directive('ensureUnique',function($http){\n\t\treturn {\n\t\t\trequire:'ngModel',\n\t\t\tlink   :function(scope,elem,attrs,ctrl){\n\t\t\t\tscope.$watch(attrs.ngModel,function(){\n\t\t\t\t\t// send http post request to backend, check field according to some logic\n\t\t\t\t\t// and return response in {field:'myfieldname',isUnique:true} format\n\t\t\t\t\t// according to the response it will set ng-unique class and form's errors attribute to unique=true|false\n\t\t\t\t\t$http.post('/site/ensure-unique',{ field : attrs.ngModel, _csrf : yii.getCsrfToken() })\n\t\t\t\t\t\t.success(function(data){ ctrl.$setValidity('unique',data.isUnique); })\n\t\t\t\t\t\t.error(function(){ ctrl.$setValidity('unique',false); });\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n```\n\nUsing validation module\n```js\nangular.module('MyApp',['Validation'])\n\t.controller('SiteCtrl',function($scope){\n\n\t});\n```\n\nUsing `ensure-unique` directive:\n```html\n<div ng-app=\"MyApp\" class=\"site-index\">\n\t<div ng-controller=\"SiteCtrl\" class=\"body-content\">\n\t\t<form name=\"form_email\">\n\t\t\t<input ng-model=\"to\" type=\"email\" placeholder=\"Recipient\" ensure-unique>\n\t\t\t<pre>{{form_email|json}}</pre>\n\t\t</form>\n\t</div>\n</div>\n```\n\nChecking uniqueness logic in backend side sample code\n```php\n<?php\nnamespace app\\controllers;\n\nuse Yii;\nuse yii\\helpers\\Json;\nuse yii\\web\\Controller;\n\nclass SiteController extends Controller\n{\n    public function actionEnsureUnique()\n\t{\n\t    // checking uniqueness logic is here...\n\t    \n\t    // in sample logic we just use random true,false answers\n\t\t$results=[false,true];\n\t\t$field  =Yii::$app->request->post('field');\n\t\techo Json::encode(['field'=>$field,'isUnique'=>$results[array_rand($results)]]);\n\t}\n}\n```\n\nTo work with pretty URL in Yii2 set some options:\n```php\n<?php\n$params=require(__DIR__.'/params.php');\n$config=[\n    // ...\n\t'components'=>[\n\t\t'request'     =>[\n\t\t\t'baseUrl'            =>'',\n\t\t\t'cookieValidationKey'=>'5InFC54UhBcN82BjGzE5lASQDxf9OjdI',\n\t\t],\n\t\t'urlManager'  =>[\n\t\t\t'enablePrettyUrl'=>true,\n\t\t\t'showScriptName' =>false,\n\t\t],\n        // ...\n\t],\n    // ...\n\t'params'    =>$params,\n];\n```"
  },
  {
    "html_url": "https://gist.github.com/8b739335fcb7c272dd5c",
    "description": "AngularJS $interpolate & $interpolateProvider example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/8b739335fcb7c272dd5c/raw/81d30fe09a67a7e24c3d71061a593521ade7c39f/interpolate-example.md"
    ],
    "content": "AngularJS $interpolate & $interpolateProvider example\n===\n\n```js\nangular.module('EmailHelper',[])\n\t.config(['$interpolateProvider',function($interpolateProvider){\n\t\t// change default interpolation symbols\n\t\t$interpolateProvider.startSymbol('__'); // __ instead of {{\n\t\t$interpolateProvider.endSymbol('__'); // __ instead of }}\n\t}])\n\t.factory('EmailParser',['$interpolate',function($interpolate){\n\t\treturn {\n\t\t\t/**\n\t\t\t * Interpolates text with context\n\t\t\t * @param text string with substitution symbols, e.g.: Hello __name__.\n\t\t\t * @param context scope object for using in text, e.g.: {name:'Jack'}, with above text it will become 'Hello Jack.'\n\t\t\t * @returns {*} interpolated text with context\n\t\t\t */\n\t\t\tparse:function(text,context){\n\t\t\t\tvar tpl=$interpolate(text);\n\t\t\t\treturn tpl(context);\n\t\t\t}\n\t\t};\n\t}]);\n\nangular.module('MyApp',['EmailHelper'])\n\t.controller('SiteCtrl',['$scope','EmailParser',function($scope,EmailParser){\n\t\t// when $scope.emailBody changed, parse & interpolate it\n\t\t$scope.$watch('emailBody',function(body){\n\t\t\tif(body) $scope.previewText=EmailParser.parse(body,{to:$scope.to});\n\t\t});\n\t}]);\n```\n\nView content:\n\n```html\n<div ng-app=\"MyApp\" class=\"site-index\">\n\t<div ng-controller=\"SiteCtrl\" class=\"body-content\">\n\t\t<input ng-model=\"to\" type=\"email\" placeholder=\"Recipient\">\n\t\t<textarea ng-model=\"emailBody\" cols=\"30\" rows=\"10\"></textarea>\n\t\t<pre>__previewText__</pre>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/e774d0b6cf36e924f78a",
    "description": "Getting started with Yii2 and AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e774d0b6cf36e924f78a/raw/70060dfb8dd998d8c38e9fa836d1454233376d3e/yii2-angularjs-composer-bower.md"
    ],
    "content": "Installing Yii2 using composer\n====\n\nDownload Yii2 Basic application\n```bash\ncd domains\nmkdir mysite.uz\ncd mysite.uz\ncomposer create-project yiisoft/yii2-app-basic .\n```\n\nCreate `.htaccess` file\n```bash\nvim .htaccess\n```\n\n`mysite/.htaccess` file content:\n```\nRewriteEngine On\nRewriteCond %{REQUEST_URI} !^web\nRewriteRule ^(.*)$ web/$1 [L]\n```\n\nCreate another `.htaccess` file\n```bash\ncd web\nvim .htaccess\n```\n\n`mysite/web/.htaccess` file content:\n```\nRewriteEngine on\n\n# If a directory or a file exists, use it directly\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\n\n# Otherwise forward it to index.php\nRewriteRule . index.php\n```\n\nDownloading AngularJs\n```bash\ncd ..\nbower install angularjs\nbower install angular-route\n```\n\nCreate Angular Asset Bundle\n```bash\ncd assets\nvim AngularAsset.php\n```\n\n`AngularAsset.php` file content:\n```php\n<?php\nnamespace app\\assets;\n\nuse yii\\web\\AssetBundle;\nuse yii\\web\\View;\n\nclass AngularAsset extends AssetBundle\n{\n\tpublic $sourcePath=\"@bower\";\n\tpublic $js        =[\n\t\t'angular/angular.js',\n\t\t'angular-route/angular-route.js',\n\t];\n\tpublic $jsOptions =[\n\t\t'position'=>View::POS_HEAD,\n\t];\n}\n```\n\nAdd `AngularAsset` into application assets dependencies:\n```php\n<?php\n/**\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n */\n\nnamespace app\\assets;\n\nuse yii\\web\\AssetBundle;\n\n/**\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\nclass AppAsset extends AssetBundle\n{\n    public $basePath = '@webroot';\n    public $baseUrl = '@web';\n    public $css = [\n        'css/site.css',\n    ];\n    public $js = [\n    ];\n    public $depends = [\n        'yii\\web\\YiiAsset',\n        'yii\\bootstrap\\BootstrapAsset',\n        'app\\assets\\AngularAsset',\n    ];\n}\n```\n\nCreate `js` folder and create `app.js` file:\n```bash\ncd web\nmkdir js\ncd js\nvim app.js\n```\n\n`app.js` file content:\n```js\nangular.module('MyApp',['ngRoute'])\n\t.controller('SiteCtrl',function($scope){\n\t\t$scope.testString='Hello World!';\n\t});\n```\n\nAdd `app.js` into `AppAsset` bundle:\n```php\n<?php\nclass AppAsset extends AssetBundle\n{\n    //...\n\tpublic $js      =[\n\t\t'js/app.js',\n\t];\n\t//...\n}\n```\n\nModify `views\\site\\index.php` content to the following to test angularjs app:\n```php\n<?php\n/* @var $this yii\\web\\View */\n$this->title='My Yii Application';\n?>\n<div ng-app=\"MyApp\" class=\"site-index\">\n\t<div ng-controller=\"SiteCtrl\" class=\"body-content\">\n\t\tTest string: {{testString}}\n\t</div>\n</div>\n```\n\nConfigure AngularJS HTTP request to work with Yii2\n====\n\n```js\nangular.module('MyApp',[])\n\t.config(function($httpProvider){\n\t\t// Use x-www-form-urlencoded Content-Type\n\t\t$httpProvider.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded;charset=utf-8';\n\t\t$httpProvider.defaults.headers.post['X-Requested-With']='XMLHttpRequest';\n\t\t/**\n\t\t * The workhorse; converts an object to x-www-form-urlencoded serialization.\n\t\t * @param {Object} obj\n\t\t * @return {String}\n\t\t */\n\t\tvar param=function(obj){\n\t\t\tvar query='',name,value,fullSubName,subName,subValue,innerObj,i;\n\t\t\tfor(name in obj){\n\t\t\t\tvalue=obj[name];\n\t\t\t\tif(value instanceof Array){\n\t\t\t\t\tfor(i=0; i<value.length; ++i){\n\t\t\t\t\t\tsubValue=value[i];\n\t\t\t\t\t\tfullSubName=name+'['+i+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value instanceof Object){\n\t\t\t\t\tfor(subName in value){\n\t\t\t\t\t\tsubValue=value[subName];\n\t\t\t\t\t\tfullSubName=name+'['+subName+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value!==undefined && value!==null)\n\t\t\t\t\tquery+=encodeURIComponent(name)+'='+encodeURIComponent(value)+'&';\n\t\t\t}\n\t\t\treturn query.length?query.substr(0,query.length-1):query;\n\t\t};\n\t\t// Override $http service's default transformRequest\n\t\t$httpProvider.defaults.transformRequest=[function(data){\n\t\t\treturn angular.isObject(data) && String(data)!=='[object File]'?param(data):data;\n\t\t}];\n\t});\n```\n\nEnable pretty URL in Yii2 (`config/web.php` file):\n```php\n<?php\n$config=[\n    // ...\n\t'components'=>[\n\t\t'request'     =>[\n\t\t\t'baseUrl'            =>'',\n\t\t\t// ...\n\t\t],\n\t\t'urlManager'  =>[\n\t\t\t'enablePrettyUrl'=>true,\n\t\t\t'showScriptName' =>false,\n\t\t],\n        // ...\n\t],\n    // ...\n\t'params'    =>$params,\n];\n```\n\nInstalling `FontAwesome`\n=====\n\n```bash\ncd mysite.uz\nbower install fontawesome\nvim assets/FontAwesomeAsset.php\n```\n\nContent of the FontAwesomeAsset.php\n```php\n<?php\n\nnamespace app\\assets;\n\nuse yii\\web\\AssetBundle;\n\nclass FontAwesomeAsset extends AssetBundle\n{\n\tpublic $sourcePath=\"@bower\";\n\tpublic $css       =[\n\t\t'font-awesome/css/font-awesome.css',\n\t];\n}\n```\n\nAdd `FontAwesomeAsset` into `depends` list of the `AppAsset`:\n```php\n<?php\n// ...\nclass AppAsset extends AssetBundle\n{\n    // ...\n\tpublic $depends =[\n\t\t'yii\\web\\YiiAsset',\n\t\t'yii\\bootstrap\\BootstrapAsset',\n\t\t'app\\assets\\FontAwesomeAsset',\n\t\t'app\\assets\\AngularAsset',\n        // ...\n\t];\n}\n```\n\nTest it:\n```html\n<i class=\"fa fa-user\"></i>\n```"
  },
  {
    "html_url": "https://gist.github.com/47bfd9698eb10d4087e9",
    "description": "Installing and configuring OpenVPN",
    "files": [
      "https://gist.githubusercontent.com/umidjons/47bfd9698eb10d4087e9/raw/f438053e2e9bb4b70a0709a7946c3b02e6b1fbfc/open-vpn-configuration.md"
    ],
    "content": "Installing and configuring OpenVPN\n===\n\nDownload appropriate openvpn installer for your OS [here](https://openvpn.net/index.php/download/community-downloads.html)\n\nFind free public VPN server. For example here: http://www.vpngate.net/en/\n\nDownload OpenVPN config file into `C:\\Program Files\\OpenVPN\\config\\`.\n\nRun OpenVPN GUI (on Windows).\n\nFrom its context menu connect to the VPN server.\n\nThat's all, enjoy."
  },
  {
    "html_url": "https://gist.github.com/b2db32e32f8b0bcd1946",
    "description": "Working with Oracle DB objects",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b2db32e32f8b0bcd1946/raw/8c1bc963768c4c75d64306d71192e82baba4e580/working-with-oracle-objects-examples.md"
    ],
    "content": "Working with Oracle DB objects\n===\n\nCreate a table:\n```plsql\ncreate table my_table_3\n(\n  col_1 varchar2(2) not null,\n  col_2 clob,\n  col_3 number(1) not null default 1\n);\n```\n\nAdd a column to the table:\n```plsql\nalter table my_table add col_3 number(2);\n```\n\nModify the column:\n```plsql\nalter table my_table modify col_3 number(5);\n```\n\nRemove the column:\n```plsql\nalter table my_table drop column col_7;\n```\n\nSet column's comment:\n```plsql\ncomment on column my_table.col_3 is 'Third column comment.';\n```\n\nRemove `not null` constraint from the table's column:\n```plsql\nalter table my_table modify my_col_1 null;\n```\n\nCreate a unique constraint:\n```plsql\nalter table my_table_2 add constraint uk_my_table_2_col_4 unique (col_4);\n```\n\nModify a unique index:\n```plsql\nalter table my_table drop constraint uk_my_idx;\ndrop index uk_my_idx;\ncreate unique index uk_my_idx on my_table(my_col_1,my_col_2);\n```\n\nCreate a primary key:\n```plsql\nalter table my_table add constraint pk_my_table_col_1 primary key (col_1);\n```\n\nCreate a foreign key:\n```plsql\nalter table my_table add constraint fk_my_table_2_col_5\nforeign key (col_2)\nreferences my_table_2 (col_5);\n```\n\nCreate a sequence:\n```plsql\ncreate sequence seq_col_1 minvalue 1 maxvalue 9999\nstart with 1 increment by 1 cache 20 cycle order;\n```\n\nCreate a trigger:\n```plsql\ncreate or replace trigger my_trigger\n  before insert on my_table\n  for each row\nbegin\n  :new.id := seq_col_1.nextval;\nend my_trigger;\n/\n```\n\nCreate a table from select query result:\n```plsql\ncreate table my_table as \nselect col_1, col_3, col_4 from my_other_table where col_3=123;\n```\n\nCreate a package:\n```plsql\ncreate or replace package my_pkg is\n   MY_CONST_1 constant number(1):=7;\n   MY_CONST_2 constant varchar2(100):='some value';\n   function my_func return my_table.col_2%type;\n   procedure my_proc(param1 number(4));\nend;\n/\n\ncreate or replace package body my_pkg is\n  function my_func return my_table.col_2%type is\n    var_1 my_table.col_2%type := null;\n  begin\n    -- some logic...\n    return var_1;\n  end;\n  \n  procedure my_proc(param1 number(4)) is\n  begin\n    -- some logic...\n  end;\n  \n  procedure my_private_proc(param1 in out my_table%rowtype) is\n  begin\n    -- some logic...\n  end;\nend;\n/\n```"
  },
  {
    "html_url": "https://gist.github.com/36fea02e31a7c2bc272b",
    "description": "Yii: Translations from Oracle DB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/36fea02e31a7c2bc272b/raw/93f3a49ef4c00ea3fd08245686aee9a70cfa9260/translation-from-db-yii.md"
    ],
    "content": "Translations from Oracle DB\n===\n\nExecute following queries in Oracle DB:\n```plsql\ncreate table yii_message_source\n(\n    id number,\n    category varchar2(32),\n    message varchar2(4000)\n);\nalter table yii_message_source add constraint PK_MSG_ID primary key (id);\n\ncreate table yii_message(\n\tid number,\n    language varchar2(16),\n    translation varchar2(4000)\n);\nalter table yii_message add constraint PK_MSG_LANG primary key(id,language);\nalter table yii_message add constraint FK_MSG_SRC foreign key (id) references yii_message_source (id) on delete cascade;\n\ncreate sequence YII_MESSAGE_ID minvalue 1 maxvalue 999999999 start with 1 increment by 1 nocache;\n\ncreate or replace trigger add_yii_message_source\n\tbefore insert on yii_message_source\n\tfor each row\n\twhen (new.id is null)\ndeclare\n\tseq_ number(18);\nbegin\n\tselect yii_message_id.nextval into seq_ from dual;\n\t:new.id := seq_;\nend;\n```\n\nFill `yii_message_source` table with primary words.\nFill `yii_message` table with translations.\n\nCreate following class in your `components` directory:\n```php\n<?php\nclass DbMessageSource extends CDbMessageSource\n{\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic function loadMessages($category,$language)\n\t{\n\t\treturn parent::loadMessages($category,$language);\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic function loadMessagesFromDb($category,$language)\n\t{\n\t\t$rows    =$this->getDbConnection()->createCommand(\"\n\t\t\tselect message, translation\n\t\t\tfrom {$this->sourceMessageTable} t1, {$this->translatedMessageTable} t2\n\t\t\twhere t1.id=t2.id and category=:category and language=:language\")\n\t\t\t->queryAll(true,[':category'=>$category,':language'=>$language]);\n\t\t$messages=[];\n\t\tforeach($rows as $row)\n\t\t\t$messages[$row['MESSAGE']]=$row['TRANSLATION'];\n\n\t\treturn $messages;\n\t}\n}\n```\n\nConfigure `messages` component as following:\n```php\n<?php\nreturn [\n\t// ...\n\t// application components\n\t'components'    =>[\n\t    // ...\n\t\t'messages'     =>[\n\t\t\t'class'                 =>'DbMessageSource',\n\t\t\t'sourceMessageTable'    =>'YII_MESSAGE_SOURCE',\n\t\t\t'translatedMessageTable'=>'YII_MESSAGE',\n\t\t\t'cacheID'               =>'cache',\n\t\t\t'cachingDuration'       =>3600,\n\t\t],\n\t\t// ...\n\t],\n];\n```\n"
  },
  {
    "html_url": "https://gist.github.com/643460259d983ab7db6e",
    "description": "Configure OpenServer nginx for Yii",
    "files": [
      "https://gist.githubusercontent.com/umidjons/643460259d983ab7db6e/raw/e75d7cf0b4994d37aecbebcc13d4c2ce7471a9a7/openserver-nginx-yii.md"
    ],
    "content": "Configure OpenServer nginx for Yii\n===\n\nTo configure nginx for specific domain we should copy nginx configuration into\nthat domain's directory.\nSuppose, I have `mysite.uz` domain. Then I should copy `c:\\OpenServer\\userdata\\config\\Nginx-1.9_vhost.conf` into `c:\\OpenServer\\domains\\mysite.uz\\Nginx-1.9_vhost.conf`.\n\nAdd some configuration entries to enable pretty URL and to deny access to the specific directories:\n```conf\nserver {\n    listen         %ip%:%httpport%;\n    listen         %ip%:%httpsport% ssl;\n    server_name    %host% %aliases%;\n    # if ($request_method !~* ^(GET|HEAD|POST)$ ){return 403;}\n    location ~ /\\. {deny all;}\n\n    location / {\n        root       \"%hostdir%\";\n        index      index.php index.html index.htm;\n        # enable Yii's pretty URL\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n\n    # deny access to specific locations\n    location ~ /(protected|framework|nbproject) {\n        deny all;\n        access_log off;\n        log_not_found off;\n    }\n\n    # other configuration options remains as is\n    location ~ \\.php$ {\n      # ...\n    }\n}\n```\n\nRestart OpenServer.\n\nMore information about custom configuration for the domain is here http://open-server.ru/docs/#voprosy-i-otvety\n\nDiscussion about OpenServer's Nginx and Yii urlManager is here http://open-server.ru/forum/viewtopic.php?f=1&t=1441"
  },
  {
    "html_url": "https://gist.github.com/dca883c90b9df138caa5",
    "description": "Custom LogRoute to log entries into Oracle DB via OCI interface",
    "files": [
      "https://gist.githubusercontent.com/umidjons/dca883c90b9df138caa5/raw/fa55fb439b8f5fda222ea7f25465a3f9bdfa1310/custom-log-route-oci.md"
    ],
    "content": "Custom LogRoute to log entries into Oracle DB via OCI interface\n===\n\nLog route implementation:\n```php\n<?php\n\nclass ELogDb extends CDbLogRoute\n{\n\tprotected function createLogTable($db,$tableName)\n\t{\n\t\t// create table and sequence\n\t\t$sql=\"CREATE TABLE {$this->logTableName} (\n\t\t\t\t\t\tID       NUMBER(18),\n\t\t\t\t\t\tLEVEL_   VARCHAR2(128),\n\t\t\t\t\t\tCATEGORY VARCHAR2(128),\n\t\t\t\t\t\tLOGTIME  DATE,\n\t\t\t\t\t\tIP       VARCHAR2(50),\n\t\t\t\t\t\tUSERID   NUMBER(18),\n\t\t\t\t\t\tUSERNAME VARCHAR2(50),\n\t\t\t\t\t\tURL      VARCHAR2(1000),\n\t\t\t\t\t\tMESSAGE  CLOB\n\t\t\t\t\t)\";\n\t\tYii::app()->odb->exec($sql);\n\t\t$sql=\"CREATE SEQUENCE SEQ_{$this->logTableName} MINVALUE 1 MAXVALUE 999999999999999999 START WITH 1 INCREMENT BY 1 CYCLE ORDER\";\n\t\tYii::app()->odb->exec($sql);\n\t}\n\n\tprotected function processLogs($logs)\n\t{\n\t\tforeach($logs as $log)\n\t\t{\n\t\t\t$v_get ='$_GET:'.print_r($_GET,true);\n\t\t\t$v_post='$_POST:'.print_r($_POST,true);\n\t\t\t$msg   =implode(\"\\n\\n\\n\",[$log[0],$v_get,$v_post]);\n\t\t\tYii::app()->odb->exec('begin logger.log(:pLevel,:pCategory,:pIp,:pUser,:pUsername,:pUrl,:pMsg); end;',[\n\t\t\t\t':pLevel'   =>$log[1],\n\t\t\t\t':pCategory'=>$log[2],\n\t\t\t\t':pIp'      =>Yii::app()->request->userHostAddress,\n\t\t\t\t':pUser'    =>Yii::app()->user->id,\n\t\t\t\t':pUsername'=>Yii::app()->user->name,\n\t\t\t\t':pUrl'     =>Yii::app()->request->url,\n\t\t\t\t':pMsg'     =>[$msg,OCI_B_CLOB,-1,false],\n\t\t\t]);\n\t\t}\n\t}\n}\n```\n\nLogger package implementation\n\nPackage header:\n```plsql\ncreate or replace package LOGGER is\n\n\tprocedure log(pLevel    yiilog.level_%type,\n\t\t\t\t  pCategory yiilog.category%type,\n\t\t\t\t  pIP       yiilog.ip%type,\n\t\t\t\t  pUser     yiilog.userid%type,\n\t\t\t\t  pUsername yiilog.username%type,\n\t\t\t\t  pUrl      yiilog.url%type,\n\t\t\t\t  pMsg      yiilog.message%type);\n\nend LOGGER;\n```\n\nPackage body:\n```plsql\ncreate or replace package body LOGGER is\n\n\tprocedure log(pLevel    yiilog.level_%type,\n\t\t\t\t  pCategory yiilog.category%type,\n\t\t\t\t  pIP       yiilog.ip%type,\n\t\t\t\t  pUser     yiilog.userid%type,\n\t\t\t\t  pUsername yiilog.username%type,\n\t\t\t\t  pUrl      yiilog.url%type,\n\t\t\t\t  pMsg      yiilog.message%type) is\n\t\tPRAGMA AUTONOMOUS_TRANSACTION;\n\t\trow_ yiilog%rowtype;\n\tbegin\n\t\trow_.id       := seq_yiilog.Nextval;\n\t\trow_.level_   := pLevel;\n\t\trow_.category := pCategory;\n\t\trow_.logtime  := sysdate;\n\t\trow_.ip       := pIP;\n\t\trow_.userid   := pUser;\n\t\trow_.username := pUsername;\n\t\trow_.url      := pUrl;\n\t\trow_.message  := pMsg;\n\t\tinsert into yiilog values row_;\n\t\tcommit;\n\tend;\n\nend LOGGER;\n```\n\nNecessary sequence implementation:\n```plsql\n-- Create sequence \ncreate sequence SEQ_YIILOG\nminvalue 1\nmaxvalue 999999999999999999\nstart with 1\nincrement by 1\ncache 20\ncycle\norder;\n```\n\nConfigure component:\n```php\n<?php\nreturn [\n\t'preload'   =>['log'],\n\t'import'    =>[\n\t\t'application.models.*',\n\t\t'application.models.task.*',\n\t\t'application.components.*',\n\t],\n\t'components'=>[\n\t\t'odb'=>[\n\t\t\t'class'           =>'EOciConnection', // https://gist.github.com/umidjons/c572446825b2d8300048\n\t\t\t'connectionString'=>'MYTNS',\n\t\t\t'username'        =>'MYUSER',\n\t\t\t'password'        =>'MYPSWD',\n\t\t\t'charset'         =>'AL32UTF8',\n\t\t\t'persistent'      =>true,\n\t\t],\n\t\t'log'=>[\n\t\t\t'class' =>'CLogRouter',\n\t\t\t'routes'=>[\n\t\t\t\t[\n\t\t\t\t\t'class'             =>'ext.logdb.ELogDb',\n\t\t\t\t\t'connectionID'      =>'odb',\n\t\t\t\t\t'autoCreateLogTable'=>false,\n\t\t\t\t\t'levels'            =>'error,warning,info',\n\t\t\t\t\t'logTableName'      =>'YIILOG',\n\t\t\t\t],\n\t\t\t],\n\t\t],\n\t],\n];\n```"
  },
  {
    "html_url": "https://gist.github.com/93e69803f2d00e392cd9",
    "description": "Remove duplicated items from array of items, which each items is also associative array.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/93e69803f2d00e392cd9/raw/a1f20402a94492f889fedc0f8656e17376d9cbd2/unique-multi-array-by-key.md"
    ],
    "content": "Remove duplicated items from array of items, which each items is also associative array.\n===\n\nFunction implementation:\n```php\n<?php\n/**\n * Removes duplicates from multidimensional associative array by key.\n * Ignores items from resulting array with the same key.\n * If key is not set in the item, that item will be ignored from resulting array.\n * @param array  $array array of associative arrays with key.\n * @param string $key   associative array key to check for duplicates.\n * @return array resulting array of associative arrays.\n */\nfunction array_unique_by_key($array,$key)\n{\n\t$tmp   =[];\n\t$result=[];\n\tforeach($array as $item)\n\t{\n\t\tif(!isset($item[$key]))\n\t\t\tcontinue;\n\t\tif(!in_array($item[$key],$tmp))\n\t\t{\n\t\t\t$tmp[]   =$item[$key];\n\t\t\t$result[]=$item;\n\t\t}\n\t}\n\treturn $result;\n}\n```\n\nSuppose, our example array is following:\n```php\n<?php\n$array  =[\n\t['name'=>'Jhon','age'=>23],\n\t['name'=>'Jane','age'=>20],\n\t['name'=>'Dizel','age'=>18],\n\t['name'=>'Done','age'=>31],\n\t['name'=>'Jhon','age'=>18],\n];\n```\n\nTo leave items by `name` we will call following:\n```php\n<?php\n$by_name=array_unique_by_key($array,'name');\necho '<pre>'.print_r($by_name,true).'</pre>';\n```\n\nOutput will be as following:\n```\nArray\n(\n    [0] => Array\n        (\n            [name] => Jhon\n            [age] => 23\n        )\n\n    [1] => Array\n        (\n            [name] => Jane\n            [age] => 20\n        )\n\n    [2] => Array\n        (\n            [name] => Dizel\n            [age] => 18\n        )\n\n    [3] => Array\n        (\n            [name] => Done\n            [age] => 31\n        )\n\n)\n```\n\nTo leave items by `age` we will call following:\n```php\n<?php\n$by_age=array_unique_by_key($array,'age');\necho '<pre>'.print_r($by_age,true).'</pre>';\n```\n\nOutput will be as following:\n```\nArray\n(\n    [0] => Array\n        (\n            [name] => Jhon\n            [age] => 23\n        )\n\n    [1] => Array\n        (\n            [name] => Jane\n            [age] => 20\n        )\n\n    [2] => Array\n        (\n            [name] => Dizel\n            [age] => 18\n        )\n\n    [3] => Array\n        (\n            [name] => Done\n            [age] => 31\n        )\n\n)\n```"
  },
  {
    "html_url": "https://gist.github.com/c637b6f39af068a56cda",
    "description": "Convert Unicode sequences to normal text (letters).",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c637b6f39af068a56cda/raw/466c3fc5b2c0a0c28cc97f1f4f88100db1173cf3/convert-unicode-sequences-to-text-string.md"
    ],
    "content": "Convert Unicode sequences to normal text (letters).\n===\n\n```php\n<?php\n/**\n * Converts unicode sequences into normal letters.\n * @param string $str escaped unicode sequences\n * @return mixed converted normal string with letters.\n */\nfunction unicode2text($str)\n{\n\treturn preg_replace('/\\\\\\\\u([0-9a-z]{4})/u','&#x$1;',$str);\n}\n\n$err='\\u041d\\u0435 \\u0441\\u043e\\u043e\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0438\\u0435 \\u0441\\u043f\\u0440\\u0430\\u0432\\u043e\\u0447\\u043d\\u0438\\u043a\\u0443 \\u043e\\u0442\\u0440\\u0430\\u0441\\u043b\\u0438 \\u043d\\u0430\\u0440\\u043e\\u0434\\u043d\\u043e\\u0433\\u043e \\u0445\\u043e\\u0437\\u044f\\u0439\\u0441\\u0442\\u0432\\u0430';\n$err=unicode2text($err); // $err='Не соответствие справочнику отрасли народного хозяйства'\n```"
  },
  {
    "html_url": "https://gist.github.com/c5cc2038c0ed0260fba3",
    "description": "Export data into CSV in UTF-8 encoding",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c5cc2038c0ed0260fba3/raw/f74fca5e90b0284c261675be34651b7188f178ce/export-into-csv-utf8.md"
    ],
    "content": "Export data into CSV in UTF-8 encoding\n===\n\n```php\n<?php\nclass Csver extends CComponent\n{\n\tprivate $options;\n\tprivate $fileName;\n\tprivate $url;\n\n\tfunction __construct(array $options)\n\t{\n\t\t$this->options =$options;\n\t\t$dir           ='uploads/export/'; // dir to export CSV file\n\t\t$tmpFilename   =@tempnam($dir,'export'); // create temp file\n\t\t$this->fileName=$tmpFilename.\".csv\"; // add extension\n\t\trename($tmpFilename,$this->fileName);\n\t\t$this->url=$dir.basename($this->fileName); // generate URL to download a file\n\t}\n\n\t/**\n\t * Adds special symbols to represent value as text.\n\t * @param string $val value\n\t * @return string formatted value\n\t */\n\tprivate function asText($val) { return '=\"'.$val.'\"'; }\n\n\t/**\n\t * Exports data to CSV.\n\t * @param array  $input_array data to be exported.\n\t * @param string $delimiter   delimiter, default ';'.\n\t * @param bool   $download    false - return url and path, true - force download.\n\t * @return array url and path of the generated file as [path=>xxx,url=>yyy]\n\t */\n\tpublic function export($input_array,$delimiter=';',$download=false)\n\t{\n\t\t// open temporary file\n\t\t$fp=fopen($this->fileName,'w');\n\n\t\t// write BOM into UTF-8 encoded file to properly display characters\n\t\tfwrite($fp,pack(\"CCC\",0xef,0xbb,0xbf));\n\n\t\t// convert to right encoding\n\t\tforeach($input_array as &$row)\n\t\t{\n\t\t\t$idx=0;\n\t\t\tforeach($row as $key=>$val)\n\t\t\t{\n\t\t\t\tif(is_numeric($key))\n\t\t\t\t\t$row[$key]=$this->asText($val);\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif($this->options['header'][$idx]['type']=='text')\n\t\t\t\t\t\t$row[$key]=$this->asText($row[$key]);\n\t\t\t\t}\n\t\t\t\t$idx++;\n\t\t\t}\n\t\t}\n\n\t\t// put header\n\t\tif(!empty($this->options['header']))\n\t\t{\n\t\t\t$col_keys=array_keys($input_array[0]);\n\t\t\t$idx     =0;\n\t\t\tforeach($this->options['header'] as $hdr)\n\t\t\t{\n\t\t\t\t$header[$col_keys[$idx]]=isset($hdr['title'])?$hdr['title']:'';\n\t\t\t\t$idx++;\n\t\t\t}\n\t\t\tarray_unshift($input_array,$header);\n\t\t}\n\t\t// write as CSV\n\t\tforeach($input_array as $line)\n\t\t\tfputcsv($fp,$line,$delimiter);\n\n\t\t// close file\n\t\tfclose($fp);\n\n\t\tif(!$download)\n\t\t\t// return info\n\t\t\treturn ['file'=>$this->fileName,'url'=>$this->url,];\n\t\telse\n\t\t{\n\t\t\t// open temporary file\n\t\t\t$fp=fopen($this->fileName,'rb');\n\n\t\t\t// modify header to be downloadable csv file\n\t\t\theader('Content-Type: application/csv');\n\t\t\theader('Content-Disposition: attachement; filename=\"'.basename($this->fileName).'\";');\n\n\t\t\t// Send file to browser for download\n\t\t\tfpassthru($fp);\n\t\t}\n\t}\n}\n```\n\nUsage example:\n```php\n<?php\n\nclass F\n{\n\tconst HTTP_SUCCESS=200;\n\tconst HTTP_WARNING=455;\n\tconst HTTP_ERROR  =400;\n\n\tpublic static function response($response)\n\t{\n\t\techo CJSON::encode($response);\n\t}\n\n\tpublic static function resp($code=0,$message='',$content='',$set_header=true,$force_log=false)\n\t{\n\t\tif($set_header)\n\t\t\theader('Content-Type: application/json');\n\t\t$data=['code'=>$code,'message'=>$message,'content'=>$content];\n\t\tif($force_log)\n\t\t\tYii::log('Response: '.print_r($data,true));\n\t\treturn F::response($data);\n\t}\n}\n\nclass SiteController extends CComponent\n{\n\tpublic static function remove_columns(array &$array,array $column_keys)\n\t{\n\t\tif(!empty($array) && !empty($column_keys))\n\t\t\tforeach($array as &$item)\n\t\t\t\tforeach($column_keys as $key)\n\t\t\t\t\tunset($item[$key]);\n\t}\n\n\tprivate function _export($headers,$rows,$remove_columns=[])\n\t{\n\t\tif(!empty($rows))\n\t\t{\n\t\t\t// remove unnecessary columns\n\t\t\tif(!empty($remove_columns))\n\t\t\t\tself::remove_columns($rows,$remove_columns);\n\n\t\t\t// export data into CSV file\n\t\t\t$exporter=new Csver(['header'=>$headers]);\n\t\t\t$info    =$exporter->export($rows);\n\t\t\tif(isset($info['url']))\n\t\t\t{\n\t\t\t\t$info['url']='/'.$info['url'];\n\t\t\t\treturn F::resp(F::HTTP_SUCCESS,Yii::t('zr','Данные успешно экспортированы.'),$info);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\treturn F::resp(F::HTTP_WARNING,Yii::t('zr','Нет данных'));\n\t}\n\n\tpublic function actionExport()\n\t{\n\t\t$sql    =\"select id,username,name,birthday,email from users where state=1\";\n\t\t$rows   =Yii::app()->db->createCommand($sql)->queryAll();\n\t\t$headers=[\n\t\t\t['title'=>Yii::t('zr','Код пользователя'),'type'=>'text'],\n\t\t\t['title'=>Yii::t('zr','Логин пользователя')],\n\t\t\t['title'=>Yii::t('zr','Наименование пользователя')],\n\t\t\t['title'=>Yii::t('zr','Дата рождения'),'type'=>'text'],\n\t\t\t['title'=>Yii::t('zr','Эл.почта')],\n\t\t];\n\t\treturn $this->_export($headers,$rows);\n\t}\n\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/a54b35dc9d3974a318b1",
    "description": "Clone/copy javascript object (not DOM object)",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a54b35dc9d3974a318b1/raw/93692d9bf91e83afb2115bc0fc56f4eaaf7c7b65/clone-copy-js-object.md"
    ],
    "content": "Clone/copy javascript object (not DOM object)\n===\n\nNote that the .clone() method in jQuery only clones DOM elements.\nIn order to clone JavaScript objects, you can do:\n\n```javascript\n// Shallow copy\nvar newObject = jQuery.extend({}, oldObject);\n\n// Deep copy\nvar newObject = jQuery.extend(true, {}, oldObject);\n```\n\nOriginal answer is [here](http://stackoverflow.com/a/122704)."
  },
  {
    "html_url": "https://gist.github.com/911a258d0e6aa52a8b03",
    "description": "Replace TAB with SPACE using RegExp",
    "files": [
      "https://gist.githubusercontent.com/umidjons/911a258d0e6aa52a8b03/raw/05f89c7bbb54a2c21ffe8ee468185f955852144a/replace-tabs-to-spaces.md"
    ],
    "content": "Replace TAB with SPACE using RegExp\n===\n\nFind rows which contains TAB.\n```sql\nselect t.object_code, t.my_col, regexp_replace(t.my_col,'('||chr(9)||')+',' ') my_col_wo_tab \nfrom my_table t\nwhere regexp_like(t.my_col,'('||chr(9)||')+')\n```\n\nReplace TABs to SPACE.\n```sql\nupdate my_table\nset my_col=trim(regexp_replace(my_col,'('||chr(9)||')+',' '))\nwhere regexp_like(my_col,'('||chr(9)||')+')\n```"
  },
  {
    "html_url": "https://gist.github.com/ab3b364cb282537bc493",
    "description": "Overwrite email validation",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ab3b364cb282537bc493/raw/e4318c03368dacb95fbac154af4b02b7dbdc7d00/custom-email-validation-angularjs.md"
    ],
    "content": "Overwrite email validation\n===\n\n```html\n<script src=\"js/jquery.min.js\"></script>\n<script src=\"js/angular.min.js\"></script>\n<script src=\"js/angular-messages.min.js\"></script>\n<script>\n\tangular.module('App',['ngMessages'])\n\t\t.directive('myEmail',function(){\n\t\t\tvar EMAIL_REGEXP=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,6}$/i; // custom regexp is here\n\t\t\treturn {\n\t\t\t\trequire :'ngModel',\n\t\t\t\trestrict:'A',\n\t\t\t\tlink    :function(scope,elm,attrs,ctrl){\n\t\t\t\t\tif(ctrl && ctrl.$validators.email){\n\t\t\t\t\t\tctrl.$validators.email=function(modelValue){\n\t\t\t\t\t\t\treturn ctrl.$isEmpty(modelValue) || EMAIL_REGEXP.test(modelValue);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\t.controller('MyCtrl',function($scope){});\n</script>\n\n<div ng-app=\"App\" ng-controller=\"MyCtrl\">\n\t<form name=\"myform\">\n\t\t<div class=\"col-sm-3\">\n\t\t\t<label>Email</label>\n\t\t\t<input name=\"userEmail\" ng-model=\"user.email\" maxlength=\"50\" class=\"form-control\" type=\"email\" my-email required>\n\t\t\t<div ng-messages=\"myform.userEmail.$error\" class=\"text-danger\">\n\t\t\t\t<div ng-message=\"required\">Please, enter your email address.</div>\n\t\t\t\t<div ng-message=\"email\">Specified email address is invalid.</div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/0693e138267062f2b929",
    "description": "Run only one copy of the bash script example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0693e138267062f2b929/raw/2bb974534c3f867351fa4e439014f86f9e4dc79c/only-one-script-run.md"
    ],
    "content": "Run only one copy of the bash script example\n===\n\n`MailSender.php` is long running task. Only one instance of the script must\nbe run at a same time. To prevent executing parallel script instances we can\nuse `flock` utility tool.\n\nCrontab entry:\n```bash\n* * * * * /bin/bash /u01/project/local/jobs/MailSender.sh\n```\n\n`MailSender.sh` script content:\n\n```bash\n#!/bin/bash\n\n# variables\nNAME=\"MailSender\"\nJOBS_PATH=/u01/project/local/jobs\nSCRIPT_FILE=\"$JOBS_PATH/src/$NAME.php\"\nLOG_FILE=\"$JOBS_PATH/log/$NAME.log\"\nLOCK_FILE=\"$JOBS_PATH/$NAME.lock\"\nCONFIG_FILE=\"$JOBS_PATH/Config.sh\"\n\n# initialize environment\nsource $CONFIG_FILE\n\n# run task\n/usr/bin/flock -n $LOCK_FILE /usr/bin/php -f $SCRIPT_FILE >> $LOG_FILE 2>&1\n#----flock------------------|----command-----------------------------------|\n```\n\n`Config.sh` content:\n\n```bash\n#!/bin/bash\n\n# User specific environment and startup programs\nexport ORACLE_BASE=/usr/lib/oracle/11.2\nexport ORACLE_HOME=$ORACLE_BASE/client\nexport TNS_ADMIN=$ORACLE_HOME/network\nexport NLS_LANG=AMERICAN_AMERICA.AL32UTF8\nexport NLS_DATE_FORMAT=\"DD.MM.YYYY HH24:MI:SS\"\nexport PATH=$PATH:$ORACLE_HOME/bin\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib\n\nPATH=$PATH:$HOME/bin:$ORACLE_HOME/bin\nexport PATH\n```"
  },
  {
    "html_url": "https://gist.github.com/0bfc9dd7bb9a8d7f1725",
    "description": "cURL example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0bfc9dd7bb9a8d7f1725/raw/576f4132393c3ef6d250cdea1f6cc852fdcb12c9/curl-example.md"
    ],
    "content": "cURL example\n===\n\n```bash\ncurl -v -G -k --user myuser:mypassword -H \"Cache-Control: no-cache\" -H \"Content-Type: application/json;charset=UTF-8\" \"https://100.150.52.178:2009/ws/myapi\" --data-urlencode 'params={\"action\":\"func1\",\"id\":\"200547089\"}' -w \"\\n\"\n```\n\n`-v` - verbose\n\n`-k` - do not verify SSL\n\n`--user login:password` - basic authorization info\n\n`--data-urlencode 'some data'` - URL encode given data\n\n`-G` - append URL encoded data to the URL\n\n`-w \"\\n\"` put new line after command output\n\n\nOutput:\n```\n* About to connect() to 100.150.52.178 port 2009 (#0)\n*   Trying 100.150.52.178... connected\n* Connected to 100.150.52.178 (100.150.52.178) port 2009 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n* warning: ignoring value of ssl.verifyhost\n* skipping SSL peer certificate verification\n* SSL connection using TLS_DHE_RSA_WITH_AES_256_CBC_SHA\n* Server certificate:\n* \tsubject: CN=*.mysite.uz,OU=COMODO SSL Wildcard,OU=Domain Control Validated\n* \tstart date: Nov 28 00:00:00 2014 GMT\n* \texpire date: Nov 28 23:59:59 2018 GMT\n* \tcommon name: *.mysite.uz\n* \tissuer: CN=COMODO RSA Domain Validation Secure Server CA,O=COMODO CA Limited,L=Salford,ST=Greater Manchester,C=GB\n* Server auth using Basic with user 'myuser'\n> GET /ws/myapy?params=%7B%22action%22%3A%22func1%22%2C%22id%22%3A%22200547089%22%7D HTTP/1.1\n> Authorization: Basic emFscmV2c7RyOnoxMjUzciQ=\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.16.2.3 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 100.150.52.178:2009\n> Accept: */*\n> Cache-control: no-cache\n> Content-Type: application/json;charset=UTF-8\n> \n< HTTP/1.1 200 OK\n< Server: nginx/1.6.2\n< Date: Fri, 05 Jun 2015 11:21:13 GMT\n< Content-Type: application/json;charset=UTF-8\n< Content-Length: 176\n< Connection: keep-alive\n< Cache-Control: no-cache\n< \n* Connection #0 to host 100.150.52.178 left intact\n{\"err_code\":\"0\",\"err_text\":\"ok\",\"root\":[{\"region\":\"tashkent\",\"status\":\"active\",\"name\":\"Jhon Doe\"}]}\n* Closing connection #0\n\n```"
  },
  {
    "html_url": "https://gist.github.com/4c2092b520ca32b40202",
    "description": "Catch fatal errors (Oracle/PLSQL errors) in Yii for specific controller",
    "files": [
      "https://gist.githubusercontent.com/umidjons/4c2092b520ca32b40202/raw/1d9a962bb3b79c2f8bbb3e944bc8b29da0310cea/catch-fatal-errors-in-yii.md"
    ],
    "content": "Catch fatal errors (Oracle/PLSQL errors) in Yii for specific controller\n===\n\nIn this controller any fatal errors will be caught and checked for `PLS-NNNNNN`\nor `ORA-NNNNN`, if match found error text will be returned as JSON.\n\n```php\n<?php\nclass RecordController extends Controller\n{\n\tpublic function init()\n\t{\n\t\tparent::init();\n\t\tYii::app()->attachEventHandler('onError',[$this,'handleError']);\n\t}\n\n\tpublic function handleError(CEvent $event)\n\t{\n\t\tYii::log('IS AJAX: '.print_r(Yii::app()->request->isAjaxRequest,true));\n\t\tYii::log('EVENT: '.print_r($event,true));\n\n\t\t//--< handle OCI errors >--\n\t\tif($event instanceof CErrorEvent && Yii::app()->request->isAjaxRequest)\n\t\t{\n\t\t\t$res=preg_match('/(PLS-\\d+):\\s(.*)/',$event->message,$matches);\n\t\t\tif($res)\n\t\t\t\tF::resp(F::HTTP_ERROR,$matches[2]);\n\t\t\telse\n\t\t\t{\n\t\t\t\t$res=preg_match('/(ORA-\\d+):\\s(.*)/',$event->message,$matches);\n\t\t\t\tif($res)\n\t\t\t\t\tF::resp(F::HTTP_ERROR,$matches[2]);\n\t\t\t}\n\t\t\t$event->handled=!!$res;\n\t\t}\n\t\t//--< handle OCI errors />--\n\t}\n}\n```\n\n`F.class.php` implementation:\n\n```php\n<?php\nclass F\n{\n\tconst HTTP_SUCCESS=200;\n\tconst HTTP_WARNING=455;\n\tconst HTTP_ERROR=400;\n\n\tpublic static function response($response)\n\t{\n\t\techo CJSON::encode($response);\n\t}\n\n\tpublic static function resp($code=0,$message='',$content='')\n\t{\n\t\treturn F::response(['code'=>$code,'message'=>$message,'content'=>$content]);\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/cd826d178e7ca4908cef",
    "description": "Get image via AJAX then open it in new window/tab.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/cd826d178e7ca4908cef/raw/c047d3493c8001289011b8ae3c9215981b9e8fc9/image-ajax.md"
    ],
    "content": "Get image via AJAX then open it in new window/tab\n===\n\nCreate factory to get image via AJAX request:\n\n```javascript\n\tangular.module('App',['ngFileUpload'])\n\t\t.factory('Record',function($http){\n\t\t\treturn {\n\t\t\t\timgByHash:function(callback,hash){\n\t\t\t\t\t$http.post('/record/imgByHash',{h:hash},{responseType:'blob'}).success(callback);\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\t.controller('MyCtrl',function($scope,Record){\n\n\t\t\tvar file_hash='2aba4fe54408c46377edb7b771b86aae';\n\n\t\t\tRecord.imgByHash(function(resp){\n\t\t\t\tconsole.log('Response:',resp);\n\t\t\t\t$scope.file==resp; // resp is Blob object with proper Mime-type and size\n\t\t\t},file_hash);\n\n\t\t\t// open image in new window/tab\n\t\t\t$scope.openImgTab=function(){\n\t\t\t\t// if $scope.file is stream, then convert it to Blob\n\t\t\t\tvar blob=new Blob([$scope.file],{type:'image/jpeg'});\n\t\t\t\twindow.open(window.URL.createObjectURL(blob),'_blank');\n\t\t\t\t\n\t\t\t\t// if $scope.file is already Blob, just open it in new window/tab\n\t\t\t\twindow.open(window.URL.createObjectURL($scope.file),'_blank');\n\t\t\t}\n\n\t\t});\n```\n\nOn server side get image content from Oracle database as follows:\n\n```php\n<?php\nclass RecordController extends Controller\n{\n\n\tpublic function actionImgByHash()\n\t{\n\t\t// attachment - show file save modal window\n\t\t// inline - render file on page\n\t\t$disposition=Yii::app()->request->getParam('d')?'attachment':'inline';\n\t\t$file_hash  =Yii::app()->request->getParam('h');\n\n\t\tif($file_hash)\n\t\t{\n\t\t\t// odb - custom Yii component to work with Oracle DB via OCI\n\t\t\t$row=Yii::app()->odb->select('select url,mime_type,file_content from object_upload_documents t where t.file_hash=:hash',[':hash'=>$file_hash],true);\n\n\t\t\t// if OCI-Lob resource, then load content:\n\t\t\tif(isset($row['URL'],$row['MIME_TYPE'],$row['FILE_CONTENT']) && get_class($row['FILE_CONTENT'])=='OCI-Lob')\n\t\t\t{\n\t\t\t  // $row['URL'] file name without path\n\t\t\t\t// set headers\n\t\t\t\theader('Content-Type: '.$row['MIME_TYPE']);\n\t\t\t\theader('Content-Disposition: '.$disposition.';filename=\"'.$row['URL'].'\"');\n\t\t\t\theader('Cache-Control: max-age=0');\n\n\t\t\t\t// send content as response\n\t\t\t\tprint $row['FILE_CONTENT']->load();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nWe can use `imgByHash` directly in HTML:\n\n```html\n<!-- click button to open the image on new tab -->\n<a href=\"/record/imgByHash?h={{file_hash}}\" title=\"Open image\" target=\"_blank\" class=\"btn btn-xs btn-default\">\n\t<i class=\"fa fa-fw fa-picture-o\"></i>\n</a>\n<!-- click button to open file save modal window for the image -->\n<a href=\"/record/imgByHash?h={{file_hash}}&d=1\" title=\"Download\" target=\"_blank\" class=\"btn btn-xs btn-default\">\n\t<i class=\"fa fa-fw fa-download\"></i>\n</a>\n```\n\nUse `$scope.file` blob/file object loaded via AJAX with `ngFileUpload` as thumbnail:\n\n```html\n<img ngf-src=\"file\" class=\"img-thumbnail\">\n```"
  },
  {
    "html_url": "https://gist.github.com/95409fdbc53db75bed1f",
    "description": "Doridarmon API usage example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/95409fdbc53db75bed1f/raw/3d777c3a743fc575b738141c637b2a74def19d46/doridarmon-curl-example.md"
    ],
    "content": "Doridarmon API usage example\n===\n\n```html\n<?php\n\nclass DoriUz\n{\n\tconst BASE_URL='http://www.doridarmon.uz/api/';\n\n\tprotected $limit;\n\tprotected $page;\n\n\tfunction __construct($limit=20,$page=1)\n\t{\n\t\t$this->limit=$limit;\n\t\t$this->page =$page;\n\t}\n\n\tprotected function isJson($string)\n\t{\n\t\tjson_decode($string);\n\t\treturn (json_last_error()==JSON_ERROR_NONE);\n\t}\n\n\tpublic function search($name)\n\t{\n\t\t$result=[];\n\t\tif(isset($name))\n\t\t{\n\t\t\t$curl=curl_init();\n\t\t\t$url =self::BASE_URL.http_build_query([\n\t\t\t\t\t'R'     =>'search',\n\t\t\t\t\t'limit' =>$this->limit,\n\t\t\t\t\t'page'  =>$this->page,\n\t\t\t\t\t'search'=>$name,\n\t\t\t\t]);\n\n\t\t\tcurl_setopt_array($curl,[\n\t\t\t\tCURLOPT_URL           =>$url,\n\t\t\t\tCURLOPT_HTTPHEADER    =>['Content-Type: application/json; charset=utf-8'],\n\t\t\t\tCURLOPT_RETURNTRANSFER=>true,\n\t\t\t]);\n\t\t\t$result=curl_exec($curl);\n\n\t\t\tif(!$this->isJson($result))\n\t\t\t\treturn $result;\n\n\t\t\t$err=curl_error($curl);\n\t\t\tif($err)\n\t\t\t\treturn $err;\n\n\t\t\t$result=json_decode($result,true);\n\t\t}\n\t\treturn $result;\n\t}\n}\n\n$srv   =new DoriUz(10,1);\n$result=[];\nif(isset($_POST['name']))\n\t$result=$srv->search($_POST['name']);\n?>\n\n\t<form method=\"POST\">\n\t\t<label>Name</label>\n\t\t<input name=\"name\" class=\"form-control\" value=\"<?= $_POST['name']; ?>\">\n\t\t<button class=\"btn btn-primary\">Search</button>\n\t</form>\n\n<?php if(!empty($result)): ?>\n\n\t<?php if(isset($result['total'])): ?>\n\t\t<span>Found <?= $result['total']; ?> drug(s).</span>\n\t<?php endif; ?>\n\n\t<?php if(isset($result['data'])): ?>\n\t\t<table border=\"1\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Drug ID</th>\n\t\t\t\t\t<th>Drug Name</th>\n\t\t\t\t\t<th>Supplier</th>\n\t\t\t\t\t<th>Country</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<?php foreach($result['data'] as $rec): ?>\n\t\t\t\t\t<?php foreach($rec as $drug): ?>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><?= $drug['d_id']; ?></td>\n\t\t\t\t\t\t\t<td><?= $drug['drugname']; ?></td>\n\t\t\t\t\t\t\t<td><?= $drug['supplier']; ?></td>\n\t\t\t\t\t\t\t<td><?= $drug['country']; ?></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t<?php endforeach; ?>\n\t\t\t</tbody>\n\t\t</table>\n\t<?php endif; ?>\n<?php endif; ?>\n```"
  },
  {
    "html_url": "https://gist.github.com/71519c93d363f635b016",
    "description": "Access Form object from child scopes.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/71519c93d363f635b016/raw/619d0b32d8beb7f57f180a723be814c529cc989a/access-form-from-child-scope.md"
    ],
    "content": "Access Form object from child scopes\n===\n\nFirst solution: save parent scope in scope\n====\n\n```html\n<form name=\"form_rec\" ng-init=\"setFormScope(this)\" class=\"form-horizontal\" novalidate>\n\n\t<!-- can't access $scope.form_rec inside of parts -->\n\t<div ng-include=\"'/rec_general'\"></div>\n\t<div ng-include=\"'/rec_debtor'\"></div>\n\t<div ng-include=\"'/rec_creditor'\"></div>\n\t<div ng-include=\"'/rec_object'\"></div>\n\t<div ng-include=\"'/rec_desc'\"></div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-offset-10 col-sm-2\">\n\t\t\t<button ng-click=\"save()\" ng-disabled=\"form_rec.$invalid\" class=\"btn btn-block btn-success\">Save</button>\n\t\t</div>\n\t</div>\n</form>\n\n<script>\n\tangular.module('App',[])\n\t\t.controller('MyCtrl',function($scope){\n\t\t\t// save form scope\n\t\t\t$scope.setFormScope=function(scope){\n\t\t\t\t$scope.formScope=scope;\n\t\t\t\tconsole.log('form=',$scope.formScope.form_rec);\n\t\t\t}\n\n\t\t\t$scope.save=function(){\n\t\t\t\tvar form=$scope.formScope.form_rec // access form object\n\t\t\t\t// some complex logic...\n\t\t\t}\n\n\t\t});\n</script>\n```\n\nSecond solution: pass form object as parameter in submit function\n====\n\n```html\n<form name=\"form_rec\" class=\"form-horizontal\" novalidate>\n\n\t<!-- can't access $scope.form_rec inside of parts -->\n\t<div ng-include=\"'/rec_general'\"></div>\n\t<div ng-include=\"'/rec_debtor'\"></div>\n\t<div ng-include=\"'/rec_creditor'\"></div>\n\t<div ng-include=\"'/rec_object'\"></div>\n\t<div ng-include=\"'/rec_desc'\"></div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-offset-10 col-sm-2\">\n\t\t\t<button ng-click=\"save(form_rec)\" ng-disabled=\"form_rec.$invalid\" class=\"btn btn-block btn-success\">Save</button>\n\t\t</div>\n\t</div>\n</form>\n\n<script>\n\tangular.module('App',[])\n\t\t.controller('MyCtrl',function($scope){\n\t\t\t$scope.save=function(form){\n\t\t\t\t// access form object\n\t\t\t\tconsole.log('form=',form);\n\t\t\t\t// some complex logic...\n\t\t\t}\n\t\t});\n</script>\n```"
  },
  {
    "html_url": "https://gist.github.com/a026105adddab0a114b8",
    "description": "cURL example with proxy",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a026105adddab0a114b8/raw/051a32f8533bc80380e1c3a39dda2f6a4fb7927b/curl-proxy.md"
    ],
    "content": "cURL example with proxy\n===\n\n```php\n<?php\nfunction isJson($string)\n{\n\tjson_decode($string);\n\treturn (json_last_error()==JSON_ERROR_NONE);\n}\n\n$curl=curl_init();\ncurl_setopt_array($curl,[\n\tCURLOPT_URL           =>'http://www.doridarmon.uz/api/R=get_countries',\n\tCURLOPT_HTTPHEADER    =>['Content-Type: application/json; charset=utf-8'],\n\tCURLOPT_PROXY         =>'192.168.18.92:818',\n\tCURLOPT_RETURNTRANSFER=>true,\n]);\n$result=curl_exec($curl);\n\nif(!isJson($result))\n{\n\techo $result;\n\texit;\n}\n\n$err=curl_error($curl);\nif($err)\n{\n\techo $err;\n\texit;\n}\n\n$result=json_decode($result,true);\n?>\n<?php if(!empty($result)): ?>\n\t<table class=\"table table-bordered table-striped table-hover\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>ID</th>\n\t\t\t\t<th>Name</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<?php foreach($result as $res): ?>\n\t\t\t\t<tr>\n\t\t\t\t\t<td><?= $res['id']; ?></td>\n\t\t\t\t\t<td><?= $res['title']; ?></td>\n\t\t\t\t</tr>\n\t\t\t<?php endforeach; ?>\n\t\t</tbody>\n\t</table>\n<?php endif; ?>\n```"
  },
  {
    "html_url": "https://gist.github.com/42d378dc7d649c659a07",
    "description": "Generate random hash string in PHP",
    "files": [
      "https://gist.githubusercontent.com/umidjons/42d378dc7d649c659a07/raw/24a57398245ba86a13f4635c68b587255d5fc69c/random-hash-string-php.md"
    ],
    "content": "Generate random hash string in PHP\n===\n\n```php\n<?php\nfunction randHash($len=32)\n{\n\treturn substr(md5(openssl_random_pseudo_bytes(20)),-$len);\n}\n```\n\nExamples:\n```php\n<?php\necho randHash()  .'<br>'; // c700f7b818a7e9e41e7d04cdf5ec8245\necho randHash(20).'<br>'; // 9bfae7b4cd0f1a3fa571\necho randHash(50).'<br>'; // f359dd85479999ea7632210e8c07158a NOTE: max length = 32\n```"
  },
  {
    "html_url": "https://gist.github.com/c572446825b2d8300048",
    "description": "Application component to work with Oracle DB via OCI",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c572446825b2d8300048/raw/e1c2ef6f3b2ed15f1bb4b5dd8d067617388b41a5/yii-oci-component.md"
    ],
    "content": "Application component to work with Oracle DB via OCI\n===\n\nComponent implementation\n=====\n\n```php\n<?php\n\nclass EOciConnection extends CApplicationComponent\n{\n\tpublic $connectionString;\n\tpublic $username;\n\tpublic $password;\n\tpublic $charset;\n\tpublic $conn;\n\tpublic $stid;\n\tpublic $persistent;\n\n\tpublic function init()\n\t{\n\t\tif(!$this->persistent)\n\t\t\t$this->conn=oci_connect($this->username,$this->password,$this->connectionString,$this->charset);\n\t\telse\n\t\t\t$this->conn=oci_pconnect($this->username,$this->password,$this->connectionString,$this->charset);\n\t\treturn $this;\n\t}\n\n\tpublic function close()\n\t{\n\t\tif(!is_null($this->stid)) oci_free_statement($this->stid);\n\t\tif($this->conn) oci_close($this->conn);\n\t}\n\n\t/**\n\t * @param string $sql         SQL statement. Maybe with placeholders, such as :par1, :par2.\n\t * @param array  $params      parameters, such as [':par1'=>val1,':par2'=>val2].\n\t * @param bool   $fetch_first false-fetch all rows, true-fetch only first row.\n\t * @return array fetched rows.\n\t */\n\tpublic function select($sql,$params=[],$fetch_first=false,$fetch_mode=OCI_ASSOC)\n\t{\n\t\t$rows      =[];\n\t\t$this->stid=oci_parse($this->conn,$sql);\n\t\tif(!empty($params))\n\t\t\tforeach($params as $param_name=>$param_value)\n\t\t\t\toci_bind_by_name($this->stid,$param_name,$params[$param_name]);\n\t\toci_execute($this->stid);\n\t\tif($fetch_first)\n\t\t\t$rows=oci_fetch_array($this->stid,$fetch_mode);\n\t\telse\n\t\t\toci_fetch_all($this->stid,$rows,0,-1,OCI_FETCHSTATEMENT_BY_ROW+$fetch_mode);\n\t\treturn $rows;\n\t}\n\n\t/**\n\t * @param string $sql    SQL statement to execute\n\t * @param array  $params key/value pairs for simple parameters or array of parameters in [param-value,param-type,param-length,is-out-param] format.\n\t * @return array|bool\n\t */\n\tpublic function exec($sql,$params=[])\n\t{\n\t\t$outs      =[];\n\t\t$lobs      =[];\n\t\t$this->stid=oci_parse($this->conn,$sql);\n\t\tif(!empty($params))\n\t\t\tforeach($params as $param_name=>$param_value)\n\t\t\t\tif(is_array($param_value))\n\t\t\t\t{\n\t\t\t\t\tlist($value,$param_type,$param_length,$is_out)=$param_value;\n\t\t\t\t\tif($param_type==OCI_B_CLOB && !$is_out)\n\t\t\t\t\t{\n\t\t\t\t\t\t$lobs[$param_name]=oci_new_descriptor($this->conn,OCI_DTYPE_LOB);\n\t\t\t\t\t\t$lobs[$param_name]->setBuffering(false);\n\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$lobs[$param_name],-1,OCI_B_CLOB);\n\t\t\t\t\t\t$lobs[$param_name]->writetemporary($value);\n\t\t\t\t\t}\n\t\t\t\t\telseif($param_type==OCI_B_BLOB && !$is_out)\n\t\t\t\t\t{\n\t\t\t\t\t\t$lobs[$param_name]=oci_new_descriptor($this->conn,OCI_DTYPE_LOB);\n\t\t\t\t\t\t$lobs[$param_name]->setBuffering(false);\n\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$lobs[$param_name],-1,OCI_B_BLOB);\n\t\t\t\t\t\t$lobs[$param_name]->writetemporary($value,OCI_TEMP_BLOB);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif($is_out)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$value_name=trim($param_name,':');\n\t\t\t\t\t\t\tif($param_type==OCI_B_CLOB || $param_type==OCI_B_BLOB)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$$value_name=oci_new_descriptor($this->conn,OCI_DTYPE_LOB);\n\t\t\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$$value_name,-1,$param_type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$$value_name,$param_length>0?$param_length:-1,$param_type);\n\t\t\t\t\t\t\t$outs[$value_name]='';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$value,$param_length>0?$param_length:-1,$param_type);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse oci_bind_by_name($this->stid,$param_name,$params[$param_name]);\n\t\t$res_875785785_fhfhj=oci_execute($this->stid,OCI_NO_AUTO_COMMIT);\n\t\tif(!empty($outs))\n\t\t{\n\t\t\tforeach($outs as $name=>$val)\n\t\t\t\tif(gettype($$name)==\"object\" && get_class($$name)=='OCI-Lob')\n\t\t\t\t\t$outs[$name]=$$name->load();\n\t\t\t\telse\n\t\t\t\t\t$outs[$name]=$$name;\n\t\t\treturn $outs;\n\t\t}\n\t\treturn $res_875785785_fhfhj;\n\t}\n\n\t/**\n\t * Executes SQL statements which return sys_refcursor object.\n\t * @param string $sql    SQL statement to execute\n\t * @param array  $params key/value pairs for simple parameters or array of parameters in [param-value,param-type,param-length,is-out-param] format.\n\t * @return array if there is OUT parameters, then returns ['rows'=>[...],'outs'=>[...]] array, otherwise returns cursor rows.\n\t */\n\tpublic function cursor($sql,$params=[])\n\t{\n\t\t$this->stid=oci_parse($this->conn,$sql);\n\t\tif(!empty($params))\n\t\t{\n\t\t\t$idx=0;\n\t\t\tforeach($params as $param_name=>$param_value)\n\t\t\t{\n\t\t\t\tif(!$idx)\n\t\t\t\t{\n\t\t\t\t\t$cur=oci_new_cursor($this->conn);\n\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$cur,-1,OCI_B_CURSOR);\n\t\t\t\t}\n\t\t\t\telseif(is_array($param_value))\n\t\t\t\t{\n\t\t\t\t\tlist($value,$param_type,$param_length,$is_out)=$param_value;\n\t\t\t\t\tif($param_type==OCI_B_CLOB)\n\t\t\t\t\t{\n\t\t\t\t\t\t$clob=oci_new_descriptor($this->conn,OCI_DTYPE_LOB);\n\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$clob,-1,OCI_B_CLOB);\n\t\t\t\t\t\t$clob->writetemporary($value);\n\t\t\t\t\t}\n\t\t\t\t\telseif($param_type==OCI_B_BLOB)\n\t\t\t\t\t{\n\t\t\t\t\t\t$blob=oci_new_descriptor($this->conn,OCI_DTYPE_LOB);\n\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$blob,-1,OCI_B_BLOB);\n\t\t\t\t\t\t$blob->writetemporary($value,OCI_TEMP_BLOB);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif($is_out)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$value_name=trim($param_name,':');\n\t\t\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$$value_name,$param_length>0?$param_length:-1,$param_type);\n\t\t\t\t\t\t\t$outs[$value_name]='';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse oci_bind_by_name($this->stid,$param_name,$value,$param_length>0?$param_length:-1,$param_type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\toci_bind_by_name($this->stid,$param_name,$params[$param_name]);\n\t\t\t\t++$idx;\n\t\t\t}\n\t\t\toci_execute($this->stid,OCI_NO_AUTO_COMMIT);\n\t\t\tif(!empty($outs))\n\t\t\t{\n\t\t\t\tforeach($outs as $name=>$val)\n\t\t\t\t\tif(gettype($$name)==\"object\" && get_class($$name)=='OCI-Lob')\n\t\t\t\t\t\t$outs[$name]=$$name->load();\n\t\t\t\t\telse\n\t\t\t\t\t\t$outs[$name]=$$name;\n\t\t\t}\n\t\t\toci_execute($cur);\n\t\t\toci_fetch_all($cur,$rows,0,-1,OCI_FETCHSTATEMENT_BY_ROW+OCI_ASSOC);\n\t\t\tif(!empty($outs))\n\t\t\t\treturn ['rows'=>$rows,'outs'=>$outs];\n\t\t}\n\t\treturn $rows;\n\t}\n\n\tpublic function commit()\n\t{\n\t\toci_commit($this->conn);\n\t}\n\n\tpublic function rollback()\n\t{\n\t\toci_rollback($this->conn);\n\t}\n}\n```\n\nConfigure components\n=====\n\n```php\n<?php\nreturn [\n\t// ...\n\t// application components\n\t'components'=>[\n\t\t'db' =>[ // PDO for Oracle\n\t\t\t'class'                =>'CDbConnection',\n\t\t\t'connectionString'     =>'oci:dbname=mydb;charset=AL32UTF8',\n\t\t\t'username'             =>'myuser',\n\t\t\t'password'             =>'mypass',\n\t\t\t'schemaCachingDuration'=>600,\n\t\t\t'enableParamLogging'   =>true,\n\t\t\t'enableProfiling'      =>true, // enable profiling for DB\n\t\t\t'attributes'           =>[\n\t\t\t\tPDO::ATTR_CASE      =>PDO::CASE_NATURAL,\n\t\t\t\tPDO::ATTR_PERSISTENT=>true\n\t\t\t],\n\t\t\t'initSQLs'             =>[\n\t\t\t\t'ALTER SESSION SET NLS_DATE_FORMAT=\"DD.MM.YYYY HH24:MI:SS\"',\n\t\t\t],\n\t\t],\n\t\t'odb'=>[ // OCI for Oracle\n\t\t\t'class'           =>'EOciConnection',\n\t\t\t'connectionString'=>'mydb',\n\t\t\t'username'        =>'myuser',\n\t\t\t'password'        =>'mypass',\n\t\t\t'charset'         =>'AL32UTF8',\n\t\t\t'persistent'      =>true,\n\t\t],\n\t\t'sdb'=>[ // PDO for SQLite\n\t\t\t'class'           =>'CDbConnection',\n\t\t\t'connectionString'=>'sqlite:'.dirname(__FILE__).'/../data/mydb.db',\n\t\t],\n\t],\n\t// ...\n];\n```\n\nUsage examples\n=====\n\nSelect rows:\n```php\n<?php\n$rows=Yii::app()->odb->select(\"select msg from tbl_messages where id=:Id\",[':Id'=>$_POST['id']]);\necho $rows[2]['MSG']; // 3rd row MSG column\n```\n\nSelect first row only:\n```php\n<?php\n$row=Yii::app()->odb->select(\"select msg from tbl_messages where id=:Id\",[':Id'=>$_POST['id']],true);\necho $row['MSG']; // first row MSG column\n```\n\nSend BLOB/CLOB into DB:\n```php\n<?php\n$file_content=file_get_contents($_FILES['file']['tmp_name'][0]);\n$res         =Yii::app()->odb->exec('begin mypkg.uploadFile(:pObjectID,:pFileHash,:pContent); end;',[\n\t':pObjectID'=>$obj_id,\n\t':pFileHash'=>$file_hash,\n\t':pContent' =>[$file_content,OCI_B_BLOB,-1,false],\n]);\n```\n\nRead BLOB/CLOB from DB:\n```php\n$row=Yii::app()->odb->select('select mime_type,file_content from tbl_uploads where upl_id=:upl',[':upl'=>315119582699],true);\nif(isset($row['FILE_CONTENT']))\n{\n\t// set content type\n\theader('Content-Type:'.$row['MIME_TYPE']);\n\t// if Lob resource, then read it and print out\n\tif(get_class($row['FILE_CONTENT'])=='OCI-Lob')\n\t\techo $row['FILE_CONTENT']->load();\n}\n```\n\nGet OUT BLOB/CLOB from DB:\n```php\n<?php\n// encode model attributes as JSON\n$json=json_encode($model->attributes,JSON_UNESCAPED_SLASHES|JSON_UNESCAPED_UNICODE);\n$outs=Yii::app()->odb->exec('BEGIN :outRes := MYPKG.ADD(:pUser,:pData); END;',[\n\t':outRes'=>[null,SQLT_CLOB,-1,true], // OUT CLOB parameter\n\t':pUser' =>Yii::app()->user->id,\n\t':pData' =>[$json,OCI_B_CLOB,strlen($json),false], // IN CLOB parameter\n]);\n\n// get OUT parameter and decode JSON as associative array\nif(isset($outs['outRes']))\n{\n\t$result=json_decode($outs['outRes'],true);\n\techo '<pre>'.print_r($result,true).'</pre>';\n}\n```\nExecute function with return type `SYS_REFCURSOR`:\n```php\n<?php\nfunction cursorTest()\n{\n\t$res=Yii::app()->odb->cursor(\"begin :res:=mypkg.cursor_rows(:inParam1); end;\",[\n\t\t':res'     =>null,\n\t\t':inParam1'=>123,\n\t]);\n\treturn $res; // $res contains rows returned by function, no $res['outs'] and no $res['rows']\n}\n```\n\nExecute function with return type `SYS_REFCURSOR`, also `outTotalCount` is `OUT` parameter:\n```php\n<?php\nfunction cursorTest()\n{\n\t$totalCount=0;\n\t$res       =Yii::app()->odb->cursor(\"begin :res:=mypkg.cursor_rows(:inParam1,:outTotalCount); end;\",[\n\t\t':res'          =>null,\n\t\t':inParam1'     =>123,\n\t\t':outTotalCount'=>[$totalCount,SQLT_CHR,10,true],\n\t]);\n\t\n\t// $res['rows'] - contains rows returned by function\n\t// $res['outs'] - contains out parameters with values\n\t\n\techo 'Total Count:',$totalCount,\"\\n\"; // total count\n\tprint_r($res['rows']); // returned rows from function\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/30a13359d2086b63c633",
    "description": "Determine language from URL and set language as prefix to the all requests in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/30a13359d2086b63c633/raw/bdd2233a8853c7e2df5e789801d2f95299bbbf85/request-language-angular.md"
    ],
    "content": "Determine language from URL and set language as prefix to the all requests in AngularJS\n===\n\nThis implementation is not ideal, does not take into account for example when language specified as `http://mydomain.uz/ru` without `/` at the end.\n\n```javascript\n\tangular.module('MyApp',[])\n\t\t.config(function($httpProvider){\n\t\t\t$httpProvider.interceptors.unshift(function($q,Lang){\n\t\t\t\treturn {\n\t\t\t\t\trequest:function(config){\n\t\t\t\t\t\t// ignore list, that won't be overriden\n  \t\t\t\t\tvar exceptions=['datepicker/datepicker.tpl.html'];\n  \t\t\t\t\tif(exceptions.indexOf(config.url)=== -1)\n  \t\t\t\t\t\tconfig.url=Lang.setUrlLang(config.url); // if in the requests language not specified, set it \n\t\t\t\t\t\treturn config || $q.when(config);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t})\n\t\t.run(function($location,$rootScope){\n\t\t\t// when application loaded, determine language according to the URL\n\t\t\tvar path=$location.path(),\n\t\t\t\tre=/^\\/(en|ru|uz_latn|uz)\\//,\n\t\t\t\tres=re.exec(path),\n\t\t\t\tlang=angular.isDefined(res[1])?res[1]:'ru';\n\t\t\t$rootScope.app_lang=lang;\n\t\t})\n\t\t.factory('Lang',function($rootScope){\n\t\t\treturn {\n\t\t\t\tRU        :0,\n\t\t\t\tUZ        :1,\n\t\t\t\tUZ_LATN   :2,\n\t\t\t\tEN        :3,\n\t\t\t\tsetUrlLang:function(url){\n\t\t\t\t\t// set or override language in the given URL\n\t\t\t\t\tvar re=/^\\/(en|ru|uz|uz_latn)\\//,pfx='/'+$rootScope.app_lang;\n\t\t\t\t\tif(url.match(re)) url=url.replace(re,pfx+'/');\n\t\t\t\t\telse url=pfx+url;\n\t\t\t\t\treturn url;\n\t\t\t\t}\n\t\t\t};\n\t\t})\n\t\t.factory('MySrv',function($http){\n\t\t\treturn {\n\t\t\t\t// URL of the all services will be prefixed with the application language\n\t\t\t\tgroups    :function(callback){$http.post('/admin/ajax/provisionGroup').success(callback);},  // /ru/admin/ajax/provisionGroup \n\t\t\t\tprovisions:function(callback){$http.post('/admin/ajax/provisionList').success(callback);},   // /ru/admin/ajax/provisionList\n\t\t\t\toptions   :function(callback){$http.post('/admin/ajax/provisionOptions').success(callback);} // /ru/admin/ajax/provisionOptions\n\t\t\t};\n\t\t});\n```"
  },
  {
    "html_url": "https://gist.github.com/3c983008126a9ff26533",
    "description": "EOL to <br> filter in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/3c983008126a9ff26533/raw/41a6b8878c95cfda73b7b6a17d80d32db9cd8643/eol-nl-endofline-to-br.md"
    ],
    "content": "EOL to <br> filter in AngularJS\n===\n\nFilter implementation:\n\n```javascript\n\tangular.module('MyApp',[])\n\t\t.filter('nl2br',function(){\n\t\t\treturn function(input,replace){\n\t\t\t\treplace=angular.isDefined(replace) && angular.isString(replace)?replace:'<br>';\n\t\t\t\treturn angular.isDefined(input) && angular.isString(input)?input.replace(/(\\r\\n|\\n|\\r)/gm,replace):input;\n\t\t\t}\n\t\t})\n\t\t.controller('MyCtrl',function($scope){\n\t\t\t$scope.my_string='Hello\\r\\nWorld!\\r\\n\\r\\n';\n\t\t});\n```\n\nUsing:\n```html\n<span ng-bind-html=\"my_string | nl2br\"></span>\n```"
  },
  {
    "html_url": "https://gist.github.com/f9c78648b215a01d4017",
    "description": "Unquote string in JavaScript, filter for AngularJS.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f9c78648b215a01d4017/raw/4b23a842cb2e6fab25937f7de2422aac21000ac0/unquote-string.md"
    ],
    "content": "Unquote string in JavaScript, filter for AngularJS.\n===\n\nUnquote filter in AngularJS:\n\n```javascript\nangular.module('app',[])\n.filter('unquote',function(){\n\t\treturn function(input){\n\t\t\treturn angular.isDefined(input) && angular.isString(input)?input.replace(new RegExp('\\\\\\\\\"','g'),'\"'):input;\n\t\t}\n\t})\n\t.controller('MyCtrl',function($scope){\n\t  $scope.my_string='\\\"Test string\\\" \\\"Проверка кириллицами\\\"';\n\t});\n```\n\nUsing in HTML\n```html\n<span>{{ my_string | unquote }}</span>\n```"
  },
  {
    "html_url": "https://gist.github.com/793c503b11fcfac47233",
    "description": "Angular UI-Select: Array of objects with single property binding",
    "files": [
      "https://gist.githubusercontent.com/umidjons/793c503b11fcfac47233/raw/dfd238f46c0f134e7bace18b3138dc554415a840/angular-ui-select-multiple.md"
    ],
    "content": "Angular UI-Select: Array of objects with single property binding\n===\n\nArray of role objects:\n```js\n$scope.roles=[\n\t{\n\t\t\"name\"       :\"superAdministrator\",\n\t\t\"description\":\"All privileges available\"\n\t},\n\t{\n\t\t\"name\"       :\"siteModerator\",\n\t\t\"description\":\"Moderator of the site\"\n\t},\n\t{\n\t\t\"name\"       :\"registrar\",\n\t\t\"description\":\"Register applications\"\n\t}\n];\n```\n\nSet dependencies and default settings:\n```js\nangular.module('MyApp',['ngSanitize','ui.select'])\n\t.config(function(uiSelectConfig){\n\t\tuiSelectConfig.theme='bootstrap';\n\t\tuiSelectConfig.resetSearchInput=true;\n\t});\n```\n\nPut `ui-select` on the page:\n```html\n<div class=\"form-group\">\n\t<div class=\"col-sm-12\">\n\t\t<label class=\"req\">Roles</label>\n\t\t\n\t\t<ui-select ng-model=\"user.assigned_roles\" multiple>\n\t\t\t<ui-select-match placeholder=\"select\">{{$item.name}}</ui-select-match>\n\t\t\t<ui-select-choices repeat=\"role.name as role in roles | filter:{name:$select.search}\">\n\t\t\t\t<div ng-bind-html=\"role.name | highlight: $select.search\"></div>\n\t\t\t\t<small>{{role.description}}</small>\n\t\t\t</ui-select-choices>\n\t\t</ui-select>\n\t\t\n\t</div>\n</div>\n```\n\nSet default selected values:\n```js\nangular.module('MyApp')\n.controller('UserCtrl',function($scope){\n\t$scope.user={assigned_roles:['registrar']};\n});\n```\n\nIf you have issue with control height (selected items on the first line, search input on the second line),\nthen set this CSS fix:\n```css\n.ui-select-match{ position:absolute; }\n```"
  },
  {
    "html_url": "https://gist.github.com/55833f44a9f77879b1a0",
    "description": "Get query/search params in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/55833f44a9f77879b1a0/raw/ad6285905525ed103147b4289238e9d537ff127e/query-search-params.md"
    ],
    "content": "Get query/search params in AngularJS\n===\n\nURL is this:\n```\nhttp://mysite.bla/index.php?param1=value1&param2=value2\n```\n\nHere is how to get value of the query parameters:\n\n```javascript\nangular.module('MyApp',[])\n\t.config(function($locationProvider){\n\t\t$locationProvider.html5Mode({\n\t\t\tenabled    :true,\n\t\t\trequireBase:false\n\t\t});\n\t})\n\t.controller('MyCtrl',function($scope,$location){\n\t  $scope.param1=$location.search().param1;\n\t  $scope.param2=$location.search()['param2'];\n\t});\n```"
  },
  {
    "html_url": "https://gist.github.com/d96b4bd85bea530948c2",
    "description": "Duplicate character, that not followed other character",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d96b4bd85bea530948c2/raw/4782673c725ee2af32628fc6215b7fd1230bd301/duplicate-character-backslash.md"
    ],
    "content": "Duplicate character, that not followed other character\n===\n\nDuplicate all slashes that not followed by quote.\n\nExample:\n\n`\\` should become `\\\\`\n\n`\\\"` should not changed.\n\n```php\n<?php\n// \\ -> \\\\ (duplicated), but \\\" -> \\\" (not changed)\n$str='one\\two\\\"three\\\"four\\five';\necho $str.\"<br>\";\n$str=preg_replace(\"/\\\\\\\\([^\\\"])/m\",\"\\\\\\\\\\\\\\\\$1\",$str); // 'one\\two\\\"three\\\"four\\five' -> 'one\\\\two\\\"three\\\"four\\\\five'\necho $str;\n```"
  },
  {
    "html_url": "https://gist.github.com/b81e383582bf6ad09ec1",
    "description": "Connect to Oracle DB in PHP script from crontab",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b81e383582bf6ad09ec1/raw/d0930590dbad0dcbb35acd81bd99b8190cb9826f/php-from-cron-oracle.md"
    ],
    "content": "Connect to Oracle DB in PHP script from crontab\n===\n\nConfigure environment variables\n```bash\n#!/bin/bash\n\n# User specific environment and startup programs\nexport ORACLE_BASE=/usr/lib/oracle/11.2\nexport ORACLE_HOME=$ORACLE_BASE/client\nexport TNS_ADMIN=$ORACLE_HOME/network\nexport NLS_LANG=AMERICAN_AMERICA.AL32UTF8\nexport NLS_DATE_FORMAT=\"DD.MM.YYYY HH24:MI:SS\"\nexport PATH=$PATH:$ORACLE_HOME/bin\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib\n\nPATH=$PATH:$HOME/bin:$ORACLE_HOME/bin\nexport PATH\n```\n\nUse script in other scripts\n```bash\n#!/bin/bash\n\nJOBS_PATH=/u01/project/local/jobs\n\n# initialize environment\nsource $JOBS_PATH/Config.sh\n\n# run task\n/usr/bin/php -f $JOBS_PATH/src/MailSender.php >> $JOBS_PATH/log/MailSender.log 2>&1\n```"
  },
  {
    "html_url": "https://gist.github.com/cfea8fdbd14673fd7d32",
    "description": "Remove duplicated row leaving only unique one. Original blog is here http://viralpatel.net/blogs/deleting-duplicate-rows-in-oracle/",
    "files": [
      "https://gist.githubusercontent.com/umidjons/cfea8fdbd14673fd7d32/raw/c8ef1f7b9083a826c154964abf481e7d0d101f18/remove-duplicate-rows.md"
    ],
    "content": "Remove duplicated row leaving only unique one\n===\n\nVersion #1.\n```sql\ndelete from MyTable a where rowid<(select max(rowid) from MyTable b where a.ID = b.ID)\n```\n\nVersion #2.\n```sql\n-- remove duplicate rows from table\n-- in the declaration_creditor table only one row should be exist by declaration_code\nDELETE FROM declaration_creditor\nWHERE ROWID IN (\n  SELECT rid FROM (\n    SELECT ROWID rid, ROW_NUMBER() OVER(PARTITION BY t.declaration_code ORDER BY ROWID) rn\n    FROM declaration_creditor t)\nWHERE rn <> 1);\n```"
  },
  {
    "html_url": "https://gist.github.com/9813d28a3a7537429d1b",
    "description": "Guzzle example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9813d28a3a7537429d1b/raw/a827e017678c377ac05a05d158e43b1d86ee2511/guzzle-example.md"
    ],
    "content": "Guzzle example\n===\n\n```php\n<?php\nrequire_once('guzzle/autoloader.php');\n\nuse GuzzleHttp\\Client;\n\n$client=new Client([\n\t'base_url'=>'https://11.16.53.79:4009/iservices/wsgnkapi',\n\t'defaults'=>[\n\t\t'auth'      =>['user1','mypass','basic'],\n\t\t'stream'    =>false,\n\t\t'verify'    =>false,\n\t\t'exceptions'=>false,\n\t]\n]);\n\n$res =$client->get('?PARAMS={\"action\":\"get_Recvisits\",\"tin\":\"1234567\"}');\n$body=$res->getBody();\necho $body->getContents();\n```\n\nResponse\n```json\n{\"err_code\":\"0\",\"err_text\":\"ok\",\"root\":[{\"region\":\"New York\",\"sost\":\"active\",\"district\":\"NY\",\"aname\":\"John Doe\"}]}\n```"
  },
  {
    "html_url": "https://gist.github.com/2bdf56234fe110048c8a",
    "description": "Count down custom directive",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2bdf56234fe110048c8a/raw/971ee7a226a47b1f4b49202efe8fde224af62fe6/count-down-custom-directive.md"
    ],
    "content": "Count down custom directive\n===\n\nImplementation:\n\n```javascript\nangular.module('MyApp',[])\n.directive('countdown',function($interval){\n\t\t/**\n\t\t * cdAttr      - variable name from scope, changed on every tick.\n\t\t * cdValue     - countdown value, e.g.: 10 - means 10 sec.\n\t\t * cdInterval  - value or variable from scope in milliseconds. (0-stop, interval>0 start).\n\t\t * cdInc       - decrease countdown value by this value (or variable from scope).\n\t\t * cdFinFn     - callback function name from scope that will be called on countdown finish.\n\t\t *\n\t\t * Example:\n\t\t * <countdown cd-attr=\"countdown_tick\" cd-value=\"60\" cd-interval=\"1000\" cd-inc=\"1\" cd-fin-fn=\"refreshGraph\">{{countdown_tick}}</countdown>\n\t\t */\n\t\tvar iv=null;\n\t\treturn {\n\t\t\trestrict:'EA',\n\t\t\tlink    :function(scope,elem,attrs){\n\t\t\t\tscope[attrs.cdAttr]=$.isNumeric(attrs.cdValue)?attrs.cdValue*1:scope.$eval(attrs.cdValue)*1;\n\t\t\t\tvar start=function(){\n\t\t\t\t\tscope[attrs.cdAttr]=(scope[attrs.cdAttr]*1)-(scope.$eval(attrs.cdInc)*1); // decrease counter value of the countdown\n\t\t\t\t\tif(scope[attrs.cdAttr]<=0){                                               // check, whether countdown has been finished\n\t\t\t\t\t\tif(angular.isFunction(scope[attrs.cdFinFn]))                            // if finish callback set, then call it\n\t\t\t\t\t\t\tscope[attrs.cdFinFn]();\n\t\t\t\t\t\tscope[attrs.cdAttr]=scope.$eval(attrs.cdValue)*1;                       // reset initial value of the counter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tscope.$watch(attrs.cdInterval,function(newIntervalVal){\n\t\t\t\t\tif(iv!==null) $interval.cancel(iv);                                       // anyway stop timer\n\t\t\t\t\tif((newIntervalVal*1)==0) iv=null;                                        // if interval is falsy, then pause it.\n\t\t\t\t\telse iv=$interval(start,angular.isDefined(scope.$eval(attrs.cdInterval))?scope.$eval(attrs.cdInterval)*1:def.interval);                 // if truth interval, then start a timer.}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t})\n\t.controller('MyCtrl',function($scope,Methods,$http){\n\t\t$scope.countdown=100;    // start value\n\t\t$scope.countdown_tick=0; // count down from 100 to 0\n\t\t$scope.interval=2000;    // every 2 seconds\n\t\t$scope.dec=2;\n\t\t$scope.fntest=function(){\n\t\t\tconsole.log('fn test called');\n\t\t}\n\t\t$scope.myFunc=function(){\n\t\t\tconsole.log('My function called');\n\t\t}\n\t});\n```\n\nUsing example:\n\n```html\n\t<countdown cd-attr=\"countdown_tick\" cd-value=\"countdown\" cd-interval=\"interval\" cd-inc=\"dec\" cd-fin-fn=\"fntest\">{{countdown_tick}}</countdown>\n\t<countdown cd-attr=\"tickRefresh\" cd-value=\"60\" cd-interval=\"1000\" cd-inc=\"1\" cd-fin-fn=\"myFunc\"></countdown>\n\t<span class=\"label label-success\">{{tickRefresh}}</span>\n```"
  },
  {
    "html_url": "https://gist.github.com/dbab0c4753571c805313",
    "description": "Loading indicator directive. Directive styling, template examples.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/dbab0c4753571c805313/raw/5746d0f0a8922c2f0c24a734b779ae39e2286708/loading-indicator.md"
    ],
    "content": "Loading indicator directive\n===\n\n```javascript\nangular.module('MyApp',[])\n.directive('loading',function($http,$rootScope){\n\t\treturn {\n\t\t\trestrict:'E',\n\t\t\tlink    :function(scope,elem,attrs,ctrl){\n\t\t\t\t$rootScope.inProgress=true;\n\t\t\t\tangular.element(document).find('head').prepend('<style type=\"text/css\">.loading-indicator{z-index:9999;position:fixed;top:60px;right:20px;color:#7e8fe5;}</style>');\n\t\t\t\tscope.isLoading=function(){return $http.pendingRequests.length>0;};\n\t\t\t\tscope.$watch(scope.isLoading,function(loading){\n\t\t\t\t\t$rootScope.inProgress=loading;\n\t\t\t\t});\n\t\t\t},\n\t\t\ttemplate:'<i ng-show=\"inProgress\" class=\"loading-indicator fa fa-spinner fa-pulse fa-3x\"></i>'\n\t\t};\n\t})\n```\n\nLoading indicator directive (old version)\n===\n\nConfigure interceptors to broadcast events.\nIn directive listen these events & show/hide indicator.\n\n```javascript\nangular.module('MyApp',[])\n\t.config(function($httpProvider){\n\t\t$httpProvider.interceptors.unshift(function($q,$rootScope,toaster){\n\t\t\treturn {\n\t\t\t\trequest      :function(config){\n\t\t\t\t\t$rootScope.$broadcast('loadingStart');\n\t\t\t\t\treturn config || $q.when(config);\n\t\t\t\t},\n\t\t\t\tresponse     :function(response){\n\t\t\t\t\t$rootScope.$broadcast('loadingEnd');\n\t\t\t\t\treturn response || $q.when(response);\n\t\t\t\t},\n\t\t\t\tresponseError:function(response){\n\t\t\t\t\t$rootScope.$broadcast('loadingEnd');\n\t\t\t\t\treturn $q.reject(response);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t})\n\t.directive('loading',function(){\n\t\treturn {\n\t\t\trestrict:'E',\n\t\t\tlink    :function(scope,elem,attrs,ctrl){\n\t\t\t\tscope.inProgress=false;\n\t\t\t\tangular.element(document).find('head').prepend('<style type=\"text/css\">.loading-indicator{z-index:9999;position:fixed;top:60px;right:20px;color:#7e8fe5;}</style>');\n\t\t\t\tscope.$on('loadingStart',function(){scope.inProgress=true;});\n\t\t\t\tscope.$on('loadingEnd',function(){scope.inProgress=false;});\n\t\t\t},\n\t\t\ttemplate:'<i ng-show=\"inProgress\" class=\"loading-indicator fa fa-spinner fa-pulse fa-3x\"></i>'\n\t\t};\n\t});\n```\n\nUsing directive:\n```html\n<loading></loading>\n```"
  },
  {
    "html_url": "https://gist.github.com/352da2a4209691d425d4",
    "description": "Export HTML table to Excel in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/352da2a4209691d425d4/raw/33b5874d0b9e0c7056183b1c5d4282ead6f81432/export-html-table-to-excel.md"
    ],
    "content": "Export HTML table to Excel in AngularJS\n===\n\n```javascript\nmyApp.factory('Excel',function($window){\n\t\tvar uri='data:application/vnd.ms-excel;base64,',\n\t\t\ttemplate='<html xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',\n\t\t\tbase64=function(s){return $window.btoa(unescape(encodeURIComponent(s)));},\n\t\t\tformat=function(s,c){return s.replace(/{(\\w+)}/g,function(m,p){return c[p];})};\n\t\treturn {\n\t\t\ttableToExcel:function(tableId,worksheetName){\n\t\t\t\tvar table=$(tableId),\n\t\t\t\t\tctx={worksheet:worksheetName,table:table.html()},\n\t\t\t\t\thref=uri+base64(format(template,ctx));\n\t\t\t\treturn href;\n\t\t\t}\n\t\t};\n\t})\n\t.controller('MyCtrl',function(Excel,$timeout){\n\t  $scope.exportToExcel=function(tableId){ // ex: '#my-table'\n\t\t\t$scope.exportHref=Excel.tableToExcel(tableId,'sheet name');\n\t\t\t$timeout(function(){location.href=$scope.fileData.exportHref;},100); // trigger download\n\t\t}\n\t});\n```\n\nHow to use:\n```html\n\t<button class=\"btn btn-link\" ng-click=\"exportToExcel('#table1')\">\n\t\t<span class=\"glyphicon glyphicon-share\"></span> Export to Excel\n\t</button>\n```"
  },
  {
    "html_url": "https://gist.github.com/35d2c1aa9504b9d41ff5",
    "description": "Whitelist href='unsafe:data:*'",
    "files": [
      "https://gist.githubusercontent.com/umidjons/35d2c1aa9504b9d41ff5/raw/e7ddf8eb58a12bba0e115a2917d74872dcef769a/unsafe-whitelist.md"
    ],
    "content": "Whitelist href='unsafe:data:*'\n===\n\n```js\nmyApp.config(function($compileProvider){\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|file|data):/);\n\t})\n```"
  },
  {
    "html_url": "https://gist.github.com/0beca6b92f4f437af169",
    "description": "TimestampBehavior in Yii2",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0beca6b92f4f437af169/raw/e91b41e60d8c438d7edfbb56e1a4debc8747adbe/timestamp-behavior-yii2.md"
    ],
    "content": "TimestampBehavior in Yii2\n===\nAdd usage statement:\n```php\n<?php\nuse yii\\behaviors\\TimestampBehavior;\n```\n\nAdd this code into model:\n```php\n<?php\npublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'timestamp'=>[\n\t\t\t\t'class'     =>TimestampBehavior::className(),\n\t\t\t\t'attributes'=>[\n\t\t\t\t\tActiveRecord::EVENT_BEFORE_INSERT=>['conf_date','conf_date'],\n\t\t\t\t\tActiveRecord::EVENT_BEFORE_UPDATE=>'conf_date',\n\t\t\t\t],\n\t\t\t],\n\t\t];\n\t}\n```\n\nUse in controller like this:\n```php\n<?php\n$model=new SettingHistory();\n$model->conf_value=123;\n$model->touch('conf_date'); // init conf_date with timestamp value\n$model->save();\n```"
  },
  {
    "html_url": "https://gist.github.com/c564891bdf8f8ae1366c",
    "description": "Transaction example in Yii2",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c564891bdf8f8ae1366c/raw/090561dd9d034fb387db09e53e8469464b0ab011/yii2-transaction.md"
    ],
    "content": "Transaction example in Yii2\n===\n\n```php\n<?php\npublic function actionSave()\n{\n    $set=Yii::$app->request->post('Setting');\n    if(isset($set['id']))\n    {\n        Yii::$app->db->transaction(function (Connection $db) use ($set)\n        {\n            $model    =$this->findModel($set['id']);\n            $old_model=clone $model;\n            if(isset($set['conf_value'])) $model->conf_value=$set['conf_value'];\n            if(isset($set['status'])) $model->status=$set['status'];\n            if($old_model->conf_value!=$model->conf_value || $old_model->status!=$model->status)\n            {\n                $user_id=Yii::$app->user->isGuest?1:Yii::$app->user->id; // #todo: remove guest after RBAC implementation\n                $db->createCommand()->update(Setting::tableName(),['conf_value'=>$model->conf_value,'status'=>$model->status],['id'=>$model->id])->execute();\n                $db->createCommand()->insert(SettingHistory::tableName(),[\n                    'conf_id'    =>$old_model->id,\n                    'conf_value' =>$old_model->conf_value,\n                    'conf_status'=>$old_model->status,\n                    'conf_date'  =>new Expression('NOW()'),\n                    'user_id'    =>$user_id,\n                ])->execute();\n                F::resp(200,'Saved!');\n            }\n            else F::resp(200,'Nothing changed.');\n        });\n    }\n    else F::resp(404,'Setting not found.');\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/9c7dea4132ee342b19a2",
    "description": "MySQL stored function example, raise error on MySQL routine.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9c7dea4132ee342b19a2/raw/8b01779a0e83fc8071d763a7afaf3adb184eb4cf/mysql-function-raise-error.md"
    ],
    "content": "MySQL stored function example, raise error on MySQL routine.\n===\n\n```mysql\nDROP FUNCTION IF EXISTS genPartnerCode;\nCREATE FUNCTION genPartnerCode()\n  RETURNS VARCHAR(10) DETERMINISTIC READS SQL DATA\n  BEGIN\n    DECLARE wCode VARCHAR(10) DEFAULT NULL;\n    DECLARE wLen INT DEFAULT NULL;\n\n    SELECT CAST(conf_value AS UNSIGNED)\n    INTO wLen\n    FROM r_settings\n    WHERE conf_alias = 'partner_code_len' AND status = 1;\n\n    IF wLen IS NULL\n    THEN\n      SIGNAL SQLSTATE '45000'\n      SET MESSAGE_TEXT ='Setting PARTNER_CODE_LEN not found or disabled!';\n    END IF;\n\n    SELECT LPAD(CAST(conf_value AS UNSIGNED), wLen, '0')\n    INTO wCode\n    FROM r_settings\n    WHERE conf_alias = 'partner_code' AND status = 1;\n\n    IF wCode IS NULL\n    THEN\n      SIGNAL SQLSTATE '45000'\n      SET MESSAGE_TEXT ='Setting PARTNER_CODE not found or disabled!';\n    END IF;\n\n    UPDATE r_settings\n    SET conf_value = CAST(wCode AS UNSIGNED) + 1\n    WHERE conf_alias = 'partner_code';\n\n    RETURN wCode;\n  END;\n```"
  },
  {
    "html_url": "https://gist.github.com/3738223062bd6a05597f",
    "description": "Print only necessary element's content.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/3738223062bd6a05597f/raw/2bd6435f81892e1466b22dc50b08d3e9b5253b0b/print-elements-content.md"
    ],
    "content": "Print only necessary element's content.\n===\n\n```html\n<style type=\"text/css\">\n\t@media print{\n\t\tbody *{\n\t\t\tvisibility:hidden;\n\t\t}\n\t\t#printing-area, #printing-area *{\n\t\t\tvisibility:visible;\n\t\t}\n\t\t#printing-area{\n\t\t\tposition:absolute;\n\t\t\tleft:0;\n\t\t\ttop:0;\n\t\t}\n\t}\n</style>\n\n<p class=\"well\">This content won't be printed..</p>\n\n<div id=\"printing-area\">ONLY THIS CONTENT WILL BE PRINTED.</div>\n\n<p class=\"well\">This content won't be printed.</p>\n```"
  },
  {
    "html_url": "https://gist.github.com/62a60fe531ee6ae7dd14",
    "description": "Сумма прописью AngularJS Filter",
    "files": [
      "https://gist.githubusercontent.com/umidjons/62a60fe531ee6ae7dd14/raw/40836c2667bf0506a6d8fc5647e2a30757a26cbf/number-to-word-filter.md"
    ],
    "content": "Сумма прописью AngularJS Filter\n===\n\n```html\n<!DOCTYPE html>\n<html ng-app=\"MYAPP\">\n<head>\n\t<meta charset=\"utf-8\">\n\t<script src=\"/js/jquery.js\"></script>\n\t<script src=\"/js/angular.js\"></script>\n</head>\n<body ng-controller=\"MyCtrl\">\n\n<input ng-model=\"num_\">\n<p>Number: {{num_}}</p>\n<p>Words: {{num_ | num2word}}</p>\n\n<script>\n\tangular.module('MYAPP',[])\n\t\t\t.filter('num2word',function(){\n\t\t\t\tString.prototype.trimRight=function(){\n\t\t\t\t\t// убирает все пробелы в конце строки\n\t\t\t\t\tvar r=/\\s+$/g;\n\t\t\t\t\treturn this.replace(r,'');\n\t\t\t\t}\n\t\t\t\tString.prototype.trimLeft=function(){\n\t\t\t\t\t// убирает все пробелы в начале строки\n\t\t\t\t\tvar r=/^\\s+/g;\n\t\t\t\t\treturn this.replace(r,'');\n\t\t\t\t}\n\t\t\t\tString.prototype.trim=function(){\n\t\t\t\t\t// убирает все пробелы в начале и в конце строки\n\t\t\t\t\treturn this.trimRight().trimLeft();\n\t\t\t\t}\n\t\t\t\tString.prototype.trimMiddle=function(){\n\t\t\t\t\t// убирает все пробелы в начале и в конце строки\n\t\t\t\t\t// помимо этого заменяет несколько подряд\n\t\t\t\t\t// идущих пробелов внутри строки на один пробел\n\t\t\t\t\tvar r=/\\s\\s+/g;\n\t\t\t\t\treturn this.trim().replace(r,' ');\n\t\t\t\t}\n\t\t\t\tString.prototype.trimAll=function(){\n\t\t\t\t\t// убирает все пробелы в строке s\n\t\t\t\t\tvar r=/\\s+/g;\n\t\t\t\t\treturn this.replace(r,'');\n\t\t\t\t}\n\t\t\t\tString.prototype.repeat=function(n){\n\t\t\t\t\t// повторяет строку n раз\n\t\t\t\t\tvar r='';\n\t\t\t\t\tif(typeof(n)=='number')\n\t\t\t\t\t\tfor(var i=1; i<=n; i++) r+=this;\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\tNumber.prototype.isInt=function(){\n\t\t\t\t\t// возвращает True, если число является целым\n\t\t\t\t\treturn (Math.round(this)==this);\n\t\t\t\t}\n\t\t\t\tNumber.prototype.roundTo=function(n){\n\t\t\t\t\t// округляет число до заданного количества n\n\t\t\t\t\t// знаков после (или перед) запятой\n\t\t\t\t\tvar x=0;\n\t\t\t\t\tif(typeof(n)=='number')\n\t\t\t\t\t\tif(n.isInt())\n\t\t\t\t\t\t\tif(n>= -6 && n<=6) x=n;\n\t\t\t\t\tx=Math.pow(10,x);\n\t\t\t\t\treturn Math.round(this*x)/x;\n\t\t\t\t}\n\n\t\t\t\tString.prototype.trimAll=function(){\n\t\t\t\t\t// убирает все пробелы в строке s\n\t\t\t\t\tvar r=/\\s+/g;\n\t\t\t\t\treturn this.replace(r,'');\n\t\t\t\t}\n\n\t\t\t\tNumber.prototype.toPhrase=function(c){\n\t\t\t\t\t// сумма прописью для чисел от 0 до 999 триллионов\n\t\t\t\t\t// можно передать параметр \"валюта\": RUB,USD,EUR (по умолчанию RUB)\n\t\t\t\t\tvar x=this.roundTo(2);\n\t\t\t\t\tif(x<0 || x>999999999999999.99) return false;\n\t\t\t\t\tvar currency='RUB';\n\t\t\t\t\tif(typeof(c)=='string') currency=c.trimAll().toUpperCase();\n\t\t\t\t\tif(currency=='RUR') currency='RUB';\n\t\t\t\t\tif(currency!='RUB' && currency!='USD' && currency!='EUR') return false;\n\t\t\t\t\tvar groups=new Array();\n\t\t\t\t\tgroups[0]=new Array();\n\t\t\t\t\tgroups[1]=new Array();\n\t\t\t\t\tgroups[2]=new Array();\n\t\t\t\t\tgroups[3]=new Array();\n\t\t\t\t\tgroups[4]=new Array();\n\t\t\t\t\tgroups[9]=new Array();\n\t\t\t\t\t// рубли\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[0][-1]={'RUB':'рублей','USD':'долларов США','EUR':'евро'};\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[0][1]={'RUB':'рубль','USD':'доллар США','EUR':'евро'};\n\t\t\t\t\tgroups[0][2]={'RUB':'рубля','USD':'доллара США','EUR':'евро'};\n\t\t\t\t\tgroups[0][3]={'RUB':'рубля','USD':'доллара США','EUR':'евро'};\n\t\t\t\t\tgroups[0][4]={'RUB':'рубля','USD':'доллара США','EUR':'евро'};\n\t\t\t\t\t// тысячи\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[1][-1]='тысяч';\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[1][1]='тысяча';\n\t\t\t\t\tgroups[1][2]='тысячи';\n\t\t\t\t\tgroups[1][3]='тысячи';\n\t\t\t\t\tgroups[1][4]='тысячи';\n\t\t\t\t\t// миллионы\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[2][-1]='миллионов';\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[2][1]='миллион';\n\t\t\t\t\tgroups[2][2]='миллиона';\n\t\t\t\t\tgroups[2][3]='миллиона';\n\t\t\t\t\tgroups[2][4]='миллиона';\n\t\t\t\t\t// миллиарды\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[3][-1]='миллиардов';\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[3][1]='миллиард';\n\t\t\t\t\tgroups[3][2]='миллиарда';\n\t\t\t\t\tgroups[3][3]='миллиарда';\n\t\t\t\t\tgroups[3][4]='миллиарда';\n\t\t\t\t\t// триллионы\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[4][-1]='триллионов';\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[4][1]='триллион';\n\t\t\t\t\tgroups[4][2]='триллиона';\n\t\t\t\t\tgroups[4][3]='триллиона';\n\t\t\t\t\tgroups[4][4]='триллиона';\n\t\t\t\t\t// копейки\n\t\t\t\t\t// по умолчанию\n\t\t\t\t\tgroups[9][-1]={'RUB':'копеек','USD':'центов','EUR':'центов'};\n\t\t\t\t\t//исключения\n\t\t\t\t\tgroups[9][1]={'RUB':'копейка','USD':'цент','EUR':'цент'};\n\t\t\t\t\tgroups[9][2]={'RUB':'копейки','USD':'цента','EUR':'цента'};\n\t\t\t\t\tgroups[9][3]={'RUB':'копейки','USD':'цента','EUR':'цента'};\n\t\t\t\t\tgroups[9][4]={'RUB':'копейки','USD':'цента','EUR':'цента'};\n\t\t\t\t\t// цифры и числа\n\t\t\t\t\t// либо просто строка, либо 4 строки в хэше\n\t\t\t\t\tvar names=new Array();\n\t\t\t\t\tnames[1]={0:'один',1:'одна',2:'один',3:'один',4:'один'};\n\t\t\t\t\tnames[2]={0:'два',1:'две',2:'два',3:'два',4:'два'};\n\t\t\t\t\tnames[3]='три';\n\t\t\t\t\tnames[4]='четыре';\n\t\t\t\t\tnames[5]='пять';\n\t\t\t\t\tnames[6]='шесть';\n\t\t\t\t\tnames[7]='семь';\n\t\t\t\t\tnames[8]='восемь';\n\t\t\t\t\tnames[9]='девять';\n\t\t\t\t\tnames[10]='десять';\n\t\t\t\t\tnames[11]='одиннадцать';\n\t\t\t\t\tnames[12]='двенадцать';\n\t\t\t\t\tnames[13]='тринадцать';\n\t\t\t\t\tnames[14]='четырнадцать';\n\t\t\t\t\tnames[15]='пятнадцать';\n\t\t\t\t\tnames[16]='шестнадцать';\n\t\t\t\t\tnames[17]='семнадцать';\n\t\t\t\t\tnames[18]='восемнадцать';\n\t\t\t\t\tnames[19]='девятнадцать';\n\t\t\t\t\tnames[20]='двадцать';\n\t\t\t\t\tnames[30]='тридцать';\n\t\t\t\t\tnames[40]='сорок';\n\t\t\t\t\tnames[50]='пятьдесят';\n\t\t\t\t\tnames[60]='шестьдесят';\n\t\t\t\t\tnames[70]='семьдесят';\n\t\t\t\t\tnames[80]='восемьдесят';\n\t\t\t\t\tnames[90]='девяносто';\n\t\t\t\t\tnames[100]='сто';\n\t\t\t\t\tnames[200]='двести';\n\t\t\t\t\tnames[300]='триста';\n\t\t\t\t\tnames[400]='четыреста';\n\t\t\t\t\tnames[500]='пятьсот';\n\t\t\t\t\tnames[600]='шестьсот';\n\t\t\t\t\tnames[700]='семьсот';\n\t\t\t\t\tnames[800]='восемьсот';\n\t\t\t\t\tnames[900]='девятьсот';\n\t\t\t\t\tvar r='',i,j,y=Math.floor(x);\n\t\t\t\t\t// если НЕ ноль рублей\n\t\t\t\t\tif(y>0){\n\t\t\t\t\t\t// выделим тройки с руб., тыс., миллионами, миллиардами и триллионами\n\t\t\t\t\t\tvar t=new Array();\n\t\t\t\t\t\tfor(i=0; i<=4; i++){\n\t\t\t\t\t\t\tt[i]=y%1000;\n\t\t\t\t\t\t\ty=Math.floor(y/1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar d=new Array();\n\t\t\t\t\t\t// выделим в каждой тройке сотни, десятки и единицы\n\t\t\t\t\t\tfor(i=0; i<=4; i++){\n\t\t\t\t\t\t\td[i]=new Array();\n\t\t\t\t\t\t\td[i][0]=t[i]%10; // единицы\n\t\t\t\t\t\t\td[i][10]=t[i]%100-d[i][0]; // десятки\n\t\t\t\t\t\t\td[i][100]=t[i]-d[i][10]-d[i][0]; // сотни\n\t\t\t\t\t\t\td[i][11]=t[i]%100; // две правых цифры в виде числа\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(i=4; i>=0; i--)\n\t\t\t\t\t\t\tif(t[i]>0){\n\t\t\t\t\t\t\t\tif(names[d[i][100]]) r+=' '+((typeof(names[d[i][100]])=='object')?(names[d[i][100]][i]):(names[d[i][100]]));\n\t\t\t\t\t\t\t\tif(names[d[i][11]]) r+=' '+((typeof(names[d[i][11]])=='object')?(names[d[i][11]][i]):(names[d[i][11]]));\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(names[d[i][10]]) r+=' '+((typeof(names[d[i][10]])=='object')?(names[d[i][10]][i]):(names[d[i][10]]));\n\t\t\t\t\t\t\t\t\tif(names[d[i][0]]) r+=' '+((typeof(names[d[i][0]])=='object')?(names[d[i][0]][i]):(names[d[i][0]]));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// если существует числительное\n\t\t\t\t\t\t\t\tif(names[d[i][11]]) j=d[i][11];\n\t\t\t\t\t\t\t\telse j=d[i][0];\n\t\t\t\t\t\t\t\tif(groups[i][j])\n\t\t\t\t\t\t\t\t\tif(i==0) r+=' '+groups[i][j][currency];\n\t\t\t\t\t\t\t\t\telse r+=' '+groups[i][j];\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tif(i==0) r+=' '+groups[i][-1][currency];\n\t\t\t\t\t\t\t\t\telse r+=' '+groups[i][-1];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tif(t[0]==0) r+=' '+groups[0][-1][currency];\n\t\t\t\t\t}else r='Ноль '+groups[0][-1][currency];\n\t\t\t\t\ty=((x-Math.floor(x))*100).roundTo();\n\t\t\t\t\tif(y<10) y='0'+y;\n\t\t\t\t\tr=r.trimMiddle();\n\t\t\t\t\tr=r.substr(0,1).toUpperCase()+r.substr(1);\n\t\t\t\t\tr+=' '+y;\n\t\t\t\t\ty=y*1;\n\t\t\t\t\t// если существует числительное\n\t\t\t\t\tif(names[y]) j=y;else j=y%10;\n\t\t\t\t\tif(groups[9][j]) r+=' '+groups[9][j][currency];\n\t\t\t\t\telse r+=' '+groups[9][-1][currency];\n\t\t\t\t\treturn r;\n\t\t\t\t}\n\t\t\t\treturn function(input){ return (new Number(input)).toPhrase('RUB'); }\n\t\t\t})\n\t\t\t.controller('MyCtrl',function($scope){\n\t\t\t\t$scope.num_=123;\n\t\t\t});\n</script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/532758d27805bffd6686",
    "description": "Backup and Restore MySql database",
    "files": [
      "https://gist.githubusercontent.com/umidjons/532758d27805bffd6686/raw/58071f221920140ff5c1693b640c061856144daf/backup-restore-mysql-database.md"
    ],
    "content": "Backup and restore MYSQL database\n===\n\nBackup and compress database\n```bash\nmysqldump -uroot -ppassword mydb | gzip -9 > /var/backups/mydb.sql.gz\n```\n\nExtract backup:\n```bash\ngunzip mydb.sql.gz\n```\n\nImport backup into database\n```bash\nmysql -hlocalhost -uroot -ppassword mydb < mydb.sql\n```\n\nExtract and Import backup into database\n```bash\ngunzip < mydb.sql.gz | mysql -uroot -ppassword mydb\n```"
  },
  {
    "html_url": "https://gist.github.com/59c88bbf53699d84e125",
    "description": "Create database in MySql from command line",
    "files": [
      "https://gist.githubusercontent.com/umidjons/59c88bbf53699d84e125/raw/524000b32f0292f6d66b95af3cbdc1bda01a2848/mysql-database-create.md"
    ],
    "content": "Create database in MySql from command line\n===\n\nOpen mysql console:\n```\nmysql -h localhost -u root -p mypass\n```\n\nType following command:\n```sql\nmysql>create database mydb character set utf8 collate utf8_unicode_ci;\n```"
  },
  {
    "html_url": "https://gist.github.com/7e8d4c54a4c06321596f",
    "description": "Show asterisk for required fields",
    "files": [
      "https://gist.githubusercontent.com/umidjons/7e8d4c54a4c06321596f/raw/99149f8fb8be1fcb7b0bf81fa9175d7e79e54abb/asterisk-for-required.md"
    ],
    "content": "Show asterisk for required fields\n===\n\n```css\n.req:after{\n\tcolor:#e32;\n\tcontent:' *';\n\tdisplay:inline;\n}\n```\n\n```html\n<div class=\"form-group\">\n\t<div class=\"col-sm-4\">\n\t\t<label class=\"req\">Name</label>\n\t\t<input class=\"form-control\" required>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/abaac05b2ad21624aa7f",
    "description": "Yii2 - Getting bad request (#400) on ajax calls",
    "files": [
      "https://gist.githubusercontent.com/umidjons/abaac05b2ad21624aa7f/raw/c599967143fc3f3a19ac2b557072ecc2008ffa15/yii2-ajax.md"
    ],
    "content": "Yii2 - Getting bad request (#400) on ajax calls\n===\n\nInclude `_csrf` parameter with correct value in Ajax/Post calls.\n\n```javascript\nangular.module('MyModule',[])\n.factory('Subcategory',function($http){\n\t\treturn {\n\t\t\tquery:function(callback,cat_id){\n\t\t\t\t$http.post('/service-subcategory/query',{\n    \t\t\t\tcat_id:cat_id,\n    \t\t\t\t_csrf: yii.getCsrfToken() # CSRF token included\n  \t\t\t\t})\n\t\t\t\t.success(callback);\n\t\t\t}\n\t\t};\n\t})\n```"
  },
  {
    "html_url": "https://gist.github.com/b86f503ee108c6ad6f1a",
    "description": "Trigger example in MySQL",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b86f503ee108c6ad6f1a/raw/c5fa1db24d2594c0af73973cbf2fcded685900f3/trigger-mysql.md"
    ],
    "content": "Trigger example in MySQL\n===\n\n```sql\nCREATE TRIGGER trigger_test AFTER INSERT ON tbl_test FOR EACH ROW\nBEGIN\n\n-- declare variable vHost_\nDECLARE vHost_ VARCHAR (100);\n-- get host name/IP of the client\nSELECT HOST INTO vHost_ FROM information_schema.PROCESSLIST WHERE ID = connection_id();\n\nINSERT INTO tbl_log (user_,ip_,date_,title_,val_)\nVALUES (USER(),vHost_,now(),NEW.title,NEW.val);\n\nEND\n```"
  },
  {
    "html_url": "https://gist.github.com/c2bd9a9ce0306888d458",
    "description": "Set the application root path via .htaccess",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c2bd9a9ce0306888d458/raw/3696f5572140c89087fc1a6a5aeee718e67ae967/yii2-app-root-path.md"
    ],
    "content": "Set the application root path via .htaccess\n===\n\nCreate `.htaccess` file in the application root folder.\n```conf\nRewriteEngine On\nRewriteCond %{REQUEST_URI} !^web\nRewriteRule ^(.*)$ web/$1 [L]\n```\n\nAlso create `.htaccess` file in the `/web/` folder:\n```conf\nRewriteEngine on\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteRule . index.php\n```"
  },
  {
    "html_url": "https://gist.github.com/0aed779706077e305796",
    "description": "Column totals in CGridView",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0aed779706077e305796/raw/7c4655f870343579b04f0f3d3839616058629896/column-totals-in-cgridview.md"
    ],
    "content": "Column totals in CGridView\n===\n\nCreate model's method which calculates totals:\n```php\n<?php\nclass MyModel\n{\n\tpublic function getTotal($records,$colName)\n\t{\n\t\t$total=0;\n\t\tforeach($records as $rec)\n\t\t\t$total+=$rec->{$colName};\n\t\treturn Yii::app()->numberFormatter->formatDecimal($total);\n\t}\n}\n```\n\nUse `getTotal()` in grid view.\n\n```php\n<?php $this->widget('zii.widgets.grid.CGridView',[\n\t'id'           =>'my-grid',\n\t'dataProvider' =>$model->search(),\n\t'itemsCssClass'=>'table table-striped table-hover table-bordered',\n\t'template'     =>'{items}{pager}',\n\t'columns'      =>[\n\t\t'CLIENT_ID',\n\t\t'CLIENT_NAME',\n\t\t[\n\t\t\t'name'             =>'COUNT_ENTERED',\n\t\t\t'htmlOptions'      =>['class'=>'text-right'],\n\t\t\t'footerHtmlOptions'=>['class'=>'text-right'],\n\t\t\t'footer'           =>$model->getTotal($model->search()->getData(),'COUNT_ENTERED'),\n\t\t],\n\t\t[\n\t\t\t'name'             =>'COUNT_PRINTED',\n\t\t\t'htmlOptions'      =>['class'=>'text-right'],\n\t\t\t'footerHtmlOptions'=>['class'=>'text-right'],\n\t\t\t'footer'           =>$model->getTotal($model->search()->getData(),'COUNT_PRINTED'),\n\t\t],\n\t],\n]); ?>\n```\n\nTo get the same filtered & sorted data available for grid view we use `$model->search()->getData()`."
  },
  {
    "html_url": "https://gist.github.com/09a617bace044ff8a705",
    "description": "Setting correct mime type OR resolving `Resource interpreted as...` warning.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/09a617bace044ff8a705/raw/9b232cb82b85b8b59948e93d17c5e0bc148223ab/correct-mime-type.md"
    ],
    "content": "Setting the correct mime type in Apache\n===\nIf you got such warning in the browser's console, then you should set\ncorrect mime type for resource:\n`Resource interpreted as Font but transferred with MIME type application/x-font-otf: \"http://mydomain.com/assets/fonts/MikodacsPCS-fMac.otf\".`.\n\nCorrect mime type for `otf` is `font/otf`, so I can add it to my `.htaccess` file or `httpd.conf` file:\n```\n# correct mime type for .otf\nAddType font/otf .otf\n```"
  },
  {
    "html_url": "https://gist.github.com/d4ebe30e1bc76dbbcc94",
    "description": "Caching example in checking user privilege.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d4ebe30e1bc76dbbcc94/raw/d77b14b9b6924d048e3abd8a8f69d535b7127e10/caching-check-user-privilege.md"
    ],
    "content": "Caching example in checking user privilege.\n===\n\n```php\n<?php\nclass F\n{\n\t/**\n\t * Check is user have access to specified operation(s).\n\t * @param string|array $operation    operation name or list of operations to check against to the current user\n\t * @param bool         $allowToAdmin true - always allow access for superAdmin, false - check exact permission.\n\t * @return int 1, if user has access for specified operation, or one of the specified operations from the operations list\n\t */\n\tpublic static function access($operation,$allowToAdmin=true)\n\t{\n\t\t$id_ =Yii::app()->user->id.$operation; // ex: 234create\n\t\t$exp_=Yii::app()->params['cacheExpire']; // ex: 18000 seconds.\n\t\t$res_=Yii::app()->cache[$id_]; // read from the cache\n\t\tif(false===$res_) // value does not exist in the cache\n\t\t{\n\t\t\tif($operation=='*') $res_=1;\n\t\t\telseif($operation=='?' && Yii::app()->user->isGuest) $res_=1;\n\t\t\telseif($operation=='@' && !Yii::app()->user->isGuest) $res_=1;\n\t\t\telseif($allowToAdmin && Yii::app()->user->checkAccess('admin')) $res_=1;\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(is_string($operation))\n\t\t\t\t\t$operation=array_map('trim',explode(',',$operation));\n\t\t\t\t$is_active=User::isActive(Yii::app()->user->id);\n\t\t\t\tif(is_array($operation))\n\t\t\t\t{\n\t\t\t\t\t$res_=0;\n\t\t\t\t\tforeach($operation as $oper)\n\t\t\t\t\t\tif(Yii::app()->user->checkAccess($oper) && $is_active)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$res_=1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tYii::app()->cache->set($id_,$res_,$exp_); // save a result into the cache\n\t\t}\n\t\treturn $res_;\n\t}\n}\n```\n\nExpire time from the application configuration:\n```php\nreturn [\n  // ... other entries\n\t'params'    =>[\n\t\t'adminEmail' =>'webmaster@example.com',\n\t\t'cacheExpire'=>1800, // seconds\n\t],\n];\n```"
  },
  {
    "html_url": "https://gist.github.com/c7193bb48adb61cd20e8",
    "description": "Publish assets in Yii",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c7193bb48adb61cd20e8/raw/2b2520738249cabe328768f3cceba115c0b6d0c8/publish-assets-in-yii.md"
    ],
    "content": "Publish assets in Yii\n===\n\nPut assets in `protected/assets/` folder.\n\nHelper component to publish assets:\n```php\n<?php\nclass F\n{\n\tpublic static function publishAssets()\n\t{\n\t\t$path=Yii::getPathOfAlias('application.assets');\n\t\t$url =Yii::app()->assetManager->publish($path,false,-1,YII_DEBUG);\n\t\t$cs  =Yii::app()->clientScript;\n\t\t$cs->registerCssFile($url.'/vendor/bootstrap/css/bootstrap.css')\n\t\t\t->registerCssFile($url.'/vendor/bootstrap/css/bootstrap-theme.css')\n\t\t\t->registerScriptFile($url.'/vendor/jquery/jquery-2.1.1.js')\n\t\t\t->registerScriptFile($url.'/vendor/bootstrap/js/bootstrap.js')\n\t\t\t->registerScriptFile($url.'/vendor/angular/angular.js')\n\t\t\t->registerScriptFile($url.'/vendor/angular-ui/angular-ui-router.js')\n\t\t\t->registerScriptFile($url.'/js/app.js');\n\t}\n}\n```\n\nIn layout put this line:\n```html\n<?php F::publishAssets(); ?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n...\n```\n"
  },
  {
    "html_url": "https://gist.github.com/404c22c1ab7730493b7c",
    "description": "Remove all dots except one in JavaScript with RegEx",
    "files": [
      "https://gist.githubusercontent.com/umidjons/404c22c1ab7730493b7c/raw/521b812da173d201826b416982ad24510ba697c0/remove-all-dots-except-last.md"
    ],
    "content": "Remove all dots except one in JavaScript with RegEx\n\n```javascript\n'123.345..456456.00'.replace(/,/g,'.').replace(/[.](?!\\d*$)/g,''); // 123345456456.00\n```"
  },
  {
    "html_url": "https://gist.github.com/f477b63712bd6867ae2a",
    "description": "AngularJS directive: Enter as Tab",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f477b63712bd6867ae2a/raw/353b2f063e0db9d1faca12a110ead20178a1c43e/enter-as-tab-directive.md"
    ],
    "content": "AngularJS directive: Enter as Tab\n===\n\n```javascript\nangular.module('App',[])\n\t.directive('enter',function(){\n\t\treturn function(scope,element,attrs){\n\t\t\telement.bind(\"keydown keypress\",function(event){\n\t\t\t\tif(event.which===13){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tvar fields=$(this).parents('form:eq(0),body').find('input, textarea, select');\n\t\t\t\t\tvar index=fields.index(this);\n\t\t\t\t\tif(index> -1&&(index+1)<fields.length)\n\t\t\t\t\t\tfields.eq(index+1).focus();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n```\n\nHow to apply:\n\n```html\n<form class=\"form-horizontal\" novalidate>\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-4\">\n\t\t\t<label>Input 1</label>\n\t\t\t<input class=\"form-control\" ng-model=\"word.data1\" enter>\n\t\t</div>\n\t\t<div class=\"col-sm-4\">\n\t\t\t<label>Input 2</label>\n\t\t\t<input class=\"form-control\" ng-model=\"word.data2\" enter>\n\t\t</div>\n\t\t<div class=\"col-sm-4\">\n\t\t\t<label>Input 3</label>\n\t\t\t<input class=\"form-control\" ng-model=\"word.data3\" enter>\n\t\t</div>\n\t</div>\n</form>\n```"
  },
  {
    "html_url": "https://gist.github.com/ac4f81fdf76963e1e63d",
    "description": "Sugar.js as AngularJS filter",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ac4f81fdf76963e1e63d/raw/26d83e91b202ec5e39b5849dcc0a59730aeacbe9/sugarjs-as-angularjs-filter.md"
    ],
    "content": "Sugar.js as AngularJS filter\n===\n\nDownload and include `sugar.js` from http://sugarjs.com/.\n\n```javascript\nangular.module('MyModule',[])\n\t.filter('sugar',function($filter){\n\t\treturn function(input,format){\n\t\t\tformat=format || 'dd.MM.yyyy';\n\t\t\treturn $filter('date')(Date.create(input),format);\n\t\t}\n\t});\n```\n\nThen we can use `sugar` filter in our views like this:\n\n```html\n{{'19-DEC-2014'|sugar:'dd.MM.yyyy'}} <br>\n{{'tomorrow'|sugar:'dd MMMM yyyy'}}\n```\n\nOutput:\n```\n19.12.2014\n20 December 2014\n```\n\nI add new parameter, which specify whether create default date or just return empty string:\n```javascript\nangular.module('MyModule',[])\n\t.filter('sugar',function($filter){\n\t\treturn function(input,format,empty){\n\t\t\tif(!input && empty)return '';\n\t\t\tformat=format || 'dd.MM.yyyy';\n\t\t\treturn $filter('date')(Date.create(input),format);\n\t\t}\n\t})\n```\n\nHere is usage example, which outputs empty string, if `EXPIRED_DATE` value is falsy:\n```html\n{{EXPIRED_DATE|sugar:null:true}}\n```"
  },
  {
    "html_url": "https://gist.github.com/cf5a4ade96b76bc395c4",
    "description": "AngularJS 'interval' directive",
    "files": [
      "https://gist.githubusercontent.com/umidjons/cf5a4ade96b76bc395c4/raw/33cdde86ef63ad6a6e22805b8e983c7833b5ad34/custom-interval-directive.md"
    ],
    "content": "AngularJS `interval` directive\n===\n\n```javascript\nangular.module('App',[])\n\t.directive('interval',function($interval,$log){\n\t\tvar intervalTime_=15000;\n\t\tvar intervalFn_=null;\n\t\tvar iv_=null;\n\t\treturn {\n\t\t\trestrict:'A',\n\t\t\tlink    :function(scope,elem,attrs){\n\t\t\t\tif(angular.isDefined(attrs.intervalTime) && $.isNumeric(attrs.intervalTime))\n\t\t\t\t\tintervalTime_=attrs.intervalTime;\n\t\t\t\tif(angular.isDefined(attrs.intervalFn) && angular.isFunction(scope[attrs.intervalFn])){\n\t\t\t\t\tintervalFn_=scope[attrs.intervalFn];\n\t\t\t\t\tiv_=$interval(intervalFn_,intervalTime_);\n\t\t\t\t\tattrs.$observe('intervalTime',function(new_iv){\n\t\t\t\t\t\tif(!angular.equals(new_iv,intervalTime_)){\n\t\t\t\t\t\t\tif(iv_!=null) $interval.cancel(iv_);\n\t\t\t\t\t\t\tintervalTime_=new_iv;\n\t\t\t\t\t\t\tif(intervalTime_>0)\n\t\t\t\t\t\t\t\tiv_=$interval(intervalFn_,intervalTime_);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\t$log.error('Attribute `intervalFn` is not set or is not a function!');\n\t\t\t}\n\t\t};\n\t});\n```\n\nUsage example:\n```html\n<div ng-controller=\"TestCtrl\">\n\t<span class=\"label label-info\" interval interval-fn=\"testFn\" interval-time=\"{{intTime}}\">{{testVal}}</span>\n\t<button class=\"btn btn-danger\" ng-click=\"stop()\">Stop</button>\n\t<button class=\"btn btn-success\" ng-click=\"start()\">Start</button>\n</div>\n```\n\nImplementation of a controller:\n```javascript\nangular.module('App')\n.controller('TestCtrl',function($scope){\n\t$scope.intTime=3000; // initial interval\n\t$scope.testVal=1;\n\t\n\t$scope.testFn=function(){\n\t\t$scope.testVal++;\n\t}\n\t\n\t$scope.stop=function(){\n\t\t$scope.intTime=0; // intervalTime=0 means stop\n\t}\n\t\n\t$scope.start=function(){\n\t\t$scope.intTime=1000; // change intervalTime value\n\t}\n);\n```"
  },
  {
    "html_url": "https://gist.github.com/bad2b5bd0d415f665253",
    "description": "Simplify complex queries with 'WITH' statement",
    "files": [
      "https://gist.githubusercontent.com/umidjons/bad2b5bd0d415f665253/raw/044717ad3f76791dc97bd20d5ad4709f6d6d8e5c/with-statement.md"
    ],
    "content": "Simplify complex queries with 'WITH' statement\n===\n\n```sql\nwith\n  cal         as (select * from v_client_calendar),\n  rec_reg_hlp as (select client_code,extract(Year from registered) Year,extract(Month from registered) Month from declarations),\n  rec_reg     as (select client_code,Year,Month,count(*) count_ from rec_reg_hlp group by client_code,Year,Month),\n  rec_prt_hlp as (select client_code,extract(Year from created) Year,extract(Month from created) Month from user_reports where state=1),\n  rec_prt     as (select client_code,Year,Month,count(*) count_ from rec_prt_hlp group by client_code,Year,Month)\nselect a.client_code,a.year,a.month,nvl(b.count_,0) count_entered,nvl(c.count_,0) count_printed\n  from cal a, rec_reg b, rec_prt c\n where a.client_code=b.client_code(+) and a.Year = b.Year(+) and a.Month=b.Month(+) and\n       a.client_code=c.client_code(+) and a.Year = c.Year(+) and a.Month=c.Month(+);\n```\n\nHere is another example\n====\nThis query is less verbose, but calculations are complex to understand\n```sql\nselect a.\"CLIENT_CODE\",a.\"YEAR\",a.\"MONTH\",a.\"COUNT_ENTERED\",a.\"COUNT_PRINTED\",\n       p1.EnterPrice,\n       p2.PrintPrice,\n       p3.TAC TAX,\n       ROUND(a.count_entered*p1.EnterPrice,2) EnterCost,\n       ROUND(a.count_printed*p2.PrintPrice,2) PrintCost,\n       ROUND(a.count_entered*p1.EnterPrice,2)+ROUND(a.count_printed*p2.PrintPrice,2) TotalCost,\n       ROUND((a.count_entered*p1.EnterPrice*p3.TAC)/100,2) EnterTax,\n       ROUND((a.count_printed*p2.PrintPrice*p3.TAC)/100,2) PrintTax,\n       ROUND((a.count_entered*p1.EnterPrice*p3.TAC)/100,2)+ROUND((a.count_printed*p2.PrintPrice*p3.TAC)/100,2) TotalTax,\n       (ROUND(a.count_entered*p1.EnterPrice,2)+ROUND((a.count_entered*p1.EnterPrice*p3.TAC)/100,2))EnterCostTax,\n       (ROUND(a.count_printed*p2.PrintPrice,2)+ROUND((a.count_printed*p2.PrintPrice*p3.TAC)/100,2))PrintCostTax,\n       ((ROUND(a.count_entered*p1.EnterPrice,2)+ROUND((a.count_entered*p1.EnterPrice*p3.TAC)/100,2))+(ROUND(a.count_printed*p2.PrintPrice,2)+ROUND((a.count_printed*p2.PrintPrice*p3.TAC)/100,2))) Total\nfrom v_client_bill a,\n(select to_number(value_string) EnterPrice from r_system_settings where id=42) p1,\n(select to_number(value_string) PrintPrice from r_system_settings where id=43) p2,\n(select to_number(value_string) TAC from r_system_settings where id=44) p3;\n```\n\nHere I refactor SQL using `with` clause. This SQL is more verbose, but calculations are easy to understand:\n```sql\nwith\nEnterPrice as (select to_number(value_string) val from r_system_settings where id=42),\nPrintPrice as (select to_number(value_string) val from r_system_settings where id=43),\nTax        as (select to_number(value_string) val from r_system_settings where id=44),\nData_01    as (\n  select client_code,year,month,count_entered,count_printed,Tax.val tax,\n         round(count_entered*EnterPrice.val,2)EnterCost,\n         round(count_printed*PrintPrice.val,2)PrintCost\n  from v_client_bill,EnterPrice,PrintPrice,Tax\n),\nData_02    as (\n  select t.*,\n    t.EnterCost+t.PrintCost TotalCost,\n    round(EnterCost*Tax/100,2) EnterTax,\n    round(PrintCost*Tax/100,2) PrintTax\n  from Data_01 t\n),\nData_03    as (\n  select t.*,\n    t.EnterTax  + t.PrintTax TotalTax,\n    t.EnterCost + t.EnterTax EnterCostTax,\n    t.PrintCost + t.PrintTax PrintCostTax\n  from Data_02 t\n),\nData_04    as (select t.*, t.EnterCostTax + t.PrintCostTax Total from Data_03 t)\nselect * from Data_04\n```"
  },
  {
    "html_url": "https://gist.github.com/e322006733b44574b43b",
    "description": "Work with named range in PHPExcel",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e322006733b44574b43b/raw/90338615124176b0283b8b28d9f3875bb4737d6d/named-range.md"
    ],
    "content": "Work with named range\n===\n\nExtract `PHPExcel/Classes` into `protected/extensions/phpoffice/`.\nThen in the controller's action use PHPExcel classes.\n\n```php\n<?php\npublic function actionTest()\n{\n  // register PHPExcel autoloader\n\tspl_autoload_unregister(['YiiBase','autoload']);\n\tYii::import('ext.phpoffice.PHPExcel',true);\n\tspl_autoload_register(['YiiBase','autoload']);\n\t\n\t// load excel template\n\t$wbook=PHPExcel_IOFactory::load('files/reports/tpl/report_1.xlsx');\n\t$sheet=$wbook->setActiveSheetIndex(); // get sheet\n\t\n\t// get named range 'range1' and set its value\n\t$sheet->getCell('range1')->setValue(7777);\n\t\n\t// or set value with type specified\n\t$sheet->getCell('range1')->setValueExplicit(7777,PHPExcel_Cell_DataType::TYPE_NUMERIC);\n\t\n\t// create writer and save to file\n\t$writer=PHPExcel_IOFactory::createWriter($wbook,'Excel2007');\n\t$writer->save('files/reports/report_1_data.xlsx');\n}\n\n```"
  },
  {
    "html_url": "https://gist.github.com/53c35bf193858fc048ec",
    "description": "Determine variable is instance of OCI-Lob && load content",
    "files": [
      "https://gist.githubusercontent.com/umidjons/53c35bf193858fc048ec/raw/dffea61b89ee59a47df3b77b869456595a77310a/oci-lob-instance.md"
    ],
    "content": "Determine variable is instance of OCI-Lob\n===\n\n```php\n<?php\n// $row associative array and represent table row\nif(isset($row['COL_4']) && get_class($row['COL_4']))\n  $row['COL_4']=$row['COL_4']->load(); // load blob/clob content\n```"
  },
  {
    "html_url": "https://gist.github.com/f3de2533c51495a9c557",
    "description": "Simple Web service - SOAP Server/Client in PHP",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f3de2533c51495a9c557/raw/30208e4aa51ed158bce793a8cfa87195b7046ed1/web-service-soap-client-server-php.md"
    ],
    "content": "Simple Web service - SOAP Server/Client in PHP\n===\n\nImplementation of the SOAP server - `server.php`:\n```php\n<?php\n// turn off WSDL caching\nini_set(\"soap.wsdl_cache_enabled\",\"0\");\n\n// model, which uses in web service functions as parameter\nclass Book\n{\n\tpublic $name;\n\tpublic $year;\n}\n\n/**\n * Determines published year of the book by name.\n * @param Book $book book instance with name set.\n * @return int published year of the book or 0 if not found.\n */\nfunction bookYear($book)\n{\n\t// list of the books\n\t$_books=[\n\t\t['name'=>'test 1','year'=>2011],\n\t\t['name'=>'test 2','year'=>2012],\n\t\t['name'=>'test 3','year'=>2013],\n\t];\n\t// search book by name\n\tforeach($_books as $bk)\n\t\tif($bk['name']==$book->name)\n\t\t\treturn $bk['year']; // book found\n\n\treturn 0; // book not found\n}\n\n// initialize SOAP Server\n$server=new SoapServer(\"test.wsdl\",[\n\t'classmap'=>[\n\t\t'book'=>'Book', // 'book' complex type in WSDL file mapped to the Book PHP class\n\t]\n]);\n\n// register available functions\n$server->addFunction('bookYear');\n\n// start handling requests\n$server->handle();\n```\n\nImplementation of the SOAP client - `client.php`:\n```php\n<?php\n// model\nclass Book\n{\n\tpublic $name;\n\tpublic $year;\n}\n\n// create instance and set a book name\n$book      =new Book();\n$book->name='test 2';\n\n// initialize SOAP client and call web service function\n$client=new SoapClient('http://a.uz/soap/server.php?wsdl',['trace'=>1,'cache_wsdl'=>WSDL_CACHE_NONE]);\n$resp  =$client->bookYear($book);\n\n// dump response\nvar_dump($resp);\n```\n\nDump of the response:\n```\nstring '2012' (length=4)\n```\n\nWSDL file `test.wsdl`:\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<wsdl:definitions name=\"Library\"\n                  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n                  targetNamespace=\"Library\"\n                  xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"\n                  xmlns:tns=\"Library\"\n                  xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\">\n\n    <xsd:documentation></xsd:documentation>\n\n    <wsdl:types>\n        <xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" targetNamespace=\"Library\">\n            <xsd:complexType name=\"book\">\n                <xsd:sequence>\n                    <xsd:element name=\"name\" type=\"xsd:string\"></xsd:element>\n                    <xsd:element name=\"year\" type=\"tns:integer\"></xsd:element>\n                </xsd:sequence>\n            </xsd:complexType>\n        </xsd:schema>\n    </wsdl:types>\n\n    <wsdl:message name=\"bookYearRequest\">\n        <wsdl:part name=\"book\" type=\"xsd:book\"></wsdl:part>\n    </wsdl:message>\n    <wsdl:message name=\"bookYearResponse\">\n        <wsdl:part name=\"year\" type=\"tns:integer\"></wsdl:part>\n    </wsdl:message>\n\n    <wsdl:portType name=\"Library\">\n        <wsdl:operation name=\"bookYear\">\n            <wsdl:input message=\"tns:bookYearRequest\"/>\n            <wsdl:output message=\"tns:bookYearResponse\"/>\n        </wsdl:operation>\n    </wsdl:portType>\n\n    <wsdl:binding name=\"Library\" type=\"tns:Library\">\n        <soap:binding style=\"rpc\" transport=\"http://schemas.xmlsoap.org/soap/http\"/>\n        <wsdl:operation name=\"bookYear\">\n            <soap:operation soapAction=\"http://a.uz/soap/server.php\"/>\n            <wsdl:input>\n                <soap:body use=\"literal\" namespace=\"Library\"/>\n            </wsdl:input>\n            <wsdl:output>\n                <soap:body use=\"literal\" namespace=\"Library\"/>\n            </wsdl:output>\n        </wsdl:operation>\n    </wsdl:binding>\n\n    <wsdl:service name=\"Library\">\n        <wsdl:port binding=\"tns:Library\" name=\"BookLibrary\">\n            <soap:address location=\"http://a.uz/soap/server.php\"/>\n        </wsdl:port>\n    </wsdl:service>\n\n</wsdl:definitions>\n```"
  },
  {
    "html_url": "https://gist.github.com/84bad37fe9ce124c1693",
    "description": "Simple custom accordion plugin with jQuery",
    "files": [
      "https://gist.githubusercontent.com/umidjons/84bad37fe9ce124c1693/raw/3e69bcf1a37f6cd7a89c7e2d00b5383ba8a4e3a8/accordion-jquery.md"
    ],
    "content": "Simple custom accordion plugin with jQuery\n===\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\t<meta charset=\"utf-8\">\n\t<script src=\"js/jquery-1.10.2.js\"></script>\n</head>\n<body>\n\n<div class=\"pss\">\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 1</div>\n\t\t<div class=\"accordBody\">Content 1</div>\n\t</div>\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 2</div>\n\t\t<div class=\"accordBody\">Content 2</div>\n\t</div>\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 3</div>\n\t\t<div class=\"accordBody\">Content 3</div>\n\t</div>\n</div>\n\n<div class=\"pss\">\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 1</div>\n\t\t<div class=\"accordBody\">Content 1</div>\n\t</div>\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 2</div>\n\t\t<div class=\"accordBody\">Content 2</div>\n\t</div>\n\t<div class=\"accordItem\">\n\t\t<div class=\"accordHeader\">Item 3</div>\n\t\t<div class=\"accordBody\">Content 3</div>\n\t</div>\n</div>\n\n<script>\n\t(function($){\n\t\t$.fn.acc=function(){\n\t\t\treturn this.each(function(){\n\t\t\t\t$(this).find('.accordItem')\n\t\t\t\t\t.children('.accordBody').hide().end()\n\t\t\t\t\t.children('.accordHeader').click(function(e){\n\t\t\t\t\t\t$(this).parent('.accordItem').siblings('.accordItem').children('.accordBody').slideUp()\n\t\t\t\t\t\t\t.end().end().end()\n\t\t\t\t\t\t\t.siblings('.accordBody').slideToggle();\n\t\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}(jQuery));\n\n\tjQuery(document).ready(function($){\n\t\t$('.pss').acc();\n\t});\n\n</script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/3c3a0f343c9f54152241",
    "description": "Multiple connection in ActiveRecord",
    "files": [
      "https://gist.githubusercontent.com/umidjons/3c3a0f343c9f54152241/raw/15a2d0ba88b67ec4bb04f11bc4ab50d87a2d3eaf/multiple-connection-activerecord.md"
    ],
    "content": "Multiple connection in ActiveRecord\n===\n\nCreate other connection in config:\n```php\n<?php\n\t// application components\n\t'components'    =>[\n\t\t'db'          =>[\n\t\t\t'class'           =>'CDbConnection',\n\t\t\t'connectionString'=>'sqlite:'.dirname(__FILE__).'/../data/issuetrack.db',\n\t\t],\n\t\t'db2'         =>[\n\t\t\t'class'           =>'CDbConnection',\n\t\t\t'connectionString'=>'sqlite:'.dirname(__FILE__).'/../data/issuetrack.db',\n\t\t],\n  ]\n```\n\nExtend `CActiveRecord` class to get connection:\n```php\n<?php\n<?php\n\nclass CActiveRecordTask extends CActiveRecord\n{\n\tprivate static $dbtask=null;\n\n\tprotected static function getTaskDbConnection()\n\t{\n\t\tif(self::$dbtask!==null)\n\t\t\treturn self::$dbtask;\n\t\telse\n\t\t{\n\t\t\tself::$dbtask=Yii::app()->db2;\n\t\t\tif(self::$dbtask instanceof CDbConnection)\n\t\t\t{\n\t\t\t\tself::$dbtask->setActive(true);\n\t\t\t\treturn self::$dbtask;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new CDbException(Yii::t('yii','Active Record requires a \"db\" CDbConnection application component.'));\n\t\t}\n\t}\n}\n```\n\nCreate models from extended class and override `getDbConnection()` method:\n```php\n<?php\nclass Task extends CActiveRecordTask\n{\n\tpublic function getDbConnection()\n\t{\n\t\treturn self::getTaskDbConnection();\n\t}\n\n  // ...\n}\n```\n\nTest:\n```php\n<?php\n$tasks = Task::model()->findAll();\n```"
  },
  {
    "html_url": "https://gist.github.com/631cd179694b1f6e20f0",
    "description": "Default value if not set",
    "files": [
      "https://gist.githubusercontent.com/umidjons/631cd179694b1f6e20f0/raw/e33c2bc992ade52514f323445bcab97ec6f00bcb/default-value-if-not-set.md"
    ],
    "content": "Default value if not set\n===\n\n```php\n<?php\n// if $obj->prop1->prop2 is set, then return it, otherwise return $def\n// @ - disable notices, if $obj or $prop1 doesn't exist\n$val=@$obj->prop1->prop2?:$def;\n```\n\n\n```php\n<?php\nerror_reporting(E_ALL);\nini_set('display_errors',1);\nfunction nvl(&$var,$def)\n{\n\treturn isset($var)?$var:$def;\n}\n\n$arr          =['test'=>123,];\n$arr2['test'] =nvl($arr['test'],999);\n$arr2['test2']=nvl($arr['test2'],999);\necho '<pre>'.print_r($arr2,true).'</pre>';\n```"
  },
  {
    "html_url": "https://gist.github.com/e031fd0dc0e41ee3cd8f",
    "description": "PHPExcel wrapper example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e031fd0dc0e41ee3cd8f/raw/d30dda3e9d4bdfd9f7bdb5351f6a7170a300bf37/phpexcel-wrapper-example.md"
    ],
    "content": "PHPExcel wrapper example\n===\n\nWrapper class\n\n```php\n<?php\n/**\n * @property PHPExcel           $excel\n * @property PHPExcel_Worksheet $sheet\n */\nclass Exporter extends CComponent\n{\n\tpublic $data;\n\tpublic $firstRowHeader;\n\tpublic $options=[];\n\n\tprivate $excel;\n\tprivate $sheet;\n\tprivate $activeSheetIdx;\n\tprivate $idxRow;\n\tprivate $idxCol;\n\tprivate $fileName;\n\tprivate $url;\n\tprivate $download;\n\tprivate $header;\n\n\tfunction __construct(array $options)\n\t{\n\t\t$this->options       =$options;\n\t\t$this->download      =isset($options['save']['download'])?$options['save']['download']:false;\n\t\t$this->data          =isset($options['data'])?$options['data']:[];\n\t\t$this->firstRowHeader=isset($options['firstRowHeader'])?$options['firstRowHeader']:false;\n\t\t$this->header        =isset($options['header'])?$options['header']:false;\n\t\tspl_autoload_unregister(['YiiBase','autoload']);\n\t\tYii::import('ext.phpoffice.PHPExcel',true);\n\t\tspl_autoload_register(['YiiBase','autoload']);\n\t\t$this->excel=new PHPExcel();\n\t}\n\n\tprivate function endsWith($haystack,$needle)\n\t{\n\t\treturn $needle==='' || substr_compare($haystack,$needle,-strlen($needle),100,true)===0;\n\t}\n\n\tprivate function startsWith($haystack,$needle)\n\t{\n\t\treturn strncmp($haystack,$needle,strlen($needle))===0;\n\t}\n\n\tprivate function setProperties()\n\t{\n\t\tif(!empty($this->options['properties']) && is_array($this->options['properties']))\n\t\t{\n\t\t\t$prop_mngr=$this->excel->getProperties();\n\t\t\tforeach($this->options['properties'] as $prop=>$val)\n\t\t\t{\n\t\t\t\t$method='set'.ucfirst($prop);\n\t\t\t\tif(method_exists($prop_mngr,$method))\n\t\t\t\t\t$prop_mngr->{$method}($val);\n\t\t\t}\n\t\t}\n\t\treturn $this;\n\t}\n\n\tprivate function setHeaders()\n\t{\n\t\tif(is_array($this->header) && !empty($this->header))\n\t\t{\n\t\t\t$this->idxCol=0;\n\t\t\tforeach($this->header as $colName)\n\t\t\t\t$this->sheet->setCellValueExplicitByColumnAndRow($this->idxCol++,$this->idxRow,$colName);\n\t\t\t$this->idxRow++;\n\t\t}\n\t\tif($this->firstRowHeader)\n\t\t{\n\t\t\t$this->idxCol=0;\n\t\t\tforeach($this->data[0] as $colName=>$colValue)\n\t\t\t\t$this->sheet->setCellValueExplicitByColumnAndRow($this->idxCol++,$this->idxRow,$colName);\n\t\t\t$this->idxRow++;\n\t\t}\n\t\treturn $this;\n\t}\n\n\tprivate function setRows()\n\t{\n\t\tforeach($this->data as $row)\n\t\t{\n\t\t\t$this->idxCol=0;\n\t\t\tforeach($row as $col=>$val)\n\t\t\t\t$this->sheet->setCellValueExplicitByColumnAndRow($this->idxCol++,$this->idxRow,$val);\n\t\t\t$this->idxRow++;\n\t\t}\n\t\treturn $this;\n\t}\n\n\tprivate function genFileName()\n\t{\n\t\t$dir_def       ='files';\n\t\t$dir_          =isset($this->options['save']['dir'])?trim($this->options['save']['dir']):\"$dir_def\";\n\t\t$dir_          =$this->endsWith($dir_,'/')?$dir_:$dir_.'/';\n\t\t$pfx_          =isset($this->options['save']['prefix'])?$this->options['save']['prefix']:'export';\n\t\t$ext_          =isset($this->options['save']['ext'])?$this->options['save']['ext']:'xlsx';\n\t\t$url_          =isset($this->options['save']['url'])?$this->options['save']['url']:$dir_;\n\t\t$url_          =$this->endsWith($url_,'/')?$url_:$url_.'/';\n\t\t$tmpFilename   =@tempnam($dir_,$pfx_);\n\t\t$this->fileName=$tmpFilename.\".$ext_\";\n\t\trename($tmpFilename,$this->fileName);\n\t\t$this->url=$url_.basename($this->fileName);\n\t\treturn $this;\n\t}\n\n\tprivate function save()\n\t{\n\t\t$this->genFileName();\n\t\t$writer=PHPExcel_IOFactory::createWriter($this->excel,'Excel2007');\n\t\tif($this->download)\n\t\t{\n\t\t\t$fileName=basename($this->fileName);\n\t\t\t// Redirect output to a client’s web browser (Excel2007)\n\t\t\theader('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n\t\t\theader('Content-Disposition: attachment;filename=\"'.$fileName.'\"');\n\t\t\theader('Cache-Control: max-age=0');\n\t\t\t// If you're serving to IE 9, then the following may be needed\n\t\t\t//header('Cache-Control: max-age=1');\n\t\t\t// If you're serving to IE over SSL, then the following may be needed\n\t\t\t//header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // Date in the past\n\t\t\t//header('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT'); // always modified\n\t\t\t//header('Cache-Control: cache, must-revalidate'); // HTTP/1.1\n\t\t\t//header('Pragma: public'); // HTTP/1.0\n\t\t\t$writer->save('php://output');\n\t\t\texit;\n\t\t}\n\t\telse\n\t\t\t$writer->save($this->fileName);\n\t\treturn $this;\n\t}\n\n\tpublic function setActiveSheetIdx($idx=0)\n\t{\n\t\t$this->sheet =$this->excel->setActiveSheetIndex($idx);\n\t\t$this->idxRow=1;\n\t\t$this->idxCol=0;\n\t\treturn $this;\n\t}\n\n\tpublic function export()\n\t{\n\t\tif(is_array($this->data) && !empty($this->data))\n\t\t{\n\t\t\t$this->setProperties()\n\t\t\t\t->setActiveSheetIdx()\n\t\t\t\t->setHeaders()\n\t\t\t\t->setRows()\n\t\t\t\t->save();\n\t\t\treturn [\n\t\t\t\t'file'=>$this->fileName,\n\t\t\t\t'url' =>$this->url,\n\t\t\t];\n\t\t}\n\t\telse\n\t\t\tYii::log('Data is not array or is empty. data:'.print_r($this->data,true));\n\t\treturn false;\n\t}\n}\n```\n\nUsing the wrapper class\n\n```php\n\tpublic function actionExport()\n\t{\n\t\t$exporter=new Exporter([\n\t\t\t'properties'=>[\n\t\t\t\t'creator'       =>'Me',\n\t\t\t\t'lastModifiedBy'=>'Neo',\n\t\t\t\t'title'         =>'Workplaces',\n\t\t\t\t'subject'       =>'List of workplaces',\n\t\t\t\t'description'   =>'Very long description.',\n\t\t\t\t'keywords'      =>'workplace,reference',\n\t\t\t\t'category'      =>'Reference',\n\t\t\t],\n\t\t\t'data'      =>Branch::model()->workplaces(),\n\t\t\t'header'    =>['Code','Branch'],\n\t\t\t//'save'      =>[\n\t\t\t//  'download'=>true,\n\t\t\t//],\n\t\t]);\n\t\t$info    =$exporter->export();\n\t\tif(isset($info['url']))\n\t\t\techo json_encode($info);\n  }\n```"
  },
  {
    "html_url": "https://gist.github.com/4225b3edaa4e60ceb1fe",
    "description": "Using PHPExcel in Yii - download generated file in a browser",
    "files": [
      "https://gist.githubusercontent.com/umidjons/4225b3edaa4e60ceb1fe/raw/dbfe12cb87fcc02b80aed3181d4f39128e8af0cb/phpexcel-yii-download.md"
    ],
    "content": "Using PHPExcel in Yii - download generated file in a browser\n===\n\n```php\n<?php\n// replace auto loader and import PHPExcel\nspl_autoload_unregister(['YiiBase','autoload']);\nYii::import('ext.phpoffice.PHPExcel',true);\nspl_autoload_register(['YiiBase','autoload']);\n\n// prepare data\n$rows=Branch::model()->workplaces();\n\n// create excel object & set its properties\n$ex=new PHPExcel();\n$ex->getProperties()\n\t->setCreator('Me')\n\t->setLastModifiedBy('Neo')\n\t->setTitle('Workplaces')\n\t->setSubject('Workplaces in Tashkent')\n\t->setDescription('Long description')\n\t->setKeywords('workplace,tashkent')\n\t->setCategory('References');\n\n// choose sheet\n$sheet=$ex->setActiveSheetIndex(0);\n\n// initialize column & row indexes\n$idxRow=1;\n$idxCol=0;\n\n// write data into sheet\nforeach($rows as $row)\n{\n\t$idxCol=0;\n\tforeach($row as $col=>$val)\n\t\t$sheet->setCellValueExplicitByColumnAndRow($idxCol++,$idxRow,$val);\n\t$idxRow++;\n}\n\n// download as file\n// Redirect output to a client’s web browser (Excel2007)\nheader('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\nheader('Content-Disposition: attachment;filename=\"workplaces.xlsx\"');\nheader('Cache-Control: max-age=0');\n// If you're serving to IE 9, then the following may be needed\nheader('Cache-Control: max-age=1');\n// If you're serving to IE over SSL, then the following may be needed\nheader('Expires: Mon, 04 Dec 2014 05:00:00 GMT'); // Date in the past\nheader('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT'); // always modified\nheader('Cache-Control: cache, must-revalidate'); // HTTP/1.1\nheader('Pragma: public'); // HTTP/1.0\nPHPExcel_IOFactory::createWriter($ex,'Excel2007')->save('php://output');\nexit;\n```"
  },
  {
    "html_url": "https://gist.github.com/e108459cce61641b601d",
    "description": "First/last day of the current month",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e108459cce61641b601d/raw/260ada3a8912b61fa0fbc87d2dae7990197dde16/first-last-day-month.md"
    ],
    "content": "First/last day of the current month\n===\n\n```php\n<?php\necho date('01.m.Y'); // 01.11.2014\necho date('t.m.Y');  // 30.11.2014\n```"
  },
  {
    "html_url": "https://gist.github.com/86e43ed9294c65670f1c",
    "description": "AutoToast directive to intercept http responses and show toasts accordingly.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/86e43ed9294c65670f1c/raw/dd60928a527298226e6b8964b32f73108c9182da/auto-toast.md"
    ],
    "content": "AutoToast directive to intercept http responses and show toasts accordingly.\n===\n\n`index.html`\n\n```html\n<!DOCTYPE html>\n<html ng-app=\"MyApp\">\n<head>\n\t<title></title>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"toaster.css\">\n\t<script type=\"text/javascript\" src=\"angular.js\"></script>\n\t<script type=\"text/javascript\" src=\"toaster.js\"></script>\n</head>\n<body ng-controller=\"MyCtrl\">\n\n<div auto-toast toaster-container toaster-options=\"{'time-out':0,'position-class':'toast-top-full-width','close-button':true}\"></div>\n\n<h2>Countries:</h2>\n<pre>{{countries | json}}</pre>\n\n<h2>Cities:</h2>\n<pre>{{cities | json}}</pre>\n\n<script type=\"text/javascript\">\n\tangular.module('MyApp',['toaster'])\n\t.config(function($httpProvider){\n\t\t$httpProvider.interceptors.push(function($q,$rootScope){\n\t\t\treturn {\n\t\t\t\t'response':function(response){\n\t\t\t\t\t// intercept response event & broadcast loading-complete event with response as parameter\n\t\t\t\t\t$rootScope.$broadcast('loading-complete',response);\n\t\t\t\t\treturn response || $q.when(response);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t})\n\t.directive('autoToast',function(toaster){\n\t\treturn {\n\t\t\trestrict:'EA',\n\t\t\tlink    :function(scope,element,attrs){\n\t\t\t\t// catch loading-complete event with response parameter\n\t\t\t\tscope.$on('loading-complete',function(event,response){\n\t\t\t\t\tif(angular.isDefined(response.data.code) && angular.isDefined(response.data.message) && response.data.message){\n\t\t\t\t\t\ttoaster.pop(response.data.code==200?'success':'error',null,response.data.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t})\n\t.controller('MyCtrl',function($scope,$http){\n\t\t$http\n\t\t\t.post('data.php?act=countries')\n\t\t\t.success(function(resp){\n\t\t\t\t$scope.countries=resp.content;\n\t\t\t});\n\t\t$http\n\t\t\t.post('data.php?act=cities')\n\t\t\t.success(function(resp){\n\t\t\t\t$scope.cities=resp.content;\n\t\t\t});\n\t});\n</script>\n</body>\n</html>\n```\n\n`data.php` script to retrieve data from DB:\n\n```php\n<?php\nclass Data{\n\tpublic function actionCities(){\n\t\t$rows=[];\n\t\t// todo: get rows from db into associative array\n\t\techo $this->resp(200,'Cities retrieved!',$rows);\n\t}\n\tpublic function actionCountries(){\n\t\t$rows=[];\n\t\t// todo: get rows from db into associative array\n\t\techo $this->resp(200,'Countries retrieved!',$rows);\n\t}\n\tpublic function resp($code=200,$message='',$content='',$http_code=200){\n\t\thttp_response_code($http_code);\n\t\treturn json_encode(['code'=>$code,'message'=>$message,'content'=>$content]);\n\t}\n}\n\nif(isset($_GET['act']))\n{\n\t$data=new Data();\n\t$data->{'action'.ucfirst($_GET['act'])}();\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/44a3a6ae950676f6a22b",
    "description": "Format number as int or float according to precision in PLSQL",
    "files": [
      "https://gist.githubusercontent.com/umidjons/44a3a6ae950676f6a22b/raw/2bbd57d51a483c23c152451a25c518e5ac44050d/format-number-as-int-float.md"
    ],
    "content": "Format number as int or float according to precision in PLSQL\n===\n\n```sql\nselect trim('.' from to_char(1.00,'fm9999999.99')) from dual\n-- OUTPUT:\n1\n\nselect trim('.' from to_char(1.9,'fm9999999.99')) from dual\n-- OUTPUT:\n1.9\n\nselect trim('.' from to_char(1.955,'fm9999999.99')) from dual\n-- OUTPUT:\n1.96\n```"
  },
  {
    "html_url": "https://gist.github.com/413ea63ba55b8496f283",
    "description": "Get list of sorted file names from given directory",
    "files": [
      "https://gist.githubusercontent.com/umidjons/413ea63ba55b8496f283/raw/0338df3020df3fc715dd92f5d0c70e6c0b2805b4/dir-sorted-files.md"
    ],
    "content": "Get list of sorted file names from given directory\n===\n\n```bat\ndir myfolder /Oen /B\n```\n\nList files from `myfolder` folder, sort them by extension `/Oe`, \nthen sort by name `/On`, print only file names `/B`."
  },
  {
    "html_url": "https://gist.github.com/bb8330e5e1a0023fa0ad",
    "description": "Resolving multiple promises before state change",
    "files": [
      "https://gist.githubusercontent.com/umidjons/bb8330e5e1a0023fa0ad/raw/0cd9587ce970d8964e51813c0ab4a1cb4fe39986/resolving-multiple-promises-before-state-change.md"
    ],
    "content": "Resolving multiple promises before state change\n===\n\n`app.js`\n```js\nangular.module('App',['ui.router'])\n\t.factory('MyFactory',function($http){\n\t\treturn {\n\t\t\tcommon:{\n\t\t\t\tcountries:function(){\n\t\t\t\t\treturn $http.post('/scripts/countries.php');\n\t\t\t\t},\n\t\t\t\tcities   :function(){\n\t\t\t\t\treturn $http.post('/scripts/cities.php');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\t.config(function($stateProvider,$urlRouterProvider){\n\t\t$urlRouterProvider.otherwise('/');\n\t\t$stateProvider\n\t\t\t.state('parent',{ // abstract parent state for all states\n\t\t\t\turl       :'/parent',\n\t\t\t\tabstract  :true,\n\t\t\t\ttemplate  :'<ui-view>', // important!\n\t\t\t\tresolve   :{\n\t\t\t\t\tdata:function($q,Data){\n\t\t\t\t\t\tvar def=$q.defer();\n\t\t\t\t\t\t// both are promises\n\t\t\t\t\t\tvar c1=Data.common.countries();\n\t\t\t\t\t\tvar c2=Data.common.cities();\n\t\t\t\t\t\t// just to see when data loaded:\n\t\t\t\t\t\tc1.then(function(resp){console.log('Countries loaded:',resp);});\n\t\t\t\t\t\tc2.then(function(resp){console.log('Cities loaded:',resp);});\n\t\t\t\t\t\t// resolve when all data loaded\n\t\t\t\t\t\t$q.all([c1,c2]).then(function(resp){\n\t\t\t\t\t\t\tconsole.log('All data loaded:',resp);\n\t\t\t\t\t\t\tdef.resolve(resp);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn def.promise;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcontroller:function($scope,data){\n\t\t\t\t\tconsole.log('Parent controller:',data);\n\t\t\t\t\t// available in all scopes\n\t\t\t\t\t$scope.common.countries=data[0].data;\n\t\t\t\t\t$scope.common.cities=data[1].data;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('parent.child',{\n\t\t\t\turl        :'/child',\n\t\t\t\tresolve    :{data:function(data){ return data; }},\n\t\t\t\ttemplateUrl:'partials/child.html',\n\t\t\t\tcontroller :'MyCtrl'\n\t\t\t});\n\t})\n\t.controller('MyCtrl',function($scope){\n\t\tconsole.log('Child controller');\n\t\tconsole.log('Countries:',$scope.common.countries);\n\t\tconsole.log('Cities:',$scope.common.cities);\n\t});\n```\n\n`partials/child.html`\n```html\n<h3>Countries</h3>\n<table class=\"table table-striped\">\n\t<tr ng-repeat=\"c in common.countries\">\n\t\t<td>{{c.code}}</td>\n\t\t<td>{{c.name}}</td>\n\t</tr>\n</table>\n```"
  },
  {
    "html_url": "https://gist.github.com/52fe03bbb3140c2cbc35",
    "description": "HTML <select multiple> without CTRL key.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/52fe03bbb3140c2cbc35/raw/6be75aaf0c3e0fb4f67e35f06199ebaf12fec3be/select-multiple-without-ctrl.md"
    ],
    "content": "HTML `select multiple` without `CTRL` key.\n===\n\nOur `HTML` content:\n```html\n<select multiple style=\"width:200px;\">                \n    <option value=\"1\">1</option>\n    <option value=\"2\">2</option>\n    <option value=\"3\">3</option>\n    <option value=\"4\">4</option>\n    <option value=\"5\">5</option>\n    <option value=\"6\">6</option>\n    <option value=\"7\">7</option>\n    <option value=\"8\">8</option>\n</select>\n```\n\n`jQuery` code to toggle selection on `mousedown` event (only for Chrome):\n```js\n$(\"select[multiple] option\").mousedown(function(){\n  $(this).attr('selected',function(idx,attr){return attr=='selected'?null:'selected'});\n  return false;\n});\n```\n\nThis works on Chrome, Firefox, but blinks on selection:\n```js\n(function(){\n\tvar selected={};\n\t$('select').click(function(e){\n\t\tvar $this=$(this),options=this.options,option,value,n;\n\t\tvalue=$this.val();\n\t\tfor(n=0; n<options.length; ++n){\n\t\t\toption=options[n];\n\t\t\tif(option.value==value) selected[value]= !selected[value];\n\t\t\toption.selected= !!selected[option.value];\n\t\t}\n\t\treturn false;\n\t});\n})();\n```"
  },
  {
    "html_url": "https://gist.github.com/ee9b536397ae092b8a8d",
    "description": "Truncate text with CSS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ee9b536397ae092b8a8d/raw/2632409022c946c359365b9b88b76ff97290540f/truncate-text-css.md"
    ],
    "content": "Truncate text with CSS\n===\n\nTruncates text and put `...` at the end.\n\n```css\n.alert{\n  width:300px; /* or max-width */\n  display: block; /* or inline-block */\n  text-overflow: ellipsis;\n  overflow:hidden;\n  white-space:nowrap;\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/fa568bdf82be67bc500e",
    "description": "Parse $_POST data when enctype=multipart/form-data",
    "files": [
      "https://gist.githubusercontent.com/umidjons/fa568bdf82be67bc500e/raw/347c01a00b2830682df8e728c51c3dd29f808442/parse-query-string.md"
    ],
    "content": "Parse $_POST data when enctype=multipart/form-data\n===\n\n```php\n<?php\nparse_str('NAME=Mike&AGE=23&AVATAR%5BwebkitRelativePath%5D=&AVATAR%5BlastModified%5D=1312288833000&&AVATAR%5Bname%5D=Chrysanthemum.jpg&AVATAR%5Btype%5D=image%2Fjpeg&AVATAR%5Bsize%5D=879394&',$res);\necho '<pre>'.print_r($res,true).'</pre>';\n```\nOutput\n```\nArray\n(\n    [NAME] => Mike\n    [AGE] => 23\n    [AVATAR] => Array\n        (\n            [webkitRelativePath] => \n            [lastModified] => 1312288833000\n            [name] => Chrysanthemum.jpg\n            [type] => image/jpeg\n            [size] => 879394\n        )\n\n)\n```\n\nI used `parse_str` function, when I want to upload file and also send additional \npost data (from `AngularJS`) to the server (in `Yii framework`).\n\n```php\n<?php\n\tpublic function actionUserAdd()\n\t{\n\t\tif(isset($_POST['user']))\n\t\t{\n\t\t\tparse_str($_POST['user'],$_POST['user']);\n\t\t\t$user            =new User();\n\t\t\t$user->attributes=$_POST['user'];\n\t\t\tif($user->validate())\n\t\t\t{\n\t\t\t\t$user_id=$user->add();\n\t\t\t\tif($user_id)\n\t\t\t\t{\n\t\t\t\t\t// set roles and privileges\n\t\t\t\t\t$auth_items=array_merge([],F::valArr($_POST['user']['ROLES']),F::valArr($_POST['user']['PRIVILEGES']));\n\t\t\t\t\t$user->assign($user_id,$auth_items);\n\t\t\t\t\t// upload/set avatar\n\t\t\t\t\t$user->setAvatar($user_id,$_FILES['file']);\n\t\t\t\t\tYii::app()->odb->commit();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tF::resp(400,'Adding new user failed.');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tF::resp(400,'Invalid user data.');\n\t}\n```"
  },
  {
    "html_url": "https://gist.github.com/677202fd06b3e67ea55a",
    "description": "Match directive",
    "files": [
      "https://gist.githubusercontent.com/umidjons/677202fd06b3e67ea55a/raw/b70b796094781de943483f5c0a05d317c391f45a/match-directive.md"
    ],
    "content": "Match directive\n===\n\n```javascript\nangular.module('app',[])\n  .directive('match',function(){\n\t\treturn {\n\t\t\trequire :'ngModel',\n\t\t\trestrict:'A',\n\t\t\tscope   :{\n\t\t\t\tmatch:'='\n\t\t\t},\n\t\t\tlink    :function(scope,elem,attrs,ctrl){\n\t\t\t\tscope.$watch(function(){\n\t\t\t\t\tvar modelValue=ctrl.$modelValue || ctrl.$$invalidModelValue;\n\t\t\t\t\treturn (ctrl.$pristine && angular.isUndefined(modelValue)) || scope.match===modelValue;\n\t\t\t\t},function(currentValue){\n\t\t\t\t\tctrl.$setValidity('match',currentValue);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n```\n\nExample\n```html\n<div class=\"col-sm-2\">\n\t<label>Пароль</label>\n\t<input class=\"form-control\" type=\"password\" ng-model=\"user.password\">\n</div>\n<div class=\"col-sm-2\">\n\t<label>Пароль (повторно)</label>\n\t<input class=\"form-control\" type=\"password\" ng-model=\"user.password2\" match=\"user.password\">\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/1e6aefd6a17bf71aa9d0",
    "description": "Git on Windows: Creating a network shared central repository.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1e6aefd6a17bf71aa9d0/raw/0f6d6f3ce900030ffeaad5fd25e03e1d011a44d6/git-network-shared-central-repo.md"
    ],
    "content": "Git on Windows: Creating a network shared central repository.\n===\n\nOriginal post http://elegantcode.com/2011/06/18/git-on-windows-creating-a-network-shared-central-repository/\n\n```bat\ncd d:\\projects\\repo\\\nmkdir proj1\n```\nShare `proj1` folder and create `bare git repository` in it.\n```bat\ncd proj1\npushd \\\\mypc\\proj1\ngit init --bare\npopd\n```\nAdd remote origin in client.\n```bat\ngit remote add origin //mypc/proj1\ngit push origin master\n```\nFrom here we can use `fetch/pull/push` commands."
  },
  {
    "html_url": "https://gist.github.com/b88a0c0eadb6597a3c1c",
    "description": "Date/Timestamp to Epoche",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b88a0c0eadb6597a3c1c/raw/df9f33811f646695b8b98021016a4cdd05d4f853/date-timestamp-to-epoche.md"
    ],
    "content": "Date/Timestamp to Epoche\n===\n\n```sql\nCREATE OR REPLACE FUNCTION GetEpoche(theTimestamp IN TIMESTAMP, timezone IN VARCHAR2 DEFAULT SESSIONTIMEZONE) RETURN NUMBER DETERMINISTIC IS\n\n    timestampUTC TIMESTAMP;\n    theInterval INTERVAL DAY(9) TO SECOND;\n    epoche NUMBER;\nBEGIN\n\n    timestampUTC := FROM_TZ(theTimestamp, timezone) AT TIME ZONE 'UTC';    \n    theInterval := TO_DSINTERVAL(timestampUTC - TO_TIMESTAMP('1970-01-01', 'YYYY-MM-DD') );\n    epoche := EXTRACT(DAY FROM theInterval)*24*60*60 \n        + EXTRACT(HOUR FROM theInterval)*60*60 \n        + EXTRACT(MINUTE FROM theInterval)*60 \n        + EXTRACT(SECOND FROM theInterval);\n    RETURN ROUND(1000*epoche);\nEND GetEpoche;\n```\n\nExample:\n```sql\nselect GetEpoche(sysdate),sysdate from dual;\n-----------------------------------------\n| 1413874146000\t| 21-Oct-14 11:49:06 AM |\n-----------------------------------------\n```"
  },
  {
    "html_url": "https://gist.github.com/2d48937e82521bd789c4",
    "description": "ngPattern examples",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2d48937e82521bd789c4/raw/02f8970def5cfd30ad012d71ceddd6007aba1e8a/ngpattern-examples.md"
    ],
    "content": "ngPattern examples\n===\n\nUsername:\n```html\n<input type=\"text\" ng-model=\"user.username\" class=\"form-control\" ng-pattern=\"/^[a-zA-Z][.0-9a-zA-Z_-]{1,20}$/\">\n```\n\nPassword:\n```html\n<input class=\"form-control\" type=\"password\" ng-model=\"user.password\" ng-pattern=\"/^[a-zA-Z0-9_-~!@#$%^&*\\+=\\(\\)\\[\\].,|<>?\\/]{3,20}$/\">\n```\n\nLastname, firstname, patronymic (maybe in Russian and Uzbek):\n```html\n<input class=\"form-control\" type=\"text\" ng-model=\"user.last_name\" ng-pattern=\"/^[a-zA-Zа-яА-ЯўқғҳЎҚҒҲ-]{1,50}$/\">\n```"
  },
  {
    "html_url": "https://gist.github.com/df3acf00493325cda145",
    "description": "Set content type for all POST request",
    "files": [
      "https://gist.githubusercontent.com/umidjons/df3acf00493325cda145/raw/9d1666bd734f200cab959b2e0a693a5d3bd7ce32/set-content-type-for-all-post-requests.md"
    ],
    "content": "Set content type for all POST requests\n===\n\n```js\nangular.module('MyApp',[])\n\t.config(function($httpProvider){\n\t\t// set default content type for POST requests\n\t\t$httpProvider.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded;charset=utf-8';\n\t\t/**\n\t\t * The workhorse; converts an object to x-www-form-urlencoded serialization.\n\t\t * @param {Object} obj\n\t\t * @return {String}\n\t\t */\n\t\tvar param=function(obj){\n\t\t\tvar query='',name,value,fullSubName,subName,subValue,innerObj,i;\n\t\t\tfor(name in obj){\n\t\t\t\tvalue=obj[name];\n\t\t\t\tif(value instanceof Array){\n\t\t\t\t\tfor(i=0; i<value.length; ++i){\n\t\t\t\t\t\tsubValue=value[i];\n\t\t\t\t\t\tfullSubName=name+'['+i+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value instanceof Object){\n\t\t\t\t\tfor(subName in value){\n\t\t\t\t\t\tsubValue=value[subName];\n\t\t\t\t\t\tfullSubName=name+'['+subName+']';\n\t\t\t\t\t\tinnerObj={};\n\t\t\t\t\t\tinnerObj[fullSubName]=subValue;\n\t\t\t\t\t\tquery+=param(innerObj)+'&';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(value!==undefined && value!==null)\n\t\t\t\t\tquery+=encodeURIComponent(name)+'='+encodeURIComponent(value)+'&';\n\t\t\t}\n\t\t\treturn query.length?query.substr(0,query.length-1):query;\n\t\t};\n\n\t\t// Override $http service's default transformRequest\n\t\t$httpProvider.defaults.transformRequest=[function(data){\n\t\t\treturn angular.isObject(data) && String(data)!=='[object File]'?param(data):data;\n\t\t}];\n\t})\n\t.controller('MyCtrl',function($scope,$http){\n\t\t$scope.myRequest=function(){\n\t\t\t// now on PHP var1 and var2 available as $_POST['var1'] and $_POST['var2']\n\t\t\t$http({method:'POST',url:'/some/url',data:{var1:123,var2:'test'}}).success(function(response){\n\t\t\t\tconsole.log('response=',response);\n\t\t\t});\n\t\t}\n\t});\n```"
  },
  {
    "html_url": "https://gist.github.com/2eb2ba3ccd31b90f15d5",
    "description": "Allow null values on filter",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2eb2ba3ccd31b90f15d5/raw/b7f1df2cb2ea573c431d3022c120bccbba43621f/allow-null-values-on-filter.md"
    ],
    "content": "Allow null values on filter\n===\n\n```js\nangular.module('MyApp',[])\n\t.controller('MyCtrl',function($scope){\n\t\t// this filter allows null values to be filtered,\n\t\t// for example, show active users or all users (all users means no filter by user)\n\t\t$scope.allowNull=function(input,actual){\n\t\t\tif(actual===null) return true;\n\t\t\telse return (''+input).toLowerCase().indexOf((''+actual).toLowerCase())> -1;\n\t\t}\n\t});\n```\n\n```html\n<div ng-app=\"MyApp\" ng-controller=\"MyCtrl\">\n\t<select ng-model=\"userfilter.state\" ng-options=\"stat.id as stat.title for stat in statuses\">\n\t\t<option value=\"\">All</option>\n\t</select>\n\t<div class=\"user-details\" ng-repeat=\"user in users|filter:userfilter:allowNull\">\n\t\t<h3>{{user.name}}</h3>\n\t\t<p>{{user.about}}</p>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/f224f7c41a7a73fb681e",
    "description": "Using TCPDF",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f224f7c41a7a73fb681e/raw/af7630feb9276266183be6a7cbbd3a88900db791/using-tcpdf.md"
    ],
    "content": "Using TCPDF example\n===\n\n```php\n<?php\n\n/**\n * Возвращает сумму прописью\n * @author runcore\n * @uses   morph(...)\n */\nfunction num2str($num)\n{\n\t$nul    ='ноль';\n\t$ten    =[\n\t\t['','один','два','три','четыре','пять','шесть','семь','восемь','девять'],\n\t\t['','одна','две','три','четыре','пять','шесть','семь','восемь','девять'],\n\t];\n\t$a20    =['десять','одиннадцать','двенадцать','тринадцать','четырнадцать','пятнадцать','шестнадцать','семнадцать','восемнадцать','девятнадцать'];\n\t$tens   =[2=>'двадцать','тридцать','сорок','пятьдесят','шестьдесят','семьдесят','восемьдесят','девяносто'];\n\t$hundred=['','сто','двести','триста','четыреста','пятьсот','шестьсот','семьсот','восемьсот','девятьсот'];\n\t$unit   =[ // Units\n\t\t['тийин','тийин','тийин',1],\n\t\t//['копейка','копейки','копеек',1],\n\t\t//['рубль','рубля','рублей',0],\n\t\t['сум','сум','сумов',0],\n\t\t['тысяча','тысячи','тысяч',1],\n\t\t['миллион','миллиона','миллионов',0],\n\t\t['миллиард','милиарда','миллиардов',0],\n\t];\n\t//\n\tlist($rub,$kop)=explode('.',sprintf(\"%015.2f\",floatval($num)));\n\t$out=array();\n\tif(intval($rub)>0)\n\t{\n\t\tforeach(str_split($rub,3) as $uk=>$v)\n\t\t{ // by 3 symbols\n\t\t\tif(!intval($v)) continue;\n\t\t\t$uk    =sizeof($unit)-$uk-1; // unit key\n\t\t\t$gender=$unit[$uk][3];\n\t\t\tlist($i1,$i2,$i3)=array_map('intval',str_split($v,1));\n\t\t\t// mega-logic\n\t\t\t$out[]=$hundred[$i1]; # 1xx-9xx\n\t\t\tif($i2>1) $out[]=$tens[$i2].' '.$ten[$gender][$i3]; # 20-99\n\t\t\telse $out[]=$i2>0?$a20[$i3]:$ten[$gender][$i3]; # 10-19 | 1-9\n\t\t\t// units without rub & kop\n\t\t\tif($uk>1) $out[]=morph($v,$unit[$uk][0],$unit[$uk][1],$unit[$uk][2]);\n\t\t}\n\t}\n\telse $out[]=$nul;\n\t$out[]=morph(intval($rub),$unit[1][0],$unit[1][1],$unit[1][2]); // rub\n\t$out[]=$kop.' '.morph($kop,$unit[0][0],$unit[0][1],$unit[0][2]); // kop\n\treturn trim(preg_replace('/ {2,}/',' ',join(' ',$out)));\n}\n\n/**\n * Склоняем словоформу\n * @ author runcore\n */\nfunction morph($n,$f1,$f2,$f5)\n{\n\t$n=abs(intval($n))%100;\n\tif($n>10 && $n<20) return $f5;\n\t$n=$n%10;\n\tif($n>1 && $n<5) return $f2;\n\tif($n==1) return $f1;\n\treturn $f5;\n}\n\n// Include the main TCPDF library (search for installation path).\nrequire_once('tcpdf_include.php');\n\n$font='freeserif';\n\n// create new PDF document\n$pdf=new TCPDF('P','pt','A4',true,'UTF-8',false);\n\n// set document information\n$pdf->SetCreator(PDF_CREATOR);\n$pdf->SetAuthor('garov.uz');\n$pdf->SetTitle('Накладная счет фактура');\n$pdf->SetSubject('TCPDF Tutorial');\n$pdf->SetKeywords('залоговый реестр, накладная счет фактура');\n\n$pdf->setHeaderFont([$font,'',8]);\n$pdf->SetHeaderData('',0,'Источник: garov.uz');\n$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA,'',PDF_FONT_SIZE_DATA));\n\n// set default monospaced font\n$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);\n\n// set margins\n$pdf->SetMargins(10,27,10);\n$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);\n$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);\n\n$pdf->SetAutoPageBreak(true,PDF_MARGIN_BOTTOM);\n$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);\n\n$pdf->SetFont($font,'',10);\n$pdf->AddPage();\n$pdf->setCellPaddings(2,1,2,1);\n$pdf->setCellMargins(1,1,1,1);\n$pdf->SetFillColor(255,255,255);\n\n$pdf->MultiCell(0,5,\"НАКЛАДНАЯ СЧЕТ ФАКТУРА №22\\nот 30.09.2014\\nпо договору публичная оферта №114225000108 от 01.07.2014\",0,'C');\n$pdf->Ln(1);\n\n$left_block=[\n\t['Поставщик','\"GAROV REESTRI\" DUK','Получатель','АКИБ \"Ипотекабанк\"'],\n\t['Адрес','г.Ташкент проспект Узбекистанский дом 6','Адрес','г.Ташкент, ул.Мустакиллик 17'],\n\t['Телефон','2126003','Телефон','1508941'],\n\t['Р/С','21596000100372274001','Р/С','19907000700000937121'],\n\t['в','Ташкентский гор. РКЦ ЦБ','в','ИПОТЕКА-БАНК АКИБ ОПЕРУ'],\n\t['город','г.Ташкент','город','г.Ташкент'],\n\t['МФО','00014','МФО','00937'],\n\t['ИНН','302985767','ИНН','202858483'],\n\t['ОКОНХ','82100','ОКОНХ','96120'],\n];\n\n$label_w =70;\n$text_w  =210;\n$h       =12;\n$fs      =9;\n$border  =0;\n$border_t='B';\nforeach($left_block as $row)\n{\n\tlist($label1,$text1,$label2,$text2)=$row;\n\t$pdf->setCellMargins(1,1,1,1);\n\t$pdf->SetFont($font,'B',$fs);\n\t$pdf->MultiCell($label_w,$h,$label1,$border,'R',1,0,'','',true,0,false,true,0,'T',true);\n\t$pdf->SetFont($font,'',$fs);\n\t$pdf->MultiCell($text_w,$h,$text1,$border_t,'L',1,0,'','',true,0,false,true,0,'T',true);\n\n\t$pdf->setCellMargins(10,1,1,1);\n\t$pdf->SetFont($font,'B',$fs);\n\t$pdf->MultiCell($label_w,$h,$label2,$border,'R',1,0,'','',true,0,false,true,0,'T',true);\n\t$pdf->setCellMargins(1,1,1,1);\n\t$pdf->SetFont($font,'',$fs);\n\t$pdf->MultiCell($text_w,$h,$text2,$border_t,'L',1,1,'','',true,0,false,true,0,'T',true);\n}\n\n$pdf->Ln(4);\n\n$total_text=num2str(64581.00);\n\n$table=<<<TABLE\n<style type=\"text/css\">\n.tg  {\n\tborder-collapse:collapse;\n\tborder-spacing:0;\n}\n.tg td{\n\tfont-size:10px;\n\tpadding:1px;\n\tborder:1px solid #000;\n\toverflow:hidden;\n\tword-break:normal;\n}\n.tg th{\n\tfont-size:10px;\n\tfont-weight:bolder;\n\tpadding:1px;\n\tborder:1px solid #000;\n\toverflow:hidden;\n\tword-break:normal;\n\ttext-align:center;\n}\n.tg .c1{width:25px;}\n.tg .c2{width:170px;}\n.tg .c3{width:30px;}\n.tg .c4{width:50px;}\n.tg .c5{width:60px;}\n.tg .c6{width:100px;}\n.tg .c7{width:60px;}\n.tg .c71{width:29px;}\n.tg .c72{width:29px;}\n.tg .c8{width:100px;}\n.tg .c81{width:28px;}\n.tg .c82{width:69px;}\n.tg .c9{width:100px;}\n.tg .num{text-align:right;}\n</style>\n<table class=\"tg\">\n  <tr>\n    <th class=\"tg-031e c1\" rowspan=\"2\">№ п.п.</th>\n    <th class=\"tg-031e c2\" rowspan=\"2\">Наименование товаров (работ,услуг)</th>\n    <th class=\"tg-031e c3\" rowspan=\"2\">Ед.изм</th>\n    <th class=\"tg-031e c4\" rowspan=\"2\">Кол-во</th>\n    <th class=\"tg-031e c5\" rowspan=\"2\">Цена</th>\n    <th class=\"tg-031e c6\" rowspan=\"2\">Стоимость поставки</th>\n    <th class=\"tg-031e c7\" colspan=\"2\">Акциз</th>\n    <th class=\"tg-031e c8\" colspan=\"2\">НДС</th>\n    <th class=\"tg-031e c9\" rowspan=\"2\">Стоимость поставки с учетом НДС</th>\n  </tr>\n  <tr>\n    <th class=\"tg-031e c71\">Ставка</th>\n    <th class=\"tg-031e c72\">Сумма</th>\n    <th class=\"tg-031e c81\">Ставка</th>\n    <th class=\"tg-031e c82\">Сумма</th>\n  </tr>\n  <tr>\n    <td class=\"tg-031e c1 num\">1</td>\n    <td class=\"tg-031e c2\">внесение записи в залоговый реестр</td>\n    <td class=\"tg-031e c3\">шт.</td>\n    <td class=\"tg-031e c4 num\">2</td>\n    <td class=\"tg-031e c5 num\">21527.00</td>\n    <td class=\"tg-031e c6 num\">43054.00</td>\n    <td class=\"tg-031e c7\" colspan=\"2\">Без акциза</td>\n    <td class=\"tg-031e c81 num\">20</td>\n    <td class=\"tg-031e c82 num\">8610.80</td>\n    <td class=\"tg-031e c9 num\">51664.80</td>\n  </tr>\n  <tr>\n    <td class=\"tg-031e c1 num\">2</td>\n    <td class=\"tg-031e c2\">получение выписок</td>\n    <td class=\"tg-031e c3\">шт.</td>\n    <td class=\"tg-031e c4 num\">1</td>\n    <td class=\"tg-031e c5 num\">10763.50</td>\n    <td class=\"tg-031e c6 num\">10763.50</td>\n    <td class=\"tg-031e c7\" colspan=\"2\">Без акциза</td>\n    <td class=\"tg-031e c81 num\">20</td>\n    <td class=\"tg-031e c82 num\">2152.70</td>\n    <td class=\"tg-031e c9 num\">12916.20</td>\n  </tr>\n  <tr>\n    <td class=\"tg-031e c1 num\"></td>\n    <td class=\"tg-031e c2\">Всего к оплате</td>\n    <td class=\"tg-031e c3\"></td>\n    <td class=\"tg-031e c4 num\"></td>\n    <td class=\"tg-031e c5 num\"></td>\n    <td class=\"tg-031e c6 num\">53817.50</td>\n    <td class=\"tg-031e c7\" colspan=\"2\">Без акциза</td>\n    <td class=\"tg-031e c81 num\"></td>\n    <td class=\"tg-031e c82 num\">10763.50</td>\n    <td class=\"tg-031e c9 num\">64581.00</td>\n  </tr>\n</table>\n<p>Всего на сумму <em><u>$total_text</u></em></p>\nTABLE;\n\n$pdf->writeHTML($table);\n\n// move pointer to last page\n$pdf->lastPage();\n\n// ---------------------------------------------------------\n\n//Close and output PDF document\n$pdf->Output('example_005.pdf','I');\n\n//============================================================+\n// END OF FILE\n//============================================================+\n```"
  },
  {
    "html_url": "https://gist.github.com/0d4a537ac9e03c340c1e",
    "description": "Numbers to Russian text (Сумма прописью)",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0d4a537ac9e03c340c1e/raw/f23009c634b119050420f956eecad4308afcc351/numbers-to-russian-text.md"
    ],
    "content": "Numbers to Russian text (Сумма прописью)\n\n```php\n<?php\n/**\n * Возвращает сумму прописью\n * @author runcore\n * @uses morph(...)\n */\nfunction num2str($num) {\n    $nul='ноль';\n    $ten=array(\n        array('','один','два','три','четыре','пять','шесть','семь', 'восемь','девять'),\n        array('','одна','две','три','четыре','пять','шесть','семь', 'восемь','девять'),\n    );\n    $a20=array('десять','одиннадцать','двенадцать','тринадцать','четырнадцать' ,'пятнадцать','шестнадцать','семнадцать','восемнадцать','девятнадцать');\n    $tens=array(2=>'двадцать','тридцать','сорок','пятьдесят','шестьдесят','семьдесят' ,'восемьдесят','девяносто');\n    $hundred=array('','сто','двести','триста','четыреста','пятьсот','шестьсот', 'семьсот','восемьсот','девятьсот');\n    $unit=array( // Units\n        array('копейка' ,'копейки' ,'копеек',\t 1),\n        array('рубль'   ,'рубля'   ,'рублей'    ,0),\n        array('тысяча'  ,'тысячи'  ,'тысяч'     ,1),\n        array('миллион' ,'миллиона','миллионов' ,0),\n        array('миллиард','милиарда','миллиардов',0),\n    );\n    //\n    list($rub,$kop) = explode('.',sprintf(\"%015.2f\", floatval($num)));\n    $out = array();\n    if (intval($rub)>0) {\n        foreach(str_split($rub,3) as $uk=>$v) { // by 3 symbols\n            if (!intval($v)) continue;\n            $uk = sizeof($unit)-$uk-1; // unit key\n            $gender = $unit[$uk][3];\n            list($i1,$i2,$i3) = array_map('intval',str_split($v,1));\n            // mega-logic\n            $out[] = $hundred[$i1]; # 1xx-9xx\n            if ($i2>1) $out[]= $tens[$i2].' '.$ten[$gender][$i3]; # 20-99\n            else $out[]= $i2>0 ? $a20[$i3] : $ten[$gender][$i3]; # 10-19 | 1-9\n            // units without rub & kop\n            if ($uk>1) $out[]= morph($v,$unit[$uk][0],$unit[$uk][1],$unit[$uk][2]);\n        } //foreach\n    }\n    else $out[] = $nul;\n    $out[] = morph(intval($rub), $unit[1][0],$unit[1][1],$unit[1][2]); // rub\n    $out[] = $kop.' '.morph($kop,$unit[0][0],$unit[0][1],$unit[0][2]); // kop\n    return trim(preg_replace('/ {2,}/', ' ', join(' ',$out)));\n}\n\n/**\n * Склоняем словоформу\n * @ author runcore\n */\nfunction morph($n, $f1, $f2, $f5) {\n    $n = abs(intval($n)) % 100;\n    if ($n>10 && $n<20) return $f5;\n    $n = $n % 10;\n    if ($n>1 && $n<5) return $f2;\n    if ($n==1) return $f1;\n    return $f5;\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/ea0d5e0635628366394e",
    "description": "Fixed layout table",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ea0d5e0635628366394e/raw/a10db7380880499e1bb336a5bb2bd2b4b75b559c/fixed-layout-table.md"
    ],
    "content": "Fixed layout table\n===\n\n```css\n.my-table{ table-layout:fixed; }\n.my-table .c{ overflow-wrap:break-word; }\n.my-table .c1{ width:135px; }\n.my-table .c2{ width:100px; }\n.my-table .c3{ width:60px; }\n```\n\n```html\n<table class=\"my-table\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th class=\"c c1\">Column 1</th>\n\t\t\t<th class=\"c c2\">Column 2</th>\n\t\t\t<th class=\"c c3\">Column 3</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td class=\"c c1\">Column 1 data</td>\n\t\t\t<td class=\"c c2\">Column 2 data</td>\n\t\t\t<td class=\"c c3\">Column 3 data</td>\n\t\t</tr>\n\t</tbody>\n</table>\n```"
  },
  {
    "html_url": "https://gist.github.com/760393b50887dc37e4c0",
    "description": "Database view and relations",
    "files": [
      "https://gist.githubusercontent.com/umidjons/760393b50887dc37e4c0/raw/58f7d5ed93dd7b389a1141f86f09a48826080472/database-view-and-relations.md"
    ],
    "content": "Database view and relations\n===\n\n```php\n<?php\nclass MyView extends CActiveRecord\n{\n\tpublic function primaryKey()\n\t{\n\t\treturn 'CODE';\n\t}\n\n\tpublic function tableName()\n\t{\n\t\treturn 'V_MY';\n\t}\n\n\tpublic function relations()\n\t{\n\t\treturn [\n\t\t\t// MyView.CODE = MyViewChild.V_MY_CODE\n\t\t\t// MyView has one MyViewChild\n\t\t\t'child'=>[self::HAS_ONE,'MyViewChild','V_MY_CODE'],\n\t\t];\n\t}\n\n\tpublic function search()\n\t{\n\t\t$criteria      =new CDbCriteria;\n\t\t$criteria->with=['child']; // search view child\n\t\t$criteria->compare('CODE',$this->CODE);\n\t\t$criteria->compare('NAME',$this->NAME,true);\n\t\t$criteria->compare('ADDRESS',$this->ADDRESS,true);\n\t\treturn new CActiveDataProvider($this,['criteria'=>$criteria,]);\n\t}\n}\n```\n\nAccess related model field in CGridView:\n```php\n<?php\n$this->widget('zii.widgets.grid.CGridView',array(\n\t'id'          =>'myview-grid',\n\t'dataProvider'=>$model->search(),\n\t'columns'     =>[\n\t\t'CODE',\n\t\t'NAME',\n\t\t[\n\t\t\t'header'=>'Field from child table',\n\t\t\t'value' =>'$data->child->FIELD_ON_CHILD',\n\t\t\t'type'  =>'raw',\n\t\t],\n\t],\n));\n```"
  },
  {
    "html_url": "https://gist.github.com/733e1edeadea37b297f6",
    "description": "Execute stored procedure with BLOB parameter in PHP with OCI",
    "files": [
      "https://gist.githubusercontent.com/umidjons/733e1edeadea37b297f6/raw/e72b591832dd7b2e942fe66485f41470d8ae684e/php-oci-blob-storedproc.md"
    ],
    "content": "Execute stored procedure with BLOB parameter in PHP with OCI\n===\n\n```php\n<?php\ndefine('DB_USER','user1');\ndefine('DB_PSWD','pswd1');\ndefine('DB_CONN_STR','MYTNS');\ndefine('DB_CHARSET','AL32UTF8');\n\n$conn=oci_connect(DB_USER,DB_PSWD,DB_CONN_STR,DB_CHARSET);\n$stmt=oci_parse($conn,'BEGIN MYPKG.MYPROC(:pBranch,:pUser,:pFile,:pContent); END;');\n// prepare variables\n$branch_code =978;\n$user_id     =2037484758;\n$filename    =$_FILES['file']['name'];\n$tmp_filename=$_FILES['file']['tmp_name'];\n// bind primitive parameters\noci_bind_by_name($stmt,':pBranch',$branch_code);\noci_bind_by_name($stmt,':pUser',$user_id);\noci_bind_by_name($stmt,':pFile',$filename);\n// bind blob parameter\n$blob=oci_new_descriptor($conn,OCI_DTYPE_LOB);\noci_bind_by_name($stmt,':pContent',$blob,-1,OCI_B_BLOB);\n$bres=$blob->writetemporary(file_get_contents($tmp_filename));\n// execute statement and commit changes\n// specify OCI_NO_AUTO_COMMIT, otherwise you may get INVALID_OCI_HANDLE exception\n$res=oci_execute($stmt,OCI_NO_AUTO_COMMIT);\noci_commit($conn);\n// free resources and close connection\n$blob->free();\noci_free_statement($stmt);\noci_close($conn);\n```"
  },
  {
    "html_url": "https://gist.github.com/52e7d24ef20a692541df",
    "description": "Same height elements",
    "files": [
      "https://gist.githubusercontent.com/umidjons/52e7d24ef20a692541df/raw/561fb19e1704f9b16471f328853e9956a3cea19f/same-height.md"
    ],
    "content": "Same height elements\n===\n\n```javascript\n\tjQuery(document).ready(function($){\n\t\t$(\".thumbnail.same-height\").height(Math.max.apply(null,$(\".thumbnail.same-height\").map(function(){ return $(this).height(); })));\n\t});\n```"
  },
  {
    "html_url": "https://gist.github.com/30c4c9defad5534d3b7f",
    "description": "Using json filter to output object in AngularJS",
    "files": [
      "https://gist.githubusercontent.com/umidjons/30c4c9defad5534d3b7f/raw/4fe0817086a9ae0456b63469d762182ab607deb1/json-filter-angularjs.md"
    ],
    "content": "Using `json` filter to output object in AngularJS\n===\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"app\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title></title>\n\t<script src=\"angular.js\"></script>\n</head>\n<body ng-controller=\"Ctrl\">\n\n<h1>User Info</h1>\n\n<label>Email</label>\n<input type=\"email\" ng-model=\"user.email\"><br>\n\n<label>Last Name</label>\n<input type=\"text\" ng-model=\"user.lastName\"><br>\n\n<label>First Name</label>\n<input type=\"text\" ng-model=\"user.firstName\"><br>\n\n<label>Website</label>\n<input type=\"url\" ng-model=\"user.website\"><br>\n\n<label>Description</label>\n<textarea cols=\"30\" rows=\"10\" ng-model=\"user.description\"></textarea><br>\n\n<label>Password</label>\n<input ng-model=\"user.password\" type=\"password\"><br>\n\n<label>Password (repeat)</label>\n<input type=\"password\" ng-model=\"repeatPassword\"><br>\n\n<label>Roles</label><br>\n<label class=\"checkbox\">\n\t<input type=\"checkbox\" ng-model=\"user.admin\">Is Administrator\n</label>\n<br>\n\n<pre ng-bind=\"user|json\"></pre>\n\n<script>\n\tangular.module('app',[]).controller('Ctrl',function($scope){ });\n</script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/32d70b01ede8678fc7c2",
    "description": "Styling even and odd rows with `ng-class-even` and `ng-class-odd` directives",
    "files": [
      "https://gist.githubusercontent.com/umidjons/32d70b01ede8678fc7c2/raw/412f42531635b09498b4df4569ee3d87e2b1724e/ng-class-even-odd.md"
    ],
    "content": "Styling even and odd rows with `ng-class-even` and `ng-class-odd` directives\n====\n\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"App\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<script src=\"angular.js\"></script>\n\t<title>Users</title>\n\t<style>\n\t\ttable{ border-collapse:collapse; }\n\t\ttd, th{ border:1px solid #999; }\n\t\t.col-1{ width:200px; }\n\t\t.col-2{ width:300px; }\n\t\t.dark{ background-color:#999; }\n\t\t.light{ background-color:#c6d0d0; }\n\t</style>\n</head>\n<body>\n\n<table ng-controller=\"UsersCtrl\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th class=\"col-1\">Name</th>\n\t\t\t<th class=\"col-2\">Age</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr ng-repeat=\"user in users\" ng-class-even=\"'dark'\" ng-class-odd=\"'light'\">\n\t\t\t<td>{{user.name}}</td>\n\t\t\t<td>{{user.age}}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<script>\n\tangular.module('App',[])\n\t\t\t.factory('Users',function(){\n\t\t\t\treturn {\n\t\t\t\t\tquery:function(){\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t{name:'John',age:25,desc:'Software Developer at MacroSoft LLC'},\n\t\t\t\t\t\t\t{name:'Jonatan',age:26,desc:'Professor at University of Tashkent'},\n\t\t\t\t\t\t\t{name:'Nataly',age:27,desc:'Nurse at central hospital'},\n\t\t\t\t\t\t\t{name:'Lucy',age:28,desc:'Teacher at district school'}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.controller('UsersCtrl',function($scope,Users){\n\t\t\t\t$scope.users=Users.query();\n\t\t\t});\n</script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/b3b48c1b331de61daeb7",
    "description": "Show clicked row details. Using ng-switch, ng-click, ng-class, ng-repeat, $index.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b3b48c1b331de61daeb7/raw/829e76451f0a21532f430aaf7b51bb9b2d714288/show-clicked-row-details-right-way.md",
      "https://gist.githubusercontent.com/umidjons/b3b48c1b331de61daeb7/raw/d36e79ab862c68920b67a724bcb5a01d42b90cc1/show-clicked-row-details.md"
    ],
    "content": "Show clicked row details. Using ng-if, ng-repeat-start and ng-repeat-end directives\n===\n\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"App\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<script src=\"angular.js\"></script>\n\t<title>Users</title>\n\t<style>\n\t\ttable{ border-collapse:collapse; }\n\t\ttd, th{ border:1px solid #999; }\n\t</style>\n</head>\n<body>\n\n<table ng-controller=\"UsersCtrl\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th>Name</th>\n\t\t\t<th>Age</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr ng-repeat-start=\"user in users\" ng-click=\"selUser(user)\">\n\t\t\t<td>{{user.name}}</td>\n\t\t\t<td>{{user.age}}</td>\n\t\t</tr>\n\t\t<tr ng-repeat-end ng-if=\"isSelected(user)\">\n\t\t\t<td colspan=\"2\">{{user.desc}}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<script>\n\tangular.module('App',[])\n\t\t\t.factory('Users',function(){\n\t\t\t\treturn {\n\t\t\t\t\tquery:function(){\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t{name:'John',age:25,desc:'Software Developer at MacroSoft LLC'},\n\t\t\t\t\t\t\t{name:'Jonatan',age:26,desc:'Professor at University of Tashkent'},\n\t\t\t\t\t\t\t{name:'Nataly',age:27,desc:'Nurse at central hospital'},\n\t\t\t\t\t\t\t{name:'Lucy',age:28,desc:'Teacher at district school'}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.controller('UsersCtrl',function($scope,Users){\n\t\t\t\t$scope.users=Users.query();\n\t\t\t\t$scope.selUser=function(user){\n\t\t\t\t\t$scope.selected_user=user;\n\t\t\t\t}\n\t\t\t\t$scope.isSelected=function(user){\n\t\t\t\t\treturn $scope.selected_user===user;\n\t\t\t\t}\n\t\t\t});\n</script>\n</body>\n</html>\n```Show clicked row details. Using ng-switch, ng-click, ng-class, ng-repeat, $index.\n===\n\nI want to show additional row (user details) below clicked row (selected user) with details.\nFirst I need some data, therefore I create `Users` factory with `query` method.\nI'll show user `name` and `age` in row by default, but show `desc` only for selected user.\nI create 2 methods, `selUser(user,idx)` - called when clicked onto the row to select user and its index in table,\n`isSelUser(user)` - called to determine, is current row contains selected user.\nI also define `selIdx` to use in `ng-class` to switch class according selected user index.\n\nHere is our AngularJS code:\n\n```javascript\nangular.module('App',[])\n.factory('Users',function(){\n\treturn {\n\t\tquery:function(){\n\t\t\treturn [\n\t\t\t\t{name:'John',age:25,desc:'Software Developer at MacroSoft LLC'},\n\t\t\t\t{name:'Jonatan',age:26,desc:'Professor at University of Tashkent'},\n\t\t\t\t{name:'Nataly',age:27,desc:'Nurse at central hospital'},\n\t\t\t\t{name:'Lucy',age:28,desc:'Teacher at district school'}\n\t\t\t];\n\t\t}\n\t}\n})\n.controller('UsersCtrl',function($scope,Users){\n\t$scope.users=Users.query();\n\t$scope.selIdx= -1;\n\n\t$scope.selUser=function(user,idx){\n\t\t$scope.selectedUser=user;\n\t\t$scope.selIdx=idx;\n\t}\n\n\t$scope.isSelUser=function(user){\n\t\treturn $scope.selectedUser===user;\n\t}\n});\n```\n\nHere is our markup:\n\n```html\n<table ng-controller=\"UsersCtrl\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th class=\"col-1\">Name</th>\n\t\t\t<th class=\"col-2\">Age</th>\n\t\t</tr>\n\t</thead>\n\t<tbody ng-repeat=\"user in users\" ng-switch on=\"isSelUser(user)\" ng-click=\"selUser(user,$index)\">\n\t\t<tr ng-class=\"{sel:selIdx==$index}\">\n\t\t\t<td>{{user.name}}</td>\n\t\t\t<td>{{user.age}}</td>\n\t\t</tr>\n\t\t<tr ng-switch-when=\"true\">\n\t\t\t<td colspan=\"2\" class=\"desc\">{{user.desc}}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n```\n\n`ng-switch-when` used to show `tr` only when current row is selected row.\n\nHere is some styling:\n```css\ntable { border-collapse: collapse; }\ntd, th { border: 1px solid #999; }\n.col-1 { width: 200px; }\n.col-2 { width: 300px; }\n.sel { background-color: #bce65e; }\n.desc { background-color: #d1e6ac; }\n```\n\nFull code is below:\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"App\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<script src=\"angular.js\"></script>\n\t<title>Users</title>\n\t<style>\n\t\ttable { border-collapse: collapse; }\n\t\ttd, th { border: 1px solid #999; }\n\t\t.col-1 { width: 200px; }\n\t\t.col-2 { width: 300px; }\n\t\t.sel { background-color: #bce65e; }\n\t\t.desc { background-color: #d1e6ac; }\n\t</style>\n</head>\n<body>\n\n<table ng-controller=\"UsersCtrl\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th class=\"col-1\">Name</th>\n\t\t\t<th class=\"col-2\">Age</th>\n\t\t</tr>\n\t</thead>\n\t<tbody ng-repeat=\"user in users\" ng-switch on=\"isSelUser(user)\" ng-click=\"selUser(user,$index)\">\n\t\t<tr ng-class=\"{sel:selIdx==$index}\">\n\t\t\t<td>{{user.name}}</td>\n\t\t\t<td>{{user.age}}</td>\n\t\t</tr>\n\t\t<tr ng-switch-when=\"true\">\n\t\t\t<td colspan=\"2\" class=\"desc\">{{user.desc}}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n<script>\n\tangular.module('App',[])\n\t\t\t.factory('Users',function(){\n\t\t\t\treturn {\n\t\t\t\t\tquery:function(){\n\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t{name:'John',age:25,desc:'Software Developer at MacroSoft LLC'},\n\t\t\t\t\t\t\t{name:'Jonatan',age:26,desc:'Professor at University of Tashkent'},\n\t\t\t\t\t\t\t{name:'Nataly',age:27,desc:'Nurse at central hospital'},\n\t\t\t\t\t\t\t{name:'Lucy',age:28,desc:'Teacher at district school'}\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.controller('UsersCtrl',function($scope,Users){\n\t\t\t\t$scope.users=Users.query();\n\t\t\t\t$scope.selIdx= -1;\n\n\t\t\t\t$scope.selUser=function(user,idx){\n\t\t\t\t\t$scope.selectedUser=user;\n\t\t\t\t\t$scope.selIdx=idx;\n\t\t\t\t}\n\n\t\t\t\t$scope.isSelUser=function(user){\n\t\t\t\t\treturn $scope.selectedUser===user;\n\t\t\t\t}\n\t\t\t});\n</script>\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/ee4983bb843187cca20e",
    "description": "Log username and ip in log entries",
    "files": [
      "https://gist.githubusercontent.com/umidjons/ee4983bb843187cca20e/raw/b8397897909ef4fd7dbb3719494773a76b87b805/log-username-ip-in-log-entries.md"
    ],
    "content": "Log username and ip in log entries\n===\n\nInherit `CFileLogRoute`, in `components` directory create `EFileLogRoute.php`\nwith the following content:\n```php\n<?php\nclass EFileLogRoute extends CFileLogRoute\n{\n\tprotected function formatLogMessage($message,$level,$category,$time)\n\t{\n\t  // obtain username if available\n\t\t$user=(Yii::app()->user->isGuest?'guest':Yii::app()->user->name);\n\t\t\n\t\t// determine IP address\n\t\t$ip  =Yii::app()->request->userHostAddress;\n\t\t\n\t\t// put username and IP into log entries\n\t\treturn @date('Y/m/d H:i:s',$time).\" [$level] [$category] [$user@$ip] $message\\n\";\n\t}\n}\n```\n\nConfigure `log` component in application configuration:\n```php\n'log'          =>[\n\t'class' =>'CLogRouter',\n\t'routes'=>[\n\t\t[\n\t\t\t'class' =>'EFileLogRoute', // use our new component as route\n\t\t\t'levels'=>'error, warning, info',\n\t\t],\n\t],\n],\n```"
  },
  {
    "html_url": "https://gist.github.com/e690f34bdc47cfb5c2fd",
    "description": "Generate password",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e690f34bdc47cfb5c2fd/raw/59d4c25e9faa9b0da61cdad8f2149f05dd8c9cae/generate-password.md"
    ],
    "content": "Generate password\n===\n\n```php\nfunction genPswd($length=8)\n{\n\t$chars=array_merge(range(0,9),range('a','z'),range('A','Z'));\n\tshuffle($chars);\n\treturn implode(array_slice($chars,0,$length));\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/439c6ae83f676814c399",
    "description": "Get URL without any parameters in JavaScript",
    "files": [
      "https://gist.githubusercontent.com/umidjons/439c6ae83f676814c399/raw/a66d7f0b17e099ff09e31bcc0e7b133b806b8c82/url-without-parameters.md"
    ],
    "content": "Get URL without any parameters in JavaScript\n===\n\n```js\nconsole.log('path=', location.protocol + '//' + location.host + location.pathname)\n```"
  },
  {
    "html_url": "https://gist.github.com/529eb02b0df7ab97d5f5",
    "description": "EFonter - widget to change font size of the targeted element",
    "files": [
      "https://gist.githubusercontent.com/umidjons/529eb02b0df7ab97d5f5/raw/937fc7f2afa19a35eae7bcad3177413d77dae908/widget-change-font-size.md"
    ],
    "content": "EFonter - widget to change font size of the targeted element\n===\n\nCreate `extensions.fonter.EFonter.php`\n\n```php\n<?php\nclass EFonter extends CWidget\n{\n\tpublic $selector;\n\n\tpublic function run()\n\t{\n\t\tYii::app()->clientScript->registerScript('_fonter','\n\t\t$(\".btn-font-inc,.btn-font-dec\").on(\"click\",function(e){\n\t\t\te.preventDefault();\n\t\t\tconsole.log(\"clicked\");\n\t\t\t$(\"'.$this->selector.'\").css({\"font-size\":($(this).is(\".btn-font-inc\")?\"+\":\"-\")+\"=1\"});\n\t\t}); ',CClientScript::POS_READY);\n\t\t$this->render('fonter');\n\t}\n}\n```\n\nCreate view of the widget `extensions.fonter.views.fonter.php`\n```php\n<?php /** @var EFonter $this */ ?>\n<button class=\"btn btn-xs btn-default btn-font-inc\" title=\"increate font size\">\n\t<span class=\"glyphicon glyphicon-font\"></span><span class=\"glyphicon glyphicon-plus\"></span>\n</button>\n<button class=\"btn btn-xs btn-default btn-font-dec\" title=\"decrease font size\">\n\t<span class=\"glyphicon glyphicon-font\"></span><span class=\"glyphicon glyphicon-minus\"></span>\n</button>\n```\n\nUsage example:\n```php\n<div class=\"col-sm-12 text-right\">\n  <?php $this->widget('ext.fonter.EFonter',['selector'=>'#declarations-grid']); ?>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/eb1e867c787fcdea5663",
    "description": "Handlebars.js custom helper to chain some other helpers",
    "files": [
      "https://gist.githubusercontent.com/umidjons/eb1e867c787fcdea5663/raw/12df6e5290c2aeddb8ff4e923d9b541bfb134c5e/handlebarsjs-chain-helper.md"
    ],
    "content": "Handlebars.js custom helper to chain some other helpers\n===\n\n`chain` helper implementation\n\n```js\nHandlebars.registerHelper('chain',function(){\n\tvar helpers=[];\n\tvar args=Array.prototype.slice.call(arguments);\n\tvar argsLength=args.length;\n\tvar index;\n\tvar arg;\n\tfor(index=0, arg=args[index]; index<argsLength; arg=args[++index]){\n\t\tif(Handlebars.helpers[arg])\n\t\t\thelpers.push(Handlebars.helpers[arg]);\n\t\telse{\n\t\t\targs=args.slice(index);\n\t\t\tbreak;\n\t\t}\n\t}\n\twhile(helpers.length)\n\t\targs=[helpers.pop().apply(Handlebars.helpers,args)];\n\treturn args.shift();\n});\n```\n\nUsage example\n\n```html\n<div class=\"row\">\n\t<div class=\"col-sm-5 text-right\">{{label}}</div>\n\t<div class=\"col-sm-7\">{{chain \"unescape\" \"decode\" text}}</div> {{!-- decode and unescape text --}}\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/b3e1d7f5a7093e2e4e5a",
    "description": "Handlebars.js helper to unescape double quotes",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b3e1d7f5a7093e2e4e5a/raw/0d558ea0a21187b8fc830adfdcd2d497c771355b/handlebars.js-helper-unescape-double-quotes.md"
    ],
    "content": "Handlebars.js helper to unescape double quotes\n===\n\n```js\nHandlebars.registerHelper('unescape',function(str){\n\treturn str.replace(/\\\\\"/g,'\"'); // replace all \\\" to \"\n});\n```\n\nUsage example:\n\n```html\n<div class=\"panel panel-default\">\n\t<div class=\"panel-heading\"><h3 class=\"panel-title\">Description</h3></div>\n\t<div class=\"panel-body\">\n\t\t{{unescape description}}\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/3bf414cbf48aa604c6a0",
    "description": "Escape double quotes in PL/SQL",
    "files": [
      "https://gist.githubusercontent.com/umidjons/3bf414cbf48aa604c6a0/raw/8810e71faf87f08789f3d2e4b980f5df11b1ccd7/escape-double-quotes-plsql.md"
    ],
    "content": "Escape double quotes in PL/SQL\n===\n\n```sql\nfunction quote(pString varchar2) return varchar2 is\nbegin\n  -- replace \" or \\\" with \\\"\n  return regexp_replace(pString,'(\\\\\"|\")','\\\"'); -- fixes already quoted strings too\nend;\n```\n\nExample:\n\n```sql\nselect \n  quote('Hello \"World\\\"') -- Hello \\\"World\\\" \nfrom dual;\n```"
  },
  {
    "html_url": "https://gist.github.com/0fa5b574609b43538ee7",
    "description": "Unable to load dynamic library php_imagick.dll",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0fa5b574609b43538ee7/raw/bd155a244903443a8886f43e5cf74c175c780c0d/unable-to-load-dynamic-library-php_imagick.md"
    ],
    "content": "Unable to load dynamic library php_imagick.dll (PHP-5.5.10)\n===\n\nPHP on Windows is 32bit, so we need to download x86 ImageMagick\nfrom [http://ftp.sunet.se/pub/multimedia/graphics/ImageMagick/binaries/](sunet)\n\nI download `ImageMagick-6.7.7-5-Q16-windows-dll.exe` and install\ninto c:\\imagemagick\\.\n\nI also tried installing newer `ImageMagick-6.8.9-7-Q16-x86-dll.exe` version,\nbut it doesn't work for me.\n\nAlso in httpd.conf I set environment variable `MAGICK_HOME`\n```\nSetEnv MAGICK_HOME \"c:/imagemagick\"\n```\n\nIf you don't have `php_imagick.dll`, you can obtain it from [http://www.peewit.fr/imagick/](here) and paste it\ninto you `ext` directory."
  },
  {
    "html_url": "https://gist.github.com/e0a5b87543418f86c926",
    "description": "Handle paste and drop events on jQuery",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e0a5b87543418f86c926/raw/c6347ac3e82fcc396eedc5a013a1dafec040beb0/jquery-paste-drop-events.md"
    ],
    "content": "Handle paste and drop events on jQuery\n===\n\nImagine we have `.myinput` input field, that we should process its value after\ntext pasted into it. We can't access value in paste directly, so we should\nwait some time. For that purpose one can use `setTimeout` function. \nHere is example how to correctly handle `paste` event.\n\n```js\njQuery(document).ready(function($){\n\t$(\".myinput\").on(\"paste\",function(){\n\t\tvar _this=$(this);\n\t\t// we can access input value on paste after some time\n\t\tsetTimeout(function(){\n\t\t\t// access element value\n\t\t\tconsole.log(_this.val());\n\t\t},1);\n\t});\n});\n```\n\nText/value can be pasted into input field via drag&drop. So we can also\nwant to handle `drop` event. And when drop event fired we couldn't access\nits value directly too. Again we can use `setTimeout`.\n\n```js\njQuery(document).ready(function($){\n\t$(document).on(\"drop\",function(e){\n\t\tvar target=$(e.target);\n\t\t// drop acts as paste, but doesn't trigger paste event\n\t\t// and here too we can access text/value dropped into input after some time\n\t\tsetTimeout(function(){\n\t\t\t// access element value\n\t\t\tconsole.log(target.val());\n\t\t},1);\n\t});\n\n});\n```\n\nNote that, in the above code `e.target` is our input field. We can check it via `$.is()`.\n\n```js\njQuery(document).ready(function($){\n\t$(document).on(\"drop\",function(e){\n\t\tvar target=$(e.target);\n\t\tif($(target).is('.myinput'))\n  \t\t// drop acts as paste, but doesn't trigger paste event\n  \t\t// and here too we can access text/value dropped into input after some time\n  \t\tsetTimeout(function(){\n  \t\t\t// access element value\n  \t\t\tconsole.log(target.val());\n  \t\t},1);\n\t});\n\n});\n```\n"
  },
  {
    "html_url": "https://gist.github.com/7684a1a64c34ff5e15b6",
    "description": "Filter to group items by given quantity. Angular.js using bootstrap and dynamically creating rows.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/7684a1a64c34ff5e15b6/raw/50db4ee499eb96dfc317e9c6a2a869b2cbd22a0c/angularjs-bootstrap-group-by-rows.md"
    ],
    "content": "Filter to group items by given quantity. Angular.js using bootstrap and dynamically creating rows.\n===\n\nCreate custom filter to group items by given quantity\n```js\nangular.module('AppFilters',[])\n\t.filter('groupBy',function(){\n\t\treturn function(items,groupedBy){\n\t\t\tif(items){\n\t\t\t\tvar newArr=[];\n\t\t\t\tfor(var i=0; i<items.length; i+=groupedBy)\n\t\t\t\t\tif(i+groupedBy>items.length)\n\t\t\t\t\t\tnewArr.push(items.slice(i));\n\t\t\t\t\telse\n\t\t\t\t\t\tnewArr.push(items.slice(i,i+groupedBy));\n\t\t\t\treturn newArr;\n\t\t\t}\n\t\t}\n\t});\n```\n\nUsing our filter in controller\n\n```js\nangular.module('AppControllers',[])\n\t.controller('ProductsCtrl',function($scope,Product,$filter){\n\t\tProduct.query(function(data){\n\t\t  // group products by 3 in row\n\t\t\t$scope.products=$filter('groupBy')(data,3);\n\t\t\t// just to be sure output\n\t\t\tconsole.log('products=',$scope.products);\n\t\t});\n\t});\n```\n\nConfigure routing:\n\n```js\nangular.module('App',['AppServices','AppControllers','AppFilters','ngRoute'])\n\t.config(function($routeProvider){\n\t\t$routeProvider\n\t\t\t.when('/',{\n\t\t\t\ttemplateUrl:'/partials/products.html',\n\t\t\t\tcontroller :'ProductsCtrl'\n\t\t\t})\n\t\t\t.when('/contact',{\n\t\t\t\ttemplateUrl:'/partials/contacts.html',\n\t\t\t\tcontroller :'ContactCtrl'\n\t\t\t})\n\t\t\t.when('/about',{\n\t\t\t\ttemplateUrl:'/partials/about.html',\n\t\t\t\tcontroller :'AboutCtrl'\n\t\t\t})\n\t\t\t.otherwise({redirectTo:'/'});\n\t});\n```\n\nproducts.html\n\n```html\n<div class=\"row\" ng-repeat=\"prodGroup in products\">\n\t<div class=\"col-sm-4\" ng-repeat=\"prod in prodGroup\">\n\t\t<div class=\"panel panel-info\">\n\t\t\t<div class=\"panel-heading\">\n\t\t\t\t<h3 class=\"panel-title\">{{prod.title}}</h3>\n\t\t\t</div>\n\t\t\t<div class=\"panel-body\">\n\t\t\t\t{{prod.description}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/1fb8ae674df4c71f85cf",
    "description": "Compile dynamic template from outside of angular.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1fb8ae674df4c71f85cf/raw/ae57e5e410c244dd9d5b352cbbe92aada070cafc/angular-compile-dynamic-html.md"
    ],
    "content": "Compile dynamic template from outside of angular\n===\n\nI want to load dynamic HTML content via AJAX, then compile it, because it contains\nangular directives.\n\n```html\n<!DOCTYPE html>\n<html ng-app=\"app\">\n<head>\n\t<title>Compile dynamic HTML</title>\n\t<script type=\"text/javascript\" src=\"js/jquery-1.11.0.js\"></script>\n\t<script type=\"text/javascript\" src=\"js/angular.js\"></script>\n</head>\n<body ng-controller=\"TestCtrl\">\n\n<div obj></div>\n\n<button class=\"foo\">Change</button>\n\n<script type=\"text/javascript\">\n\tvar app=angular.module('app',[]);\n\tapp.controller('TestCtrl',function($scope){});\n\n\tjQuery(document).ready(function($){\n\t\t$('.foo').on('click',function(e){\n\t\t  // todo: load HTML content via AJAX or generate via jQuery\n\t\t  // todo: compile new HTML content, which contains Angular directives\n\t\t});\n\t});\n</script>\n</body>\n</html>\n```\n\nWe can get reference to `$compile` outside of angular via `injector().invoke()`.\n\n```javascript\n\tjQuery(document).ready(function($){\n\t\t$('.foo').on('click',function(e){\n\t\t\te.preventDefault();\n\t\t\tangular.element(document).injector().invoke(function($compile){\n\t\t\t\tvar obj=$('[obj]'); // get wrapper\n\t\t\t\tvar scope=obj.scope(); // get scope\n\t\t\t\t// generate dynamic content\n\t\t\t\tobj.html($('<input type=\"text\" ng-pattern=\"/^([0-9]+)$/\" ng-model=\"test\"><span>{{test}}</span>'));\n\t\t\t\t// compile!!!\n\t\t\t\t$compile(obj.contents())(scope);\n\t\t\t});\n\t\t});\n\t});\n```"
  },
  {
    "html_url": "https://gist.github.com/1807b6455fb4af4b6463",
    "description": "Run commands parallelly in batch file on Windows",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1807b6455fb4af4b6463/raw/c6e3af44f78f59a8a554a38596d3f74b9e5d9476/run-commands-parallelly-in-batch-file-windows.md"
    ],
    "content": "Run commands parallelly in batch file on Windows\n===\n\nCreate batch file, run commands with `start`:\n```bat\nstart command1\nstart command2\nstart commandN\n```\n"
  },
  {
    "html_url": "https://gist.github.com/6ea73e0aa596ce3e55dd",
    "description": "Execute PL/SQL statement from command line via SQLPlus. \nExecute PL/SQL statements parallelly in batch file via sqlplus (`windows` only).",
    "files": [
      "https://gist.githubusercontent.com/umidjons/6ea73e0aa596ce3e55dd/raw/d27f1fe0f6de4700cfd5eed5abafc0f72d0f4660/execute-plsql-stmt-sqlplus-cli-parallel.md"
    ],
    "content": "Execute PL/SQL statement from command line via SQLPlus\n===\n\nCreate SQL file with PL/SQL statement:\n\n```sql\nbegin\nfor t in 1..10000 loop\n\tinsert into test_seq values(seq_test.nextval);\nend loop;\ncommit;\nend;\n/\nexit;\n```\n\nRun sqlplus with this file:\n\n```bat\nsqlplus login/password@db @test.sql\n```\n\nExecute PL/SQL statements parallelly in batch file via sqlplus (`windows` only).\nCreate `parallel.bat` with this content:\n\n```bat\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\nstart sqlplus -S login/password@db @test.sql\n```"
  },
  {
    "html_url": "https://gist.github.com/88988c001d28893a0af5",
    "description": "Search data from two columns",
    "files": [
      "https://gist.githubusercontent.com/umidjons/88988c001d28893a0af5/raw/76cc8a1343f80882483cc0d62601dcc2dd266551/search-data-from-2-columns.md"
    ],
    "content": "Search data from two columns\n===\n\nI want to search author from two columns: from relation `rCUser.USERNAME` (user name of authorized user) and `NICK` (guest nick).\nIn my `Comment` model I do these changes:\n\n```php\n<?php\n\tpublic $author_search;\n\n\tpublic function rules()\n\t{\n\t\treturn [\n\t\t\t['ID, NICK, TEXT, STATUS, author_search', 'safe', 'on' => 'search'],\n\t\t];\n\t}\n\n\tpublic function search()\n\t{\n\t\t$criteria       = new CDbCriteria;\n\t\t$criteria->with = ['rCUser']; // relation\n\t\t$criteria->compare('\"t\".ID', $this->ID);\n\t\t$criteria->compare('\"t\".NICK', $this->NICK, true);\n\t\t$criteria->compare('\"t\".TEXT', $this->TEXT, true);\n\t\t$criteria->compare('\"t\".STATUS', $this->STATUS);\n\t\tif($this->author_search)\n\t\t{\n\t\t\t// search author_search in rCUser.USERNAME or NICK columns\n\t\t\t$criteria->addCondition('(USERNAME LIKE :author OR NICK LIKE :author)');\n\t\t\t$criteria->params[':author'] = '%'.$this->author_search.'%';\n\t\t}\n\t\treturn new CActiveDataProvider($this, ['criteria' => $criteria,]);\n\t}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/a1aa99bd6ce24f189faf",
    "description": "Fix favicon.ico request issue on Apache",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a1aa99bd6ce24f189faf/raw/a526c62c3d5ac3323abecea30dcb24f69d22551d/favicon-htaccess.md"
    ],
    "content": "Fix favicon.ico request issue on Apache\n===\n\n```htaccess\n# enable mod_rewrite\nRewriteEngine On\n\n# put favicon.ico into web root folder\n# and redirect all favicon.ico requests into that icon file \nRewriteRule ^(.*)favicon\\.ico /favicon.ico [L]\n```\n"
  },
  {
    "html_url": "https://gist.github.com/dda81094abf049107b96",
    "description": "Ignore favicon.ico via mod_rewrite",
    "files": [
      "https://gist.githubusercontent.com/umidjons/dda81094abf049107b96/raw/6bd9251b0b0da681ab65ee1e8d654973e68aa432/ignore-favicon-modrewrite.md"
    ],
    "content": "Ignore favicon.ico via mod_rewrite\n===\n\nDo not forward request to `index.php` if it is `favicon.ico` request:\n\n```htaccess\nRewriteEngine On\n\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteCond %{REQUEST_FILENAME} !-d\nRewriteCond ^(/?.+)$ !^favicon\\.ico\nRewriteRule . index.php\n```"
  },
  {
    "html_url": "https://gist.github.com/c86d700c82adc5652664",
    "description": "Start Apache via shell script setting necessary environment variables for Oracle",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c86d700c82adc5652664/raw/4f3b31b4df16ef66e7b1c453764b930b450d4aae/start-apache-with-oracle-vars.md"
    ],
    "content": "Start Apache via shell script setting necessary environment variables for Oracle\n===\n\n```bash\n#!/bin/sh\nexport ORACLE_BASE=/u01/app/oracle\nexport ORACLE_HOME=$ORACLE_BASE/client\nexport NLS_LANG=AMERICAN_AMERICA.AL32UTF8\nexport NLS_DATE_FORMAT=\"DD.MM.YYYY HH24:MI:SS\"\nexport PATH=$PATH:$ORACLE_HOME/bin\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib\nPATH=$PATH:$HOME/bin\nexport PATH\necho \"Oracle Home: $ORACLE_HOME\"\necho Starting Apache\n/usr/sbin/apachectl start\n```"
  },
  {
    "html_url": "https://gist.github.com/9a74b69e19ff70f4b0be",
    "description": "Send additional data on CGridView update",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9a74b69e19ff70f4b0be/raw/480ba99374a870d80752343f041a2f45bc15c98d/send-additional-data-on-gridview-update.md"
    ],
    "content": "Send additional data on CGridView update\n===\n\n```html\n<div class=\"col-sm-12\">\n\t<?php $this->widget('zii.widgets.grid.CGridView',[\n\t\t'id'              =>'supplements-grid',\n\t\t'dataProvider'    =>$model->search(),\n\t\t'filter'          =>null,\n\t\t'enableSorting'   =>false,\n\t\t'itemsCssClass'   =>'table table-striped table-hover table-condensed',\n\t\t'beforeAjaxUpdate'=>'function(id,options){\n\t\t\t\tvar sinn=$(\"#Search_SUBJECT_INN\").val();\n\t\t\t\toptions[\"data\"]={SUBJECT_INN:sinn}; // this will be available as $_GET['SUBJECT_INN'] in the PHP handler\n\t\t\t}',\n\t\t'template'        =>'{items}{pager}',\n\t\t'columns'         =>[\n\t\t\t'DOC_NAME',\n\t\t\t'DOC_N',\n\t\t\t'DOC_D:date',\n\t\t\t'SUBJECT_INN',\n\t\t],\n\t]); ?>\n</div>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/4a6cd2ace35fa29f30fb",
    "description": "Start/stop/restart apache and memcached services in linux",
    "files": [
      "https://gist.githubusercontent.com/umidjons/4a6cd2ace35fa29f30fb/raw/a4040687d9df96a6ca0aa65cb1d1aa8e1b6b6805/control-apache-memcached-linux.md"
    ],
    "content": "Restart apache\n===\n\n```\n/usr/local/apache2/bin/apachectl start\n/usr/local/apache2/bin/apachectl stop\n/usr/local/apache2/bin/apachectl restart\n```\n\nRestart memcached\n===\n\n```\nservice memcached start\nservice memcached stop\nservice memcached restart\n```\n"
  },
  {
    "html_url": "https://gist.github.com/84090669b61b90523bb3",
    "description": "Merge CGridView columns header",
    "files": [
      "https://gist.githubusercontent.com/umidjons/84090669b61b90523bb3/raw/9fb0e2ada08bcd7e2b824ad90473ba50347eca77/merge-gridview-cols.md"
    ],
    "content": "Merge CGridView columns header\n===\n\n```php\n<?php\n<?php $this->widget('zii.widgets.grid.CGridView',[\n\t'id'                   =>'declarations-grid',\n\t'dataProvider'         =>$model->search(),\n\t'filter'               =>null,\n\t'itemsCssClass'        =>'table table-striped table-hover table-condensed',\n\t'rowCssClassExpression'=>'!$data->REC_STATE?\"danger\":($data->REC_OBJECTIONS?\"warning\":\"\")',\n\t'template'             =>'{items}{pager}',\n\t'columns'              =>[\n\t\t[\n\t\t\t'header'           =>Yii::t('zr','Grounds'),\n\t\t\t'name'             =>'REC_DOC_NAME',\n\t\t\t'headerHtmlOptions'=>['colspan'=>3],\n\t\t],\n\t\t[\n\t\t\t'name'             =>'REC_DOC_N',\n\t\t\t'headerHtmlOptions'=>['style'=>'display:none'],\n\t\t],\n\t\t[\n\t\t\t'name'             =>'REC_DOC_D',\n\t\t\t'headerHtmlOptions'=>['style'=>'display:none'],\n\t\t],\n\t],\n]); ?>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/930b5ca0de0d4067d679",
    "description": "Using PHP expressions in CGridView columns",
    "files": [
      "https://gist.githubusercontent.com/umidjons/930b5ca0de0d4067d679/raw/669771296acecbe6132e3321d06e86e5bca6c242/using-php-expressions-in-gridview-columns.md"
    ],
    "content": "Using PHP expressions in CGridView columns\n===\n\n```php\n<?php\n<?php $this->widget('zii.widgets.grid.CGridView',[\n\t'id'                   =>'declarations-grid',\n\t'dataProvider'         =>$model->search(),\n\t'itemsCssClass'        =>'table table-striped table-hover table-condensed',\n\t'rowCssClassExpression'=>'!$data->REC_STATE?\"danger\":($data->REC_OBJECTIONS?\"warning\":\"\")',\n\t'template'             =>'{items}{pager}',\n\t'columns'              =>[\n\t\t[\n\t\t\t'name' =>'SUBJECT_CONTENT',\n\t\t\t'value'=>'(string)str_replace(array(\"\\r\", \"\\r\\n\", \"\\n\"),\"<br>\",$data->SUBJECT_CONTENT)',\n\t\t\t'type' =>'raw',\n\t\t],\n\t\t[\n\t\t\t'header'=>'',\n\t\t\t'value' =>'\"<a href=\\\"#\\\" data-reccode=\\\"\".$data->REC_CODE.\"\\\" class=\\\"rec-detail\\\"><span class=\\\"glyphicon glyphicon-list\\\"></span></a>\"',\n\t\t\t'type'  =>'raw',\n\t\t],\n\t],\n]); ?>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/0e18a60ec353b1e86b82",
    "description": "Replace `EOL` to `<br>` in PHP",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0e18a60ec353b1e86b82/raw/d6b7bfd44f03290f65423d7081c553e75345d595/replace-eol-to-br.md"
    ],
    "content": "Replace `EOL` to `<br>` in PHP\n===\n\n```php\n<?php\n(string)str_replace(array(\"\\r\\n\", \"\\r\", \"\\n\"), \"<br>\", $text);\n```\n\nIn php there is `nl2br` function, but it preserves `EOL` symbols."
  },
  {
    "html_url": "https://gist.github.com/395e89a1c119e60229b3",
    "description": "Flush memcached cache",
    "files": [
      "https://gist.githubusercontent.com/umidjons/395e89a1c119e60229b3/raw/5dafd4581cd7792cdc27c855d29013d8ed3b5fb1/flush-clear-memcached-cache.md"
    ],
    "content": "Flush memcached cache via Telnet interface\n===\n\n```bash\necho 'flush_all' | telnet 127.0.0.1 11211\n```\n\nIf `telnet` is not available, then following will work too:\n```bash\necho \"flush_all\" | nc localhost 11211\n```\n\nOn windows, open host and port via `putty` or `kitty`, type `flush_all`, then `Enter`.\n\nWe also can clear cache via PHP\n```php\n$m=new Memcache();\n$m->addServer('localhost');\n$m->flush();\n```"
  },
  {
    "html_url": "https://gist.github.com/f6cc60f9bb98a99c8077",
    "description": "Parse JSON in PL/SQL",
    "files": [
      "https://gist.githubusercontent.com/umidjons/f6cc60f9bb98a99c8077/raw/4b6444b9a8902cdc33060be3e69f6307955a2a87/parse-json-in-plsql.md"
    ],
    "content": "Parse JSON in PL/SQL\n===\n\nDownload and install [PL/JSON](http://sourceforge.net/projects/pljson).\n\nFollowing is an example of how to parse a JSON array represented as string:\n\n```sql\ndeclare\n\tmy_clob clob := '[\n\t\t\t\t\t{\"element_code\" : 1, \"element_type\":11, \"element_value\" : \"John Doe\"},\n\t\t\t\t\t{\"element_code\" : 2, \"element_type\":12, \"element_value\" : \"10W384SSD\"},\n\t\t\t\t\t{\"element_code\" :21, \"element_type\":17, \"element_value\" : \"2013\"}\n\t\t\t\t\t]';\n\tarr_    json_list;\n\tobj_    json;\n\tval_    json_value;\n\tel_code number(2);\n\tel_type number(2);\n\tel_val  varchar2(2000);\nbegin\n\t-- parse json array string\n\tarr_ := json_list(my_clob);\n\tfor i in 1 .. arr_.count loop\n\t\tobj_    := json(arr_.get(i)); -- get i element as json object\n\t\tval_    := obj_.get('element_code');\n\t\tel_code := val_.get_number; -- read value as number\n\t\tval_    := obj_.get('element_type');\n\t\tel_type := val_.get_number; -- read value as number\n\t\tval_    := obj_.get('element_value');\n\t\tel_val  := val_.get_string; -- read value as string\n\t\t-- output read values\n\t\tdbms_output.put_line('Code: ' || el_code || ' Type: ' || el_type || ' Value: ' || el_val);\n\tend loop;\nend;\n```\n"
  },
  {
    "html_url": "https://gist.github.com/5821f1060bf84bb9790e",
    "description": "Call Oracle stored procedure/function with CLOB parameter",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5821f1060bf84bb9790e/raw/326c9e3e4ef8a2fe920059e0b0bda042f11e8cb5/yii-call-oracle-stored-procedure-function-with-clob-param.md"
    ],
    "content": "Call Oracle stored procedure/function with CLOB parameter\n===\n\nStored function with `CLOB` parameter implementation:\n\n```sql\ncreate or replace package body site_manager is\n\tfunction add_content(pExcerpt CLOB,pText CLOB) RETURN NUMBER IS\n\tbegin\n\t\t-- implementation of the function\n\tend;\nend site_manager;\n```\n\nModel implementation:\n\n```php\n<?php\nclass Content extends CActiveRecord{\n\tpublic function insertDb()\n\t{\n\t\t$oID = 0;\n\t\ttry\n\t\t{\n\t\t\tYii::app()->db->createCommand(\"BEGIN :oID := SITE_MANAGER.ADD_CONTENT(:pExcerpt, :pText); END;\")\n\t\t\t\t->bindParam(':oID', $oID, PDO::PARAM_INT, 12) // OUT parameter or function result\n\t\t\t\t->bindParam(':pExcerpt', $this->EXCERPT, PDO::PARAM_STR, strlen($this->EXCERPT)) // CLOB parameter as STR with LENGTH specified\n\t\t\t\t->bindParam(':pText', $this->TEXT, PDO::PARAM_STR, strlen($this->TEXT)) // CLOB parameter as STR with LENGTH specified\n\t\t\t\t->execute();\n\t\t\treturn $oID;\n\t\t}\n\t\tcatch(CDbException $ex)\n\t\t{\n\t\t\tE::handle($ex);\n\t\t\treturn false;\n\t\t}\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/2751077d9d9d639e0f49",
    "description": "Set default value to select in dropDownList",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2751077d9d9d639e0f49/raw/f66e1154a7441ac568043a39066f6c63f3f5b4be/select-option-dropdownlist.md"
    ],
    "content": "Set default value to select in dropDownList\n===\n\nOptions (`<option>`) attributes set as following:\n```php\n<?php\n$form->dropDownList($model,'attr',$data,['options'=>['value1'=>['attr1'=>'attr1 val', 'attr2'=>'attr2 val',]]]);\n```\n\nI want to select option with value 860, like so:\n```html\n<option value=860 selected>Uzb</option>\n```\n\nI can use following code to achieve this (`R::country()` and `R::region()` returns list data in `array(val=>text,...)` format):\n\n```html\n<div class=\"form-group\">\n\t<div class=\"col-sm-4\">\n\t\t<?= $form->label($model, 'COUNTRY'); ?>\n\t\t<?= $form->dropDownList($model, 'COUNTRY', R::country(), ['class' => 'form-control', 'options' => ['860' => ['selected' => true],]]); ?>\n\t\t<?= $form->error($model, 'COUNTRY'); ?>\n\t</div>\n\t<div class=\"col-sm-4\">\n\t\t<?= $form->label($model, 'REGION'); ?>\n\t\t<?= $form->dropDownList($model, 'REGION', R::region(), ['class' => 'form-control', 'options' => ['26' => ['selected' => true],]]); ?>\n\t\t<?= $form->error($model, 'REGION'); ?>\n\t</div>\n</div>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/d032e37fcf7c55b81f32",
    "description": "Switch NLS_LANG between CP1251 and UTF8",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d032e37fcf7c55b81f32/raw/ab3be43a617b0290b0faec15f72fb49a75fbecbc/switch-nlslang-between-cp1251-and-utf8.md"
    ],
    "content": "Switch NLS_LANG between CP1251 and UTF8\n===\n\n```bat\nsetx NLS_LANG AMERICAN_AMERICA.CL8MSWIN1251\nsetx NLS_LANG RUSSIAN_CIS.CL8MSWIN1251\nsetx NLS_LANG AMERICAN_AMERICA.UTF8\n```\n"
  },
  {
    "html_url": "https://gist.github.com/b82f2a1bdb4bedc34a23",
    "description": "Behavior to show CLOB fields in Oracle",
    "files": [
      "https://gist.githubusercontent.com/umidjons/b82f2a1bdb4bedc34a23/raw/bda6a5035046cf7493ebb6bd28fbf122e5787b39/clob-behavior.md"
    ],
    "content": "Behavior to show CLOB fields in Oracle\n===\n\nLast implementation via OCI to avoid Oracle SDU issues:\n```php\n<?php\n\nclass EClobBehavior extends CActiveRecordBehavior\n{\n\tpublic $idName='ID'; // ID column name\n\tpublic $clobAttributes=[]; // array or comma separated attribute names\n\tpublic $condition='';\n\n\tpublic function afterFind($event)\n\t{\n\t\tif(!empty($this->clobAttributes))\n\t\t{\n\t\t\t$attributes=[];\n\t\t\t$model     =$this->owner;\n\t\t\tif(is_string($this->clobAttributes))\n\t\t\t\t$this->clobAttributes=explode(',',$this->clobAttributes);\n\n\t\t\tforeach($this->clobAttributes as $attr)\n\t\t\t{\n\t\t\t\t$attr=trim($attr);\n\t\t\t\tif(is_resource($model->{$attr}))\n\t\t\t\t\t$attributes[]=$attr;\n\t\t\t}\n\t\t\tif(!empty($attributes))\n\t\t\t{\n\t\t\t\t$tab     =$model->tableName(); // table name\n\t\t\t\t$idcolumn=$this->idName; // column name to identify row/record\n\t\t\t\t$idvalue =$model->{$idcolumn}; // column value to identify row/record\n\t\t\t\t$attrs   =implode(',',$attributes); // comma separated column names\n\t\t\t\t$sql     =\"SELECT $attrs FROM $tab WHERE $idcolumn=:id AND rownum<2\"; // query to retrieve row/record\n\t\t\t\tif($this->condition)\n\t\t\t\t\t$sql.=' AND '.$this->condition;\n\t\t\t\t$row=Yii::app()->odb->select($sql,[':id'=>$idvalue],true);\n\t\t\t\tforeach($attributes as $a)\n\t\t\t\t\tif(gettype($row[$a])==\"object\" && get_class($row[$a])=='OCI-Lob')\n\t\t\t\t\t\t$model->{$a}=$row[$a]->load();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nUsage example:\n\n```php\n<?php\n/**\n * @property integer        $ID\n * @property string         $TITLE\n * @property string         $EXCERPT\n * @property string         $TEXT\n */\nclass Content extends CActiveRecord\n{\n\tpublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'EClobBehavior'    => [\n\t\t\t\t'class'          => 'EClobBehavior',\n\t\t\t\t'clobAttributes' => 'EXCERPT,TEXT',\n\t\t\t],\n\t\t];\n\t}\n}\n```\n\nUsage example with primary key:\n\n```php\n<?php\n/**\n * @property integer        $CODE\n * @property string         $TITLE\n * @property string         $EXCERPT\n * @property string         $TEXT\n */\nclass Content extends CActiveRecord\n{\n\tpublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'EClobBehavior'    => [\n\t\t\t\t'class'          => 'EClobBehavior',\n\t\t\t\t'clobAttributes' => 'EXCERPT,TEXT',\n\t\t\t\t'idName'         => 'CODE',\n\t\t\t],\n\t\t];\n\t}\n}\n```\n\nUsage example with additional condition:\n\n```php\n<?php\n/**\n * @property string $PHP_SESSION\n * @property string $USER_ID\n * @property string $NORDER\n * @property string $CONTENT\n */\nclass ShowContent extends CActiveRecord\n{\n\t// ...\n\tpublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'EClobBehavior'=>[\n\t\t\t\t'class'         =>'EClobBehavior',\n\t\t\t\t'clobAttributes'=>'CONTENT',\n\t\t\t\t'idName'        =>'NORDER',\n\t\t\t\t'condition'     =>Yii::app()->getUser()->isGuest ? \"PHP_SESSION='\".session_id().\"'\" : \"USER_ID=\".Yii::app()->getUser()->getId(),\n\t\t\t],\n\t\t];\n\t}\n\t// ...\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/1680385a896839321151",
    "description": "EUserBehavior to set created and updated user IDs in Oracle",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1680385a896839321151/raw/10aaf7dca40bae82c3d8403c8cb220d9459b1e67/user-behavior.md"
    ],
    "content": "EUserBehavior to set created and updated user IDs in Oracle\n===\n\nBehavior implementation:\n\n```php\n<?php\nclass EUserBehavior extends CActiveRecordBehavior\n{\n\tpublic $createAttribute = 'CUSER_ID';\n\tpublic $updateAttribute = 'UUSER_ID'; // null - do not use\n\tpublic $updateOnCreate = false;\n\n\tpublic function beforeSave($event)\n\t{\n\t\t$model   = $this->owner;\n\t\t$user_id = Yii::app()->user->isGuest ? 0 : Yii::app()->user->id;\n\t\tif($model->isNewRecord && $this->createAttribute !== null)\n\t\t\t$model->{$this->createAttribute} = $user_id;\n\t\tif((!$model->isNewRecord || $this->updateOnCreate) && $this->updateAttribute !== null)\n\t\t\t$model->{$this->updateAttribute} = $user_id;\n\t}\n}\n```\n\nUsage example:\n\n```php\n<?php\n/**\n * @property integer        $ID\n * @property string         $TITLE\n * @property string         $TEXT\n * @property integer        $CUSER_ID\n * @property integer        $UUSER_ID\n */\nclass Content extends CActiveRecord\n{\n\tpublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'EUserBehavior'    => [\n\t\t\t\t'class'          => 'EUserBehavior',\n\t\t\t\t//'createAttribute'=> 'CUSER_ID', // set if different from default\n\t\t\t\t//'updateAttribute'=> 'UUSER_ID', // set if different from default\n\t\t\t\t'updateOnCreate' => true,\n\t\t\t],\n\t\t];\n\t}\n}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9e66d102b5db585f7f2f",
    "description": "ESysdateBehavior to set current date and time in oracle",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9e66d102b5db585f7f2f/raw/84f535ffdbab84a2ccb3d5c37ee48ced59ff3da5/sysdate-behavior.md"
    ],
    "content": "ESysdateBehavior to set current date and time in oracle\n===\n\nImplementation of behavior is following:\n\n```php\n<?php\nclass ESysdateBehavior extends CActiveRecordBehavior\n{\n\tpublic $createAttribute = 'CREATED_AT';\n\tpublic $updateAttribute = 'UPDATED_AT'; // null - do not use\n\tpublic $updateOnCreate = false;\n\n\tpublic function beforeSave($event)\n\t{\n\t\t$model   = $this->owner;\n\t\t$sysdate = new CDbExpression('sysdate');\n\t\tif($model->isNewRecord && $this->createAttribute !== null)\n\t\t\t$model->{$this->createAttribute} = $sysdate;\n\t\tif((!$model->isNewRecord || $this->updateOnCreate) && $this->updateAttribute !== null)\n\t\t\t$model->{$this->updateAttribute} = $sysdate;\n\t}\n}\n```\n\nUsage example:\n\n```php\n<?php\n/**\n * @property integer        $ID\n * @property string         $TITLE\n * @property string         $TEXT\n * @property string         $CREATED_AT\n * @property string         $UPDATED_AT\n */\n\nclass Content extends CActiveRecord\n{\n\tpublic function behaviors()\n\t{\n\t\treturn [\n\t\t\t'ESysdateBehavior' => [\n\t\t\t\t'class'          => 'ESysdateBehavior',\n\t\t\t\t//'createAttribute'=> 'CREATED_AT', // set if different from default\n\t\t\t\t//'updateAttribute'=> 'UPDATED_AT', // set if different from default\n\t\t\t\t'updateOnCreate' => true,\n\t\t\t],\n\t\t];\n\t}\n}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/920c7b09cca1c746941d",
    "description": "Show time part of dates for Oracle DB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/920c7b09cca1c746941d/raw/1d84ed9bb1e13b407ec821b7fea33597a0a33125/show-time-part-of-dates-for-oracle-db.md"
    ],
    "content": "Show time part of dates for Oracle DB\n===\n\nTo show time part of dates we have to set `NLS_DATE_FORMAT` variable.\nWe can set it in configuration file via `initSQLs` key.\n\n```php\n<?php\n'db'            => [\n\t'class'                 => 'CDbConnection',\n\t'connectionString'      => 'oci:dbname=MYTNS;charset=utf8',\n\t'username'              => 'mylogin',\n\t'password'              => 'mypassword',\n\t'schemaCachingDuration' => '3600',\n\t'enableParamLogging'    => true,\n\t'attributes'            => [PDO::ATTR_CASE => PDO::CASE_NATURAL],\n\t'initSQLs'              => [\n\t\t'ALTER SESSION SET NLS_DATE_FORMAT=\"DD.MM.YYYY HH24:MI:SS\"',\n\t],\n],\n```\n"
  },
  {
    "html_url": "https://gist.github.com/467c998a5b65e97c082e",
    "description": "Configure Yii for Oracle database",
    "files": [
      "https://gist.githubusercontent.com/umidjons/467c998a5b65e97c082e/raw/82a4b237d1985cd4f0c3e0c50bb8b106a6d858e4/yii-oracle.md"
    ],
    "content": "Configure Yii for Oracle database\n===\n\nEnable `php_oci8` and `php_pdo_oci` extensions in `php.ini` file.\nRestart web server to apply new settings.\n\nAfter creating web application via `yiic` configure database connection like this:\n```php\n<?php\n\t\t'db'           => array(\n\t\t\t'class'            => 'CDbConnection',\n\t\t\t'connectionString' => 'oci:dbname=MYDB;charset=UTF8', // MYDB is TNS name\n\t\t\t'username'         => 'mylogin',\n\t\t\t'password'         => 'mypassword',\n\t\t),\n\n```\n\nEncoding of database is UTF8, so we should set environment variable `NLS_LANG`:\n\n```bash\nexport NLS_LANG=american_america.utf8\n```\n"
  },
  {
    "html_url": "https://gist.github.com/e4ec5ce2b26b150214b6",
    "description": "Get package body text in sqlplus",
    "files": [
      "https://gist.githubusercontent.com/umidjons/e4ec5ce2b26b150214b6/raw/7ee22966c0570b5c5989bba1ec0f83b1b7768096/sqlplus-package-body.md"
    ],
    "content": "Get package body text in sqlplus\n===\n\n```sql\nselect text \nfrom all_source \nwhere \n  name='MY_PKG' \n  and type='PACKAGE BODY'\norder by line;\n```"
  },
  {
    "html_url": "https://gist.github.com/a2c219d78786a36b0ae7",
    "description": "Timestamp like string/number",
    "files": [
      "https://gist.githubusercontent.com/umidjons/a2c219d78786a36b0ae7/raw/fa25fc7702ffc61f779b841d207f9e86a6787e41/timestamp-like-string.md"
    ],
    "content": "Timestamp like string/number\n\n```sql\nselect to_char(systimestamp ,'YYYYMMDDHH24MISSFF9') from dual\n```\n\nOutputs:\n\n```\n20140725102421783445000\n```"
  },
  {
    "html_url": "https://gist.github.com/d2d0674d59d8c1876a91",
    "description": "Execute dos2unix for directory recursively.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/d2d0674d59d8c1876a91/raw/7e5b53673e893705135f01e3f600dc381d50cc6b/dos2unix.md"
    ],
    "content": "\nWill recursively find all files inside current directory and call for these files dos2unix command. Would break if you had spaces in file name.\n```bash\nfind . -type f -exec dos2unix {} \\;\n```\n\nWouldn't break if you had spaces in file names.\n```bash\nfind . -type f -print0 | xargs -0 dos2unix\n```\n\nConvert only *.php files\n```bash\nfind . -type f -name \"*.php\" -print0 | xargs -0 dos2unix\n```\n\n\nIf it's a large directory you may want to consider running with multiple processors:\n```bash\nfind . -type f -print0 | xargs -0 -n 1 -P 4 dos2unix \n```\nThis will pass 1 file at a time, and use 4 processors."
  },
  {
    "html_url": "https://gist.github.com/fac3e1603ee0ae00a2b4",
    "description": "Configure sqlplus",
    "files": [
      "https://gist.githubusercontent.com/umidjons/fac3e1603ee0ae00a2b4/raw/6b18c2da8aab575928f2156df3dd7c9d2584aee3/configure-sqlplus.md"
    ],
    "content": "Configure sqlplus\n===\n\nSet line and page size\n\n```sql\nset linesize 157 pagesize 50\nset trimout on\nset space 1\nset tab off\n```\n\nConfigure column format and size\n```sql\ncolumn id format 999999999\ncolumn text format a35\n```"
  },
  {
    "html_url": "https://gist.github.com/4b5ed06917a0e71e5dd6",
    "description": "Compile package in sqlplus",
    "files": [
      "https://gist.githubusercontent.com/umidjons/4b5ed06917a0e71e5dd6/raw/6e9e208796f6f0cfd86f19001fbf276945defd4e/compile-package-in-sqlplus.md"
    ],
    "content": "Compile all objects in schema\n===\n\n```sql\nEXEC DBMS_UTILITY.compile_schema(schema => 'MYSCHEMA');\n```\nCompile package in sqlplus\n===\n\nCompile package header and body with following two statements\n```sql\nalter package my_package compile package;\nalter package my_package compile body;\n```\n\nThen check, are there any invalid objects\n```sql\nselect object_name from user_objects where status='INVALID';\n```\n\nIf there is error, show it with following statement\n```sql\nshow errors;\n```\n\nThen we can correct and recompile package, also should check invalid objects again."
  },
  {
    "html_url": "https://gist.github.com/5d5dff3fbc4752a7f162",
    "description": "AngularJS: Load data from the server. Filter by columns.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5d5dff3fbc4752a7f162/raw/4de5b1828fab28d78b0bbbbb525fccd937ff8615/load-data-from-server-filter-by-cols.md"
    ],
    "content": "Load data from the server and filter by columns example\n==\n\nIn the server side I use this PHP snippet to retrieve data from the db \nand convert it to JSON:\n\n```php\n<?php\n$db     = new PDO('mysql:dbname=ajs', 'root', '');\n$stmt   = $db->query('select id, title, phone, email, address from people');\n$people = $stmt->fetchAll(PDO::FETCH_ASSOC);\necho json_encode($people);\n```\n\nMain page to show data:\n\n```html\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"PeopleModule\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>People</title>\n\t<script type=\"text/javascript\" src=\"angular.js\"></script>\n</head>\n<body ng-controller=\"PeopleCtrl\">\n\n<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th>ID</th>\n\t\t\t<th>Name</th>\n\t\t\t<th>Phone</th>\n\t\t\t<th>Email</th>\n\t\t\t<th>Address</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th><input type=\"text\" ng-model=\"search.id\"/></th>\n\t\t\t<th><input type=\"text\" ng-model=\"search.title\"/></th>\n\t\t\t<th><input type=\"text\" ng-model=\"search.phone\"/></th>\n\t\t\t<th><input type=\"text\" ng-model=\"search.email\"/></th>\n\t\t\t<th><input type=\"text\" ng-model=\"search.address\"/></th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr ng-repeat=\"person in people | filter:search\">\n\t\t\t<td>{{person.id}}</td>\n\t\t\t<td>{{person.title}}</td>\n\t\t\t<td>{{person.phone}}</td>\n\t\t\t<td>{{person.email}}</td>\n\t\t\t<td>{{person.address}}</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<script type=\"text/javascript\">\n\tvar PeopleModule=angular.module('PeopleModule',[]);\n\tPeopleModule.controller('PeopleCtrl',function($scope,$http){\n\t\t// used to filter records by attributes\n\t\t$scope.search={};\n\n\t\t// get data from the server in JSON format\n\t\t$http.get('/people.php').success(function(data,status,header,config){\n\t\t\t$scope.people=data;\n\t\t});\n\t});\n</script>\n\n</body>\n</html>\n```"
  },
  {
    "html_url": "https://gist.github.com/57801c7d1d3665e813d6",
    "description": "PHP Interactive mode",
    "files": [
      "https://gist.githubusercontent.com/umidjons/57801c7d1d3665e813d6/raw/2eb2a05014453ffe794e812dd85a10d7ef95db7d/php-interactive-mode.md"
    ],
    "content": "Run commands in PHP in interactive mode\n===\n\nTo start PHP in interactive mode type following in Windows CLI\n```batch\ncmd /k \"php -a\"\n```\n\nThen you can type some PHP code\n```php\n<?php\necho preg_replace(\"/[^0-9]/\",\"\",\"+998 90 130-45-27\");\n```\n\nDO NOT FORGET `<?php`!!!\n\nThen, to see output hit `CTRL_Z` and press `Enter`.\n"
  },
  {
    "html_url": "https://gist.github.com/da41bc8a0a0bf470e8cc",
    "description": "sqlplus: Import user objects into database via sqlplus",
    "files": [
      "https://gist.githubusercontent.com/umidjons/da41bc8a0a0bf470e8cc/raw/8342b3f96a674efa27f484ea5b63be77677d03f3/import-user-objects-sqlplus.md"
    ],
    "content": "Import user objects into database via sqlplus\n===\n\n```bash\nsqlplus user/pass@db @mydb_exported_user_objects.sql\n```"
  },
  {
    "html_url": "https://gist.github.com/1a51d957a56375d5bb59",
    "description": "Run sqlplus with readline wrapper",
    "files": [
      "https://gist.githubusercontent.com/umidjons/1a51d957a56375d5bb59/raw/d40d2beb38ba1aed788e426bfcb10e7ab1769dc3/sqlplus-readline-wrap.md"
    ],
    "content": "Run `sqlplus` with readline\n===\n\n```bash\nrlwrap sqlplus\n```"
  },
  {
    "html_url": "https://gist.github.com/6cfc2760cf32fcf8506b",
    "description": "AngularJS: ng-view example - changing views",
    "files": [
      "https://gist.githubusercontent.com/umidjons/6cfc2760cf32fcf8506b/raw/79370178d5f6365cd8317a0a800531821c164783/ng-view-changing-views.md"
    ],
    "content": "Using `ng-view` to change views in AngularJS\n==\n\nMain layout with `ng-view`\n====\n\n```html\n\n<!-- mail.html -->\n\n<!doctype html>\n<html lang=\"en-US\" ng-app=\"AMail\">\n<head>\n\t<meta charset=\"UTF-8\">\n\t<title>Mail</title>\n\t<script type=\"text/javascript\" src=\"angular.js\"></script>\n\t<script type=\"text/javascript\" src=\"angular-route.js\"></script>\n\t<script type=\"text/javascript\" src=\"mail-controllers.js\"></script>\n</head>\n<body>\n\n<h1>A-Mail</h1>\n<div ng-view></div>\n\n</body>\n</html>\n```\n\nFirst view: list of emails\n====\n\n```html\n\n<!-- list.html -->\n<table>\n\t<tr>\n\t\t<th>Sender</th>\n\t\t<th>Subject</th>\n\t\t<th>Date</th>\n\t</tr>\n\t<tr ng-repeat=\"message in messages\">\n\t\t<td>{{message.sender}}</td>\n\t\t<td><a href=\"#/view/{{message.id}}\">{{message.subject}}</a></td>\n\t\t<td>{{message.date}}</td>\n\t</tr>\n</table>\n```\n\nSecond view: details of email\n====\n\n```html\n\n<!-- detail.html -->\n<div><strong>Subject:</strong> {{message.subject}}</div>\n<div><strong>Sender:</strong> {{message.sender}}</div>\n<div><strong>Date:</strong> {{message.date}}</div>\n<div>\n\t<strong>To:</strong>\n\t<span ng-repeat=\"recipient in message.recipients\">{{recipient}}</span>\n</div>\n<div>{{message.message}}</div>\n<a href=\"#/\">Back to message list</a>\n```\n\nControllers\n====\n\n```javascript\n\n// mail-controllers.js\n\nvar aMailServices=angular.module('AMail',['ngRoute']);\n\nfunction emailRouteConfig($routeProvider){\n\t$routeProvider\n\t\t.when('/',{\n\t\t\tcontroller :ListController,\n\t\t\ttemplateUrl:'list.html'\n\t\t})\n\t\t.when('/view/:id',{\n\t\t\tcontroller :DetailController,\n\t\t\ttemplateUrl:'detail.html'\n\t\t})\n\t\t.otherwise({redirectTo:'/'});\n}\n\naMailServices.config(emailRouteConfig);\n\nmessages=[\n\t{\n\t\tid        :0,\n\t\tsender    :'jean@somecompany.com',\n\t\tsubject   :'Hi there, old friend',\n\t\tdate      :'Dec 7, 2013 12:32:00',\n\t\trecipients:['greg@somecompany.com'],\n\t\tmessage   :'Hey, we should get together for lunch sometime and catch up.'\n\t\t+'There are many things we should collaborate on this year.'\n\t},\n\t{\n\t\tid        :1,\n\t\tsender    :'maria@somecompany.com',\n\t\tsubject   :'Where did you leave my laptop?',\n\t\tdate      :'Dec 7, 2013 8:15:12',\n\t\trecipients:['greg@somecompany.com'],\n\t\tmessage   :'I thought you were going to put it in my desk drawer.'\n\t\t+'But it does not seem to be there.'\n\t},\n\t{\n\t\tid        :2,\n\t\tsender    :'bill@somecompany.com',\n\t\tsubject   :'Lost python',\n\t\tdate      :'Dec 6, 2013 20:35:02',\n\t\trecipients:['greg@somecompany.com'],\n\t\tmessage   :'Nobody panic, but my pet python is missing from her cage.'\n\t\t+'She doesn\\'t move too fast,so just call me if you see her.'\n\t}\n];\n\nfunction ListController($scope){\n\t$scope.messages=messages;\n}\n\nfunction DetailController($scope,$routeParams){\n\t$scope.message=messages[$routeParams.id];\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/c1b075d9f009b9df14e4",
    "description": "Call PL/SQL function with boolean return value",
    "files": [
      "https://gist.githubusercontent.com/umidjons/c1b075d9f009b9df14e4/raw/99261593a9cbbe744a323c4c7b7bfe603e23e774/plsql-function-with-boolean-return-value.md"
    ],
    "content": "Call PL/SQL function with boolean return value\n===\n\n```php\n<?php\ntry\n{\n\t$pRes=0;\n\treturn Yii::app()->db->createCommand('\n\tDECLARE result boolean; \n\tBEGIN \n\t\tresult:=CLIENT_MANAGER.DEL(:pUser,:pClient);\n\t\t:pRes:=sys.diutil.bool_to_int(result);\n\tEND;')\n\t\t->bindParam(':pRes',$pRes,PDO::PARAM_INT,10)\n\t\t->bindParam(':pUser',Yii::app()->getUser()->getId())\n\t\t->bindParam(':pClient',$client_code)\n\t\t->execute();\n}\ncatch(CDbException $ex)\n{\n\tYii::log($ex->getMessage());\n\treturn false;\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/aeb5f349cc8de7662f6e",
    "description": "Custom Filter example in AngularJS",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/bea019aff905c162d3b3",
    "description": "Create factory example in AngularJS",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/50f15e875bf723304251",
    "description": "nginx installation",
    "files": [
      "https://gist.githubusercontent.com/umidjons/50f15e875bf723304251/raw/1a661883996a8e8035f55dda22aff477e2a8bd74/nginx-install.md"
    ],
    "content": "```bash\n# gcc\napt-get install build-essentials\n# pcre\napt-get install libpcre3 libpcre3-dev\n# zlib\napt-get install zlib1g zlib1g-dev\n# openssl\napt-get install openssl libssl-dev\n# libxml2\napt-get install libxml2 libxslt1-dev\n# gd\napt-get install libgd2-noxpm-dev\n```\n\n```bash\nmkdir src && cd src\nwget http://nginx.org/download/nginx-1.7.2.tar.gz\ntar xzf nginx-1.7.2.tar.gz\n```\n\n```bash\n# see available switches\n./configure --help\n```\n\n```bash\n# clean if you run configure again\nmake clean\n\n./configure \\\n  --prefix=/usr/local/nginx-1.7.2 \\\n  --user=www-data \\\n  --group=www-data \\\n  --with-http_ssl_module \\\n  --with-http_realip_module \\\n  --with-http_xslt_module \\\n  --with-http_image_filter_module \\\n  --with-http_gzip_static_module \\\n  --with-http_degradation_module\n```\n\n```bash\nmake\nsudo make install\n```\n\n```bash\n# create symlink\nsudo ln -s /usr/local/nginx-1.7.2 /usr/local/nginx\n```"
  },
  {
    "html_url": "https://gist.github.com/dbd141c85b9c177fda51",
    "description": "Proxy for Git",
    "files": [
      "https://gist.githubusercontent.com/umidjons/dbd141c85b9c177fda51/raw/17997c8a05e10900b40dd93caac257e6e3472cbd/git-proxy.md"
    ],
    "content": "Set proxy for Git\n===\n\nSet:\n```\ngit config --global http.proxy http://proxyuser:proxypwd@proxy.server.com:8080\ngit config --global https.proxy http://proxyuser:proxypwd@proxy.server.com:8080\n```\n\nUnset:\n```\ngit config --global http.proxy \"\"\ngit config --global https.proxy \"\"\ngit config --global --unset http.proxy\ngit config --global --unset https.proxy\n```"
  },
  {
    "html_url": "https://gist.github.com/2bf96c14fb5e8bf55733",
    "description": "Yii: Set aliases in configuration file",
    "files": [
      "https://gist.githubusercontent.com/umidjons/2bf96c14fb5e8bf55733/raw/e7eb79975270e052ae8a67b28f7e528650df215d/aliases-in-config.md"
    ],
    "content": "Set aliases in configuration file\n===\n\n```php\n<?php\nreturn [\n    // ...\n\t'aliases'        => [\n\t\t'uploads' => 'webroot.uploads', // /www/mysite/uploads OR c:/www/mysite\\uploads\n\t\t'notice'  => 'webroot.uploads.notice', // /www/mysite/uploads/notice OR c:/www/mysite\\uploads\\notice\n\t\t'files'   => 'webroot.uploads.files', // /www/mysite/uploads/files OR c:/www/mysite\\uploads\\files\n\t\t'users'   => 'webroot.uploads.users', // /www/mysite/uploads/users OR c:/www/mysite\\uploads\\users\n\t],\n\t// ...\n];\n```\n\nUsage example:\n```php\n<?php\nYii::log(Yii::getPathOfAlias('users')); // c:/www/mysite\\uploads\\users\\\n```\n\nShorter helper method with trailing directory separator symbol:\n```php\n<?php\nclass F\n{\n\tpublic static function alias($alias)\n\t{\n\t\t$path = Yii::getPathOfAlias($alias);\n\t\treturn $path.DIRECTORY_SEPARATOR;\n\t}\n}\n```\n\nUsage example:\n```php\n<?php\nYii::log(F::alias('users').'myfile.txt'); // c:/www/mysite\\uploads\\users\\myfile.txt\n```"
  },
  {
    "html_url": "https://gist.github.com/0b192229bc9e083abd9f",
    "description": "Prettify JSON data in PHP",
    "files": [
      "https://gist.githubusercontent.com/umidjons/0b192229bc9e083abd9f/raw/e39e6cd4e3e93049c2e051f2d2d4f2410e28304c/prettify-json-in-php.md"
    ],
    "content": "Prettify JSON in PHP\n===\n\nMy JSON data looks like as this:\n\n```json\n{\"attributes\":{\"id\":\"146\",\"thumbnail\":\"\\/uploads\\/files\\/Oreilly.Learning.JavaScript.Design.Patterns.May.20121398922870.1667.thumb.jpg\",\"title\":\"\\u0422\\u0435\\u0441\\u0442 \\u04b3\\u0443\\u0436\\u0436\\u0430\\u0442 5\",\"slug\":\"test-huzhzhat-5\",\"created_at\":\"2014-04-30 15:54:24\",\"edited_at\":{\"expression\":\"NOW()\",\"params\":[]},\"author_id\":\"1\",\"source_title\":\"\",\"source_url\":\"\",\"status\":\"0\",\"allow_comments\":\"0\",\"category_id\":\"2\",\"language\":\"4\",\"trans_ru\":\"0\",\"trans_uz_latn\":\"0\",\"trans_uz\":\"146\",\"trans_en\":\"0\",\"content_file\":\"\\/uploads\\/files\\/Oreilly.Learning.JavaScript.Design.Patterns.May.20121398922870.1667.pdf\"}}\n```\n\nHere is how I prettify my JSON data:\n\n```php\n<?php\n$json_data = 'JSON data is here';\necho '<pre>';\njson_encode( json_decode( $json_data ), JSON_UNESCAPED_UNICODE | JSON_UNESCAPED_SLASHES | JSON_PRETTY_PRINT );\necho '</pre>';\n```\n\n`JSON_PRETTY_PRINT` prettifies JSON data. I use `JSON_UNESCAPED_UNICODE` to convert `\\uXXXX` characters into normal text. Also use `JSON_UNESCAPED_SLASHES` to convert `\\/` into `/`.\n\nPrettified JSON data looks like as following:\n\n```json\n{\n    \"attributes\": {\n        \"id\": \"146\",\n        \"thumbnail\": \"/uploads/files/Oreilly.Learning.JavaScript.Design.Patterns.May.20121398922870.1667.thumb.jpg\",\n        \"title\": \"Тест ҳужжат 5\",\n        \"slug\": \"test-huzhzhat-5\",\n        \"created_at\": \"2014-04-30 15:54:24\",\n        \"edited_at\": {\n            \"expression\": \"NOW()\",\n            \"params\": [\n\n            ]\n        },\n        \"author_id\": \"1\",\n        \"source_title\": \"\",\n        \"source_url\": \"\",\n        \"status\": \"0\",\n        \"allow_comments\": \"0\",\n        \"category_id\": \"2\",\n        \"language\": \"4\",\n        \"trans_ru\": \"0\",\n        \"trans_uz_latn\": \"0\",\n        \"trans_uz\": \"146\",\n        \"trans_en\": \"0\",\n        \"content_file\": \"/uploads/files/Oreilly.Learning.JavaScript.Design.Patterns.May.20121398922870.1667.pdf\"\n    }\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/5cfde5d260835e2c6d2f",
    "description": "Yii: Up and Down icons for sorted columns in CGridView with Twitter Bootstrap",
    "files": [
      "https://gist.githubusercontent.com/umidjons/5cfde5d260835e2c6d2f/raw/6786055e556adf61b61676b7fcb9158edec2be03/sort-icons-gridview-bootstrap.md"
    ],
    "content": "Up and Down icons for sorted columns in CGridView with Twitter Bootstrap\n===\n\n```css\na.sort-link {\n  text-decoration: none;\n}\n.sort-link.asc:before, .sort-link.desc:before {\n  font-family: 'Glyphicons Halflings';\n  position: relative;\n  top: 3px;\n  padding-right: 3px;\n}\n.sort-link.asc:before {\n  content: \"\\e113\";\n}\n.sort-link.desc:before {\n  content: \"\\e114\";\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/11368089",
    "description": "Installing PHP Mess Detector",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11368089/raw/8776cc5fc378a8b72e5ae14393c6c5d4579f16e3/php-mess-detector.md"
    ],
    "content": "Installing PHP Mess Detector\n===\n\n```bat\ncmd.exe\ncd c:\\openserver\\modules\\php\\php-5.4.22\\PEAR\\\nphp go-pear.phar\n\nset HTTP_PROXY=http://xxx.xxx.xxx.xxx:xx\nset HTTPS_PROXY=http://xxx.xxx.xxx.xxx:xx\n```\n\nAdd `pear` directory `c:\\openserver\\modules\\php\\php-5.4.22\\PEAR\\` into `PATH`.\n\n```bat\npear channel-discover pear.phpmd.org\npear channel-discover pear.pdepend.org\n```\n\nInstall PHPMD\n\n```bat\npear install --alldeps phpmd/PHP_PMD\n```\n\nCreate link to `php.ini`, otherwise there is issue with PHP CLI\n```bat\nmklink C:\\Windows\\php.ini C:\\OpenServer\\userdata\\temp\\config\\php.ini\n```\n\nCheck mess detector with:\n```bat\nphpmd\n```\n\nIf there is error related to `imagemagick` add `c:\\OpenServer\\modules\\imagemagick\\` into `PATH`.\n"
  },
  {
    "html_url": "https://gist.github.com/11285772",
    "description": "npm behind proxy",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11285772/raw/477e1a9de3df26f1fade4eac4556ac0df2b731ab/npm-behind-proxy.md"
    ],
    "content": "npm behind proxy\n===\n\n```\nnpm config set proxy http://proxy.company.com:8080\nnpm config set https-proxy http://proxy.company.com:8080\n```\n\nIf you need to specify credentials, they can be passed in the url using the following syntax.\n\n```\nhttp://user_name:password@proxy.company.com:8080\n```"
  },
  {
    "html_url": "https://gist.github.com/11240660",
    "description": "My favorite VIM plugins",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11240660/raw/ad2a9944a9e7203a6d99fbe60a48d84099b17f01/vim-plugins.md"
    ],
    "content": "My favorite VIM plugins\n===\n\n- [vim-pathogen](https://github.com/tpope/vim-pathogen)\n- [vimtodo](https://github.com/mivok/vimtodo.git)\n- [vim-commentary](https://github.com/tpope/vim-commentary)\n- [syntastic](https://github.com/scrooloose/syntastic)\n- To check javascript install [JSHint](http://jshint.com/install/).\n- To check css install [CSSLint](https://github.com/CSSLint/csslint/wiki/Command-line-interface)\n- To check json install [JSONLint](https://github.com/arc90/jsonlintdotcom)\n- [jshint](https://github.com/Shutnik/jshint2.vim)"
  },
  {
    "html_url": "https://gist.github.com/11208197",
    "description": "Yii: Inherit controller actions",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11208197/raw/b38c1f26b995147a80e7b11f380945512dc24404/inherit-controller-actions.md"
    ],
    "content": "Inherit controller actions\n===\n\nSuppose we have base controller with these actions:\n\n```php\n<?php\nclass Controller extends CController\n{\n\tpublic function actions()\n\t{\n\t\treturn [\n\t\t\t'uplimagehandle' => [\n\t\t\t\t'class'           => 'ext.upl.components.EUplAction',\n\t\t\t\t'uploadsFolder'   => Yii::app()->params['filesFolder'],\n\t\t\t\t'validExtensions' => ['jpeg', 'jpg', 'png', 'gif',],\n\t\t\t\t'createThumbnail' => true,\n\t\t\t],\n\t\t\t'uplpdfhandle'   => [\n\t\t\t\t'class'           => 'ext.upl.components.EUplAction',\n\t\t\t\t'uploadsFolder'   => Yii::app()->params['filesFolder'],\n\t\t\t\t'validExtensions' => ['pdf',],\n\t\t\t\t'createThumbnail' => true,\n\t\t\t]\n\t\t];\n\t}\n\t// ...\n}\n```\n\nIn order to inherit actions defined in the parent class, a child class needs to merge the parent actions with child actions using functions like `array_merge()`.\n\n```php\n<?php\nclass SiteController extends Controller\n{\n\tpublic function actions()\n\t{\n\t\treturn array_merge(parent::actions(), [\n\t\t\t'captcha' => [\n\t\t\t\t'class'     => 'CCaptchaAction',\n\t\t\t\t'backColor' => 0xFFFFFF,\n\t\t\t],\n\t\t\t'page'    => [\n\t\t\t\t'class' => 'CViewAction',\n\t\t\t],\n\t\t\t'soato'   => [\n\t\t\t\t'class' => 'ext.soato.ESoatoAction',\n\t\t\t],\n\t\t]);\n\t}\n}\n```\n\nNow, we can access base class actions as usual actions. For example, `http://mysite.loc/site/uplpdfhandle`."
  },
  {
    "html_url": "https://gist.github.com/11174306",
    "description": "Find unique objects from array of objects.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11174306/raw/a7b254b56fe19df097b4ab9206d1020b6e9c0127/unique-objects-js.md"
    ],
    "content": "Find unique objects from array of objects\n===\n\n```js\nvar Uniquer={\n\t/**\n\t * Return unique items from array of objects.\n\t * @param {Array} objects array of objects\n\t * @returns {Array} unique items/objects\n\t */\n\tuniqueItems:function(objects){\n\t\tvar self=this;\n\t\tvar unique_items=[];\n\t\t$.each(objects,function(i,obj){\n\t\t\tif(!unique_items.length) // no unique items yet, so\n\t\t\t\tunique_items.push(obj); // register first item as unique\n\t\t\telse{\n\t\t\t\tvar same_objs=$.grep(unique_items,function(uniq){\n\t\t\t\t\treturn self._equals(uniq,obj); // is obj equal to uniq?\n\t\t\t\t});\n\t\t\t\tif(!same_objs.length) // in unique_items obj not found\n\t\t\t\t\tunique_items.push(obj); // then register it as unique\n\t\t\t}\n\t\t});\n\t\treturn unique_items;\n\t},\n\t/**\n\t * Compares two object for equality. Checks only own properties and their values.\n\t * @param {object} a object to compare\n\t * @param {object} b object to compare\n\t * @returns {boolean} true, if both objects are equal, otherwise false\n\t * @private\n\t */\n\t_equals    :function(a,b){\n\t\tvar self=this;\n\t\tvar i;\n\t\tfor(i in a){\n\t\t\tif(!a.hasOwnProperty(i))\n\t\t\t\tcontinue;\n\t\t\tif(typeof b[i]=='undefined')\n\t\t\t\treturn false;\n\t\t\tif(typeof b[i]=='object')\n\t\t\t\tif(!self._equals(b[i],a[i]))\n\t\t\t\t\treturn false;\n\t\t\tif(b[i]!=a[i])\n\t\t\t\treturn false;\n\t\t}\n\t\tfor(i in b){\n\t\t\tif(!b.hasOwnProperty(i))\n\t\t\t\tcontinue;\n\t\t\tif(typeof a[i]=='undefined')\n\t\t\t\treturn false;\n\t\t\tif(typeof a[i]=='object')\n\t\t\t\tif(!self._equals(a[i],b[i]))\n\t\t\t\t\treturn false;\n\t\t\tif(a[i]!=b[i])\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n};\n```\n\nUsage example\n===\n\nSuppose, we have these objects:\n\n```js\nvar objects=[\n\t{notice_id:11,property_id:22},\n\t{notice_id:11,property_id:33},\n\t{notice_id:11,property_id:22},\n\t{notice_id:11,property_id:44}\n];\n```\n\nThen we can get unique objects as such:\n\n```js\nUniquer.uniqueItems(objects);\n```\n\nResult:\n\n```js\n[\n\t{notice_id:11,property_id:22},\n\t{notice_id:11,property_id:33},\n\t{notice_id:11,property_id:44}\n]\n ```"
  },
  {
    "html_url": "https://gist.github.com/11140374",
    "description": "Yii QueryBuilder example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11140374/raw/feae7aaf94685a401b79c5f482871cc6077c2bfc/yii-query-builder.md"
    ],
    "content": "Build following SQL statement with QueryBuilder\n\n```sql\nselect distinct property_id\nfrom notices n\njoin person_info i on (n.id=i.notice_id and i.type=1)\njoin property2notice p on (p.notice_id=n.id)\nwhere n.status=1 and i.tin=1122334\n```\n\n```php\n<?php\n\tpublic function actionSearchInfo($data, $type = \"t\") // t-by tin, p-by pin\n\t{\n\t\t$qb = Yii::app()->db->createCommand()\n\t\t\t->selectDistinct('property_id')\n\t\t\t->from('notices n')\n\t\t\t->join('person_info i', 'n.id=i.notice_id and i.type=1')\n\t\t\t->join('property2notice p', 'p.notice_id=n.id')\n\t\t\t->where('n.status=1');\n\t\tif(!empty($data))\n\t\t\tif($type == \"t\")\n\t\t\t\t$qb->andWhere('i.tin=:tin', [':tin' => $data]);\n\t\t\telseif($type == \"p\")\n\t\t\t\t$qb->andWhere('i.pin=:pin', [':pin' => $data]);\n\t\t$ids = $qb->queryColumn();\n\t\tYii::log('data: '.print_r($ids, true));\n\t}\n```\n\nSample output:\n\n```\ndata: Array\n(\n    [0] => 4\n    [1] => 17\n    [2] => 20\n)\n```"
  },
  {
    "html_url": "https://gist.github.com/11137734",
    "description": "Vim Tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11137734/raw/c6e7ef36f05e232576f63a164c8e1f056ad300e7/vim-tips.md"
    ],
    "content": "Set vim as default editor\n===\n\nAdd vim into alternatives list\n```bash\n# /usr/bin/vim is a link, /usr/bin/vim73 is a executable, 100 priority\nupdate-alternatives --install /usr/bin/vim editor /usr/bin/vim73 100\n\n# change default editor\nupdate-alternatives --config editor\n```\n\nReload configuration (vimrc) without closing Vim\n===\n\n```vim\n:source $MYVIMRC<CR>\n```\n\nMotion\n===\n\n`H` window top\n\n`M` window middle\n\n`L` window bottom\n\n`:157<CR>`, `157G`, `157gg` go to 157 line\n\nSearch and replace step by step\n===\n\nMove to the word you want to search, then press `*`. Or manually search for some word by typing `/{word}`.\n\nMove between found words by hitting `n` or `N`.\n\nTo replace word type `cw`, then type new word, then `<Esc>`.\n\nMove to next occurence, then press `.` to repeat last change.\n\nUppercase/Lowercase\n===\n\n`~` uppercase/lowercase a character\n\n`g~w` uppercase/lowercase word from cursor until end of a word\n\n`g~aw` uppercase/lowercase a word in any position\n\n`gUaw` uppercase a word\n\n`guaw` lowercase a word\n\n`gUU` uppercase a line\n\n`guu` lowercase a line\n\n`gUap` `guap` uppercase/lowercase a paragraph\n\nAutocomplete\n===\n\nType `<C-n><C-p>` or `<C-p><C-n>` to open auto complete popup, then continue typing, popup items will be filtered as you type.\n\nTo choose from list just type `<C-n>` or `<C-p>` following by `<C-y>` or `<CR>`.\n\n`<C-x><C-n>` complete from buffer.\n\n`<C-x><C-i>` complete from included files.\n\nAutocomplete for PHP\n====\n\n```bash\ncd ~/.vim/bundle\ngit clone git://github.com/shawncplus/phpcomplete.vim.git\n```\n\nInstalling exuberant-ctags on ubuntu\n===\n```bash\nsudo apt-get install exuberant-ctags\n```\nGenerating tags:\n```bash\n# change dir\ncd my_project_root_dir_OR_my_framework_root_dir\n# generate tags\nctags-exuberant -f php.tags --languages=PHP -R\n# tell vim to use our tags file\n:set tags=~/path/to/php.tags\n```\nOpen up a new PHP file, set the tag file and start typing the name of a class that you know exists. After a few characters type `<c-x><c-o>` (insert mode) and the omnicompletion will kick in. Then, on the completed class name in command mode, type `<c-]>`. You will be taken to the class definition, or given a list of definitions if it matches more than one.\n\nAnother neat feature is jumping to a tag from the Vim command line. For example, if you know you need to get to the file containing the class `MyLovelyClass`, just type:\n```\n:tag MyLovelyClass\n```\nAnd hit return. You will be taken straight to it. This is almost always quicker than trying to navigate a file tree to find the file you want. Also, this supports tab completion, so you could just type `:tag My<tab>` and you would get a list of options.\n\nSuperTab\n===\n\nInstalling `supertab` to open omni via `Tab` instead of `<c-n><c-o>`\n```\ngit clone https://github.com/ervandew/supertab.git\n```\n\nSet default completion type in your .vimrc:\n```\nlet g:SuperTabDefaultCompletionType=\"<c-x><c-o>\"\n```\n\nOpen your source file in vim, type some characters, then hit `Tab`. To navigate in omni type `Tab` some more time.\n\nCorrection in Insert mode\n===\n\n`<C-h>` removes one character (backspace)\n\n`<C-w>` removes one word back\n\n`<C-u>` removes one line back\n\nRebuild documentation/How to add plugin documentation\n===\n\n```vim\n:helptags c:\\Program\\ Files\\ (x86)\\Vim\\vimfiles\\bundle\\vimtodo\\doc\\\n```\n\nChange directory in Vim\n===\n\n`:cd mydir` or to change disk drive on Windows `:cd c:\\`.\n\nList files & directories\n===\n\nType `:e`, then space, then hit `CTRL-D` to list files & directories in the current directory.\n\nVim File Explorer\n===\n\nOpen File Explorer vertically splitting window: `:Vex` or with `:Vexplore` or with `:Explore!`.\n\nOpen File Explorer with `:Ex` or with `:Explore`.\n\nOpen File Explorer horizontally splitting window: `:Sexplore`.\n\nOpen File Explorer in new tab with `:Texplore`.\n\nWalk between windows with `CTRL-w`.\n\n`Enter` to open file or directory. \n`CTRL-6` to return to File Explorer.\n\nChange netrw window size with `:let g:netrw_winsize=25`.\n\nEnable netrw file preview `:let g:netrw_preview=1`.\n\nPreview file under cursor, type `p`.\n\nClose preview window `CTRL-w-z`.\n\nSyntax checking\n===\n\n[Syntastic](https://github.com/scrooloose/syntastic)\n\nIt will always check syntax on every write.\n\n`:SyntasticInfo` show info\n\n`:SyntasticCheck php` run `php` checker\n\nEffectively open a file\n===\n\nTo efficiently open a file in the current directory or subdirectories do following:\n\nSet `path` variable in your `vimrc`:\n\n```vim\nset path+=**\n```\n\nChange current directory to your project path:\n\n```vim\n:cd c:\\openserver\\domains\\mysite.loc\\\n```\n\nSearch and open a file:\n\n```vim\n:find MyController.php\n:fin MyController.php\n```\n\nSearch and open a file in new tab:\n\n```vim\n:tabfind MyController.php\n:tabf MyController.php\n:tabf myfolder\\MyController.php\n```\n\nTo autocomplete file name, for example, type `:tabf myfolder\\ind` then hit `<TAB>`, Vim will search files and if found autocompletes file name with relative path.\n\nInvoke normal mode command with other language keyboards (`langmap` option)\n===\n\nRussian\n\n```vim\n:set langmap=ФИСВУАПРШОЛДЬТЩЗЙКЫЕГМЦЧНЯ;ABCDEFGHIJKLMNOPQRSTUVWXYZ,фисвуапршолдьтщзйкыегмцчня;abcdefghijklmnopqrstuvwxyz\n```\n\nUzbek\n\n```vim\n:set langmap=ФИСВУАПРШОЛДЬТЎЗЙКҚЕГМЦЧНЯ;ABCDEFGHIJKLMNOPQRSTUVWXYZ,фисвуапршолдьтўзйкқегмцчня;abcdefghijklmnopqrstuvwxyz\n```\n\nVisual Block mode\n===\n\nSuppose, we have following code:\n```js\nvar a='hello world'\nvar b=123456\nvar c=null\n```\n\nTo put semicolon (any character or text, no matter) at the end of lines, do following steps:\n- `gg` to go to the begin of a file\n- Switch to visual block mode with `<C-v>`\n- Select lines moving down with `j`\n- Go to end of line with `$`\n- Switch to append mode with `A` (or insert mode with `I`)\n- Type `;`, then `<Esc>`\n- Now Vim puts semicolon at the end of all selected lines"
  },
  {
    "html_url": "https://gist.github.com/11037635",
    "description": "Creating PDF thumbnails in PHP",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11037635/raw/31b3eedf2b0ae600692b784bf5e93eb272bc8e37/pdf-thumbnail-php.md"
    ],
    "content": "Creating PDF thumbnails in PHP\n==\n\nInstall Ghostscript\n===\n\nDownload and install right version of [ghostscript](http://www.ghostscript.com/download/gsdnld.html). In my case my PHP was x86 architecture, so I download `Ghostscript 9.14 for Windows (32 bit)`.\n\nEnable ImageMagick\n===\n\nCheck, is `imagick` extension available and loaded.\n\nThis line should be present in your `php.ini`:\n```ini\nextension=php_imagick.dll\n```\n\nAlso, check `php_imagick.dll` in PHP's `ext` directory.\n\nPHP function\n===\n\n```php\n<?php\n\tfunction genPdfThumbnail($source, $target)\n\t{\n\t\t//$source = realpath($source);\n\t\t$target = dirname($source).DIRECTORY_SEPARATOR.$target;\n\t\t$im     = new Imagick($source.\"[0]\"); // 0-first page, 1-second page\n\t\t$im->setImageColorspace(255); // prevent image colors from inverting\n\t\t$im->setimageformat(\"jpeg\");\n\t\t$im->thumbnailimage(160, 120); // width and height\n\t\t$im->writeimage($target);\n\t\t$im->clear();\n\t\t$im->destroy();\n\t}\n```\n\nCall that function:\n\n```php\n<?php\ngenPdfThumbnail('/uploads/my.pdf','my.jpg'); // generates /uploads/my.jpg\n```\n"
  },
  {
    "html_url": "https://gist.github.com/11026279",
    "description": "Select parent element and remove child element in jQuery",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11026279/raw/52704f7fc459be39a568bee86b41577be01667de/remove-child-select-parent.md"
    ],
    "content": "Select parent element and remove child element in jQuery\n==\n\n```html\n<div class=\"container\">\n  <div class=\"child\">content is here</div>\n</div>\n```\n\nSelect parent element, then empty its content:\n```js\nvar container=$(\".child\").parent().empty();\n```\n\nSelect parent element, then select specific child, remove it and back to parent element:\n```js\nvar container=$(\".child\").parent().children().remove().end();\n```"
  },
  {
    "html_url": "https://gist.github.com/11025873",
    "description": "Generate random string in JavaScript",
    "files": [
      "https://gist.githubusercontent.com/umidjons/11025873/raw/894b731f1d4a311f8c3f86b35f75ce05eeb24bf4/random-string-js.md"
    ],
    "content": "Generate random string in JavaScript\n==\n\n```js\nconsole.log(Math.random().toString(36).slice(2)); // o0dagqcr6f6zjjor\n```"
  },
  {
    "html_url": "https://gist.github.com/10861091",
    "description": "Yii: File mime type",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10861091/raw/a49048d8035ad965dde769d991b0848d913b669c/file-mime-type.md"
    ],
    "content": "# Get a file MIME type\n\nTo get a file mime type use `CFileHelper` class. It has static method `getMimeType`. Here is sample code:\n\n```php\n<?php\n$file_path = Yii::getPathOfAlias('webroot').$model->attachment_uri;\necho CFileHelper::getMimeType($file_path); // application/pdf\n```"
  },
  {
    "html_url": "https://gist.github.com/10859940",
    "description": "Repeat string N times without loop in Java",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10859940/raw/4abe3a33c654d48cc31ca19456d3fdaa9b008cde/java-repeat-string.md"
    ],
    "content": "# Repeat string N times without loop in Java\n```java\npackage javaapplication1;\npublic class JavaApplication1 {\n    /**\n     * Repeat string <b>str</b> <b>times</b> time.\n     * @param str string to repeat\n     * @param times repeat str times time\n     * @return generated string\n     */\n    public static String repeat(String str, int times) {\n        return new String(new char[times]).replace(\"\\0\", str);\n    }\n    public static void main(String[] args) {\n        System.out.println(repeat(\"*\", 5));\n    }\n\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/10824124",
    "description": "Yii: Using Number formatter in Yii",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10824124/raw/0f6c009884c0b60a52bc5c76eb6604c2d9eaba58/number-format.md"
    ],
    "content": "# Using Number formatter in Yii\n\n```php\n<?php\nYii::app()->numberFormatter->formatCurrency(1234.5678, 'USD'); // 1 234,57 $\nYii::app()->numberFormatter->formatCurrency(1234.5678, 'EUR'); // 1 234,57 €\nYii::app()->numberFormatter->formatCurrency(1234.5678, 'RUB'); // 1 234,57 руб.\n```\n\nIt is easy do this with wrapper function:\n\n```php\n<?php\nfunction formatCurrency($value, $currency = \"USD\")\n{\n\treturn Yii::app()->numberFormatter->formatCurrency($value, $currency);\n}\n\nformatCurrency(1234.5678, 'USD'); // 1 234,57 $\nformatCurrency(1234.5678, 'EUR'); // 1 234,57 €\nformatCurrency(1234.5678, 'RUB'); // 1 234,57 руб.\n```"
  },
  {
    "html_url": "https://gist.github.com/10803531",
    "description": "Helper class to work with parameters without DB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10803531/raw/beac0955adcd80086c24255796905bd6b6cfe492/params-class.md"
    ],
    "content": "# Helper class to work with parameters without DB\n\nIf we omit `$param` it will return all values & descriptions as associative array, which is ready to pass to `CHtml::dropDownList()`.\n\nIf we specify `$param` as string (name), it will return parameter value by name.\n\nIf we specify `$param` as integer (value), it will return parameter description by value (index).\n\n```php\n<?php\nclass P\n{\n\tpublic static function comment( $param = null )\n\t{\n\t\t$items = [\n\t\t\t0 => [ 'disabled', Yii::t( 'zr', 'Disabled' ), ],\n\t\t\t1 => [ 'allowed', Yii::t( 'zr', 'Allowed' ), ],\n\t\t];\n\t\treturn self::handle( $items, $param );\n\t}\n\n\tpublic static function contentStatus( $param = null )\n\t{\n\t\t$items = [\n\t\t\t0 => [ 'draft', Yii::t( 'zr', 'Draft' ), ],\n\t\t\t1 => [ 'published', Yii::t( 'zr', 'Published' ), ],\n\t\t\t2 => [ 'deleted', Yii::t( 'zr', 'Deleted' ), ],\n\t\t];\n\t\treturn self::handle( $items, $param );\n\t}\n\n\tpublic static function language( $param = null )\n\t{\n\t\t$items = [\n\t\t\t1 => [ 'ru', Yii::t( 'zr', 'Russian' ), ],\n\t\t\t2 => [ 'uz', Yii::t( 'zr', 'Uzbek' ), ],\n\t\t\t3 => [ 'en', Yii::t( 'zr', 'English' ), ],\n\t\t];\n\t\treturn self::handle( $items, $param );\n\t}\n\n\tpublic static function status( $param = null )\n\t{\n\t\t$items = [\n\t\t\t0 => [ 'disabled', Yii::t( 'zr', 'Disabled' ), ],\n\t\t\t1 => [ 'active', Yii::t( 'zr', 'Active' ), ],\n\t\t];\n\t\treturn self::handle( $items, $param );\n\t}\n\n\t/**\n\t * Handle parameters.\n\t * @param array           $items parameters list [param_value=>[param_name, param_description], ...]\n\t * @param int|null|string $param null to return list of [param_value=>param_description,...],\n\t *                               param name string to return value,\n\t *                               param value to return param description.\n\t * @return int|null|string param value, list of param value and description or param description by value.\n\t */\n\tprivate static function handle( $items, $param )\n\t{\n\t\tif ( is_null( $param ) ) // return [value => description,...]\n\t\t{\n\t\t\t$res = null;\n\t\t\tforeach ( $items as $key => $val )\n\t\t\t\t$res[ $key ] = $val[ 1 ];\n\t\t\treturn $res;\n\t\t}\n\t\telseif ( is_numeric( $param ) )\n\t\t\treturn $items[ $param ][ 1 ];\n\t\telseif ( is_string( $param ) ) // return value\n\t\t{\n\t\t\tforeach ( $items as $key => $val )\n\t\t\t\tif ( $param == $val[ 0 ] )\n\t\t\t\t\treturn $key;\n\t\t\treturn null;\n\t\t}\n\t}\n}\n```\n\nUsage example\n\n```php\n<?php\n// Get all content statuses and show in drop down\necho CHtml::dropDownList('contentstatus', false, P::contentStatus(), ['class' => 'form-control']);\n\n// Get content status value by name\necho P::contentStatus('published'); // 1\n\n// Get content status description by value\necho P::contentStatus((int)1); // 'Published'\n```"
  },
  {
    "html_url": "https://gist.github.com/10462499",
    "description": "Yii: Using more than one ServerFileInput widgets on a page",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10462499/raw/2771419537e2dd489ebda538b3cf467b1677f4c4/many-serverfileinput-widgets.md"
    ],
    "content": "# Using more than one ServerFileInput widgets on a page\n\nI need `ServerFileInput` widget without model and attribute, just to select file on a server or to upload file to the server, then select it. In advance I don't know how much inputs such widgets will be on a page. Therefore, I add temporary field to the model to use with this widget, then plan to clone it with jQuery.\n\n```php\n<?php\nclass MyModel extends CActiveRecord\n{\n\tpublic $my_attachment; // used only to generate elFinder.ServerFileInput widget\n\t// ...\n}\n```\n\nThen configure connector settings in a controller:\n\n```php\n<?php\n\nclass MyController extends Controller\n{\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'elFinderConnector', ],\n\t\t\t\t'roles'   => [ 'admin', 'authorizedUser', ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'deny',\n\t\t\t\t'users' => [ '*' ],\n\t\t\t],\n\t\t];\n\t}\n\n\tpublic function actionElFinderConnector()\n\t{\n\t\t// each user has own path named with ID, e.g.: /uploads/users/190/ for user with ID 190\n\t\t$userPath = Yii::app()->params[ 'userUploadsFolder' ] . Yii::app()->user->id . '/';\n\t\t$userRoot = Yii::getPathOfAlias( 'webroot' ) . $userPath; // full path to the user's folder\n\n\t\t// if directory doesn't exist, create them\n\t\tif ( !file_exists( $userRoot ) )\n\t\t\tmkdir( $userRoot, 0777, true );\n\n\t\t// initialize ElFinder\n\t\t$connector                            = new ElFinderConnectorAction( $this, $this->action->id );\n\t\t$connector->settings[ 'root' ]        = $userRoot;\n\t\t$connector->settings[ 'URL' ]         = Yii::app()->baseUrl . $userPath;\n\t\t$connector->settings[ 'rootAlias' ]   = 'Home';\n\t\t$connector->settings[ 'uploadAllow' ] = [ 'application/pdf' ]; // allow only PDF mime type\n\t\t$connector->settings[ 'uploadDeny' ]  = [ 'all' ]; // deny all other mime types\n\t\t$connector->run();\n\t}\n\n}\n```\n\nIn view I prepare container for attachments and template widget to clone later via JavaScript:\n\n```php\n<?php \n/* @var MyController $this */\n/* @var MyModel $model */\n?>\n<div class=\"attachments-container\">\n<!-- here will be many ServerFileInput widgets later -->\n</div>\n\n<div class=\"attachment-template\" style=\"display: none;\">\n\t<?php\n\t$this->widget( 'ext.elfinder.ServerFileInput', [\n\t\t'model'          => $model,\n\t\t'attribute'      => 'my_attachment',\n\t\t'connectorRoute' => 'myModule/myController/elFinderConnector',\n\t\t'twbsControls'   => true, // https://gist.github.com/umidjons/9525300\n\t] );\n\t/* Do not forget change this line in javascript code, if you change above settings!!!\n\t * window.elfinderBrowse(\"MyModel_my_attachment\", '/myModule/myController/elFinderConnector');\n\t * */\n\t?>\n</div>\n```\n\nI prepare function to generate new attachment widgets. In real world applications you would generate such widgets with button clicks.\n\n```js\njQuery(document).ready(function($){\n\t/**\n\t * Generates new attachment widget.\n\t * @param {int} idx index of attachment\n\t */\n\tfunction newAttachment(idx){\n\t\t// clone from template and show widget\n\t\tvar attachment=$(\".attachment-template\").clone(true)\n\t\t\t.removeClass(\"attachment-template\").addClass(\".attachment\")\n\t\t\t.appendTo(\".attachments-container\").show();\n\t\t// change name, id and value attributes\n\t\tattachment.children(\"div\").attr({name: \"Attachments[\"+idx+\"][attachment]\", id: \"Attachments_\"+idx+\"_attachmentcontainer\"});\n\t\tattachment.find(\"input[type=text]\").attr({name: \"Attachments[\"+idx+\"][attachment]\", id: \"Attachments_\"+idx+\"_attachment\", value: \"\"});\n\t}\n\t\n\t// generate attachments\n\tfor(var i=0; i<3; i++)\n\t\tnewAttachment(i);\n});\n```\n\nWhen user chooses a file actual URL of the chosen file written into template's input field. So we need to handle this, and copy URL into our input value.\n\nFirst, I will remember current input ID as body's property:\n```js\n\t$(\"body\").on(\"click\", \".attachment input[type=button]\", function(){ // save elFinder input field id as body's property\n\t\t$(\"body\").prop(\"elfinderInput\", $(this).closest(\"div\").find(\"input[type=text]\")[0].id);\n\t\t// open file browser\n\t\twindow.elfinderBrowse(\"MyModel_my_attachment\", '/myModule/myController/elFinderConnector');\n\t});\n```\n\nDefault `ServerFileInput` implementation do not handle file select event. So we need some hack to catch file selection, also selected URL. Open `ServerFileInput.php`, then change this line:\n\n```php\n<?php\n\t$settings[ 'editorCallback' ]        = 'js:function(url) {\n    \t$(\\'#\\'+aFieldId).attr(\\'value\\',url);\n    }';\n```\n\nwith this:\n\n```php\n<?php\n\t$settings[ 'editorCallback' ]        = 'js:function(url) {\n    \t$(\\'#\\'+aFieldId).attr(\\'value\\',url);\n    \t$(\"body\").trigger(\"elfinderFileSelected\", url); // trigger custom event, also send URL to that event as parameter\n    }';\n```\n\nNow we will catch `elfinderFileSelected` event and write selected URL from template's input value into current input value, which ID holded in body as a property:\n\n```js\n\t$(\"body\").on(\"elfinderFileSelected\", function(event, url){ // set elFinder input value to URL of selected file\n\t\t$(\"#\"+$(\"body\").prop(\"elfinderInput\")).val(url);\n\t});\n```\n\nNow all things are ready to play, just handle submit request on the controller to do something with attachments, for example save their URLs in a DB:\n\n```php\n<?php\nclass MyController extends Controller\n{\n\tpublic function actionManageAttachments()\n\t{\n\t\tif ( isset( $_POST[ 'Attachments' ] ) )\n\t\t{\n\t\t\tforeach ( $_POST[ 'Attachments' ] as $idx => $attachment )\n\t\t\t{\n\t\t\t\t$attachment_model             = new MyAttachmentModel();\n\t\t\t\t$attachment_model->attributes = $attachment;\n\t\t\t\t$attachment_model->save();\n\t\t\t}\n\t\t}\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/10441936",
    "description": "JavaScript: Inheritance example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10441936/raw/f52a6d363babc44065dbdd8b7bba3cd263fda7c3/inheritance-example-javascript.md"
    ],
    "content": "# Inheritance example in JavaScript\n\nFor example, we create `Person` class:\n```js\n// Person class\nfunction Person(options, data){\n\tthis._default_options={\n\t\toption1: 'default_val_1',\n\t\toption2: 'default_val_2'\n\t};\n\tthis.options=$.extend({}, this._default_options, options); // override default options if specified\n\t// some common properties\n\tthis.first_name='';\n\tthis.last_name='';\n\tthis.age=0;\n};\n\nPerson.prototype.method_1=function(data){\n\t// process data, do some useful operations\n\treturn this; // support chains\n};\n```\n\nThen we create `Student` class inheriting all members from `Person`:\n```js\n// Student class\nfunction Student(data){\n\tPerson.call(this, {options1: 'abc', options2: 'def'}, data); // call parent constructor\n\tthis.courses=data.courses; // specific members of student\n}\n\nStudent.prototype=new Person({}); // actual inheritance is here\n```\n\nNow we can use `Student` class:\n```js\n// using\nvar student=new Student({mark: 100, courses: ['programming', 'RDBA', 'security'], hours: 6});\nstudent.first_name='Tony';\nstudent.last_name='Hunter';\nstudent.age=19;\nstudent.method_1('some data');\n\nconsole.log('Student:', student);\n```"
  },
  {
    "html_url": "https://gist.github.com/10102626",
    "description": "Yii: Multilingual/Translatable Application name",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10102626/raw/44af699561f4640ca668c3f694a41830a7be8993/multilang-app-name.md"
    ],
    "content": "# Multilingual application name\n\nWe can't directly translate application name in config files as following:\n\n```php\n<?php\nreturn [\n\t'basePath'       => dirname( __FILE__ ) . DIRECTORY_SEPARATOR . '..',\n\t'name'           => Yii::t('domain', 'My Application'), // this doesn't work!!!\n\t// ...\n];\n```\n\nBut we can use workaround here, instead of translating application name in configuration file, we translate it in using places, for example, in layouts.\n\nIn configuration file just use original/primary language:\n\n```php\n<?php\nreturn [\n\t'basePath'       => dirname( __FILE__ ) . DIRECTORY_SEPARATOR . '..',\n\t'name'           => 'My Application', // do not translate here!!!\n\t// ...\n];\n```\n\nThen in layout use this code with `Yii::t()` call:\n\n```php\n<title><?php echo CHtml::encode( Yii::t( 'domain', Yii::app()->name ) . ' - ' . $this->pageTitle ); ?></title>\n```\n\nDo not forget to include translation in `protected/messages/LANG_CODE/domain.php` files. For russian it well be `protected/messages/ru/domain.php` with this content:\n\n```php\n<?php\nreturn array (\n\t'My Application' => 'Моя приложения',\n\t// ...\n];\n```\n\n### Generate translation files\n\nCreate configuration file for translations `protected/config/messages.php` with following content:\n\n```php\n<?php\nreturn [\n\t'sourcePath'  => '/var/www/mywebapp/protected', // look for sources here\n\t'messagePath' => '/var/www/mywebapp/protected/messages', // generate translation files here\n\t'languages'  =>['ru','uz'],\n\t'fileTypes'  =>['php','js'],\n\t'exclude'    =>['.git'],\n\t'translator' =>['Yii::t','$.Yii.t'], // Yii::t() for PHP, $.Yii.t() for JS\n\t'removeOld'  =>true, // remove old unused entries, instead of mark them as @@\n\t'overwrite'  =>true, // overwrite translated files\n\t'sort'       =>true, // sort by key\n];\n```\nFor information about `$.Yii.t()` look https://gist.github.com/umidjons/9888711.\n\nThen we can issue `yiic` command to generate translations specifying above file:\n\n```sh\ncd /var/www/mywebapp\nyiic message protected/config/messages.php\n```\n\nNow we can open generated files and type translations."
  },
  {
    "html_url": "https://gist.github.com/10094793",
    "description": "PHP: startsWith & endsWith functions",
    "files": [
      "https://gist.githubusercontent.com/umidjons/10094793/raw/01b5a815dffa261e650243db9d2d30b47c7972fc/startswith-endswith.md"
    ],
    "content": "# startsWith & endsWith functions\n\n```php\n<?php\nfunction startsWith($haystack, $needle)\n{\n    return strncmp($haystack, $needle, strlen($needle)) === 0;\n}\n\nfunction endsWith($haystack, $needle)\n{\n    return $needle === '' || substr_compare($haystack, $needle, -strlen($needle)) === 0;\n}\n```\n\n[Link to discussion on StackOverflow](http://stackoverflow.com/questions/834303/php-startswith-and-endswith-functions)"
  },
  {
    "html_url": "https://gist.github.com/9969749",
    "description": "Yii: Using transactions with ActiveRecord",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9969749/raw/f07a34b0c58a6a652b51be121b171d280fd9e9ff/transactions-activerecord.md"
    ],
    "content": "# Using transactions with ActiveRecord\n\n```php\n<?php\n$model       = new PersonInfo();\n$transaction = $model->dbConnection->beginTransaction();\n// ... work with this and other models\n\n// save models...\nif ( !$model->save() )\n\t$error = $model->getErrors();\n\nif ( $error ) // something wrong\n{\n\tif ( $transaction->active ) // rollback transaction\n\t\t$transaction->rollback();\n\n\t// show errors\n\t$this->render( 'errors', [ 'error' => $error ] );\n}\nelseif ( $transaction->active ) // everything is OK\n\t$transaction->commit(); // commit changes\n\n$this->render( 'success', [ 'model' => $model ] );\n```"
  },
  {
    "html_url": "https://gist.github.com/9927376",
    "description": "Hide browser's scroll bar, but be able to scroll.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9927376/raw/9d3cf4cd7b57ed735e41779cdd7dd61ed3cac78d/no-browser-scrollbar.md"
    ],
    "content": "# Hide browser's scrollbars, but be able to scroll\n\nMy HTML structure was as following (I've used twitter bootstrap):\n\n```html\n<body>\n  <div class=\"container\">\n  \t<!-- long content -->\n  </div>\n</body>\n```\n\nTo hide scrollbars  I've used this CSS code:\n\n```css\nbody{\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n}\n\n.container{\n\toverflow: auto;\n}\n```\n\nOriginal code was as this in [jsFiddle](http://jsfiddle.net/5GCsJ/4/):\n\n```html\n<div id=\"container1\">\n  <div id=\"container2\">\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    hello<br/>I<br/>am<br/>here<br/>\n    good<br/>bye.\n  </div>\n<div>\n```\n\n```css\n#container1{\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n}\n\n#container2{\n    width: 100%;\n    height: 99%;\n    overflow: auto;\n}\n\nhtml, body{\n    height: 100%;\n    overflow: hidden;\n}\n```\n\n"
  },
  {
    "html_url": "https://gist.github.com/9912003",
    "description": "Yii: Using more checkboxlists with the same model",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9912003/raw/44225d1a749d4ee3aafcdb0d62d9a1e9e3f3475c/more-checkboxlist.md"
    ],
    "content": "# Using more checkboxlists with the same model\n\nIf we need to use more than one `checkboxlist` with the same model in the same page `ID`s of checkboxes/labels may be clashed. To prevent clashes we should set special attribute `baseID`. It is a string, which specifies the base ID prefix to be used for checkboxes in the list.\n\n```php\n<div class=\"form-group\">\n\t<div class=\"col-sm-6\">\n\t\t<?php $form->checkBoxList( $model, 'property', $models_1,\n\t\t\t[ 'baseID' => 'User_property_1' ] ); // generate IDs id=\"User_property_1_N\", where N=0,1,2...\n\t\t?>\n\t</div>\n\t<div class=\"col-sm-6\">\n\t\t<?php $form->checkBoxList( $model, 'property', $models_2,\n\t\t\t[ 'baseID' => 'User_property_2' ] ); // generate IDs id=\"User_property_2_N\", where N=0,1,2...\n\t\t?>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/9911915",
    "description": "Yii: Using clips in widgets",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9911915/raw/85b5215166efedd31db76f9b81a4bc9cb83acd41/clips-in-widgets.md"
    ],
    "content": "# Using clips in widgets\n\nSometimes we want to pass one widget output as content to another widget. In such situations clips are very useful. Below is example, we clip output, then pass this output as content to other widget:\n\n```php\n<?php\n/* @var $this EUserAccessInfo */\n?>\n\n<?php $this->beginClip( 'list_of_operations' ); //--< start clipping >--?>\n\t<ul class=\"list-group\">\n\t\t<?php foreach ( $operations as $oper ): ?>\n\t\t\t<li class=\"list-group-item\"><?= $oper->description; ?></li>\n\t\t<?php endforeach; ?>\n\t</ul>\n<?php $this->endClip(); //--< end clipping >-- ?>\n\n<?php $this->widget( 'ext.panel.Panel', [\n\t'title'   => Yii::t( 'zr', 'Roles/Tasks/Operations' ),\n\t'content' => $this->controller->clips[ 'list_of_operations' ], // access clip via controller\n] ); ?>\n```\n\n**Note:** we can't access the clips directly from widget, instead can get it via a controller.\n"
  },
  {
    "html_url": "https://gist.github.com/9893735",
    "description": "Normalize $_FILES array when uploading multiple files (from php.net)",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9893735/raw/7006f341e5123a96f2893568cfe249538dbb9764/files-array-normalize.md"
    ],
    "content": "# Normalize `$_FILES` array when uploading multiple files\n\nWhen uploading multiple files, the `$_FILES` variable is created in the form:\n\n```\nArray\n(\n    [name] => Array\n        (\n            [0] => foo.txt\n            [1] => bar.txt\n        )\n\n    [type] => Array\n        (\n            [0] => text/plain\n            [1] => text/plain\n        )\n\n    [tmp_name] => Array\n        (\n            [0] => /tmp/phpYzdqkD\n            [1] => /tmp/phpeEwEWG\n        )\n\n    [error] => Array\n        (\n            [0] => 0\n            [1] => 0\n        )\n\n    [size] => Array\n        (\n            [0] => 123\n            [1] => 456\n        )\n)\n```\n\nIt would be cleaner if the uploaded files array in the form:\n\n```\nArray\n(\n    [0] => Array\n        (\n            [name] => foo.txt\n            [type] => text/plain\n            [tmp_name] => /tmp/phpYzdqkD\n            [error] => 0\n            [size] => 123\n        )\n\n    [1] => Array\n        (\n            [name] => bar.txt\n            [type] => text/plain\n            [tmp_name] => /tmp/phpeEwEWG\n            [error] => 0\n            [size] => 456\n        )\n)\n```\n\nWe can convert `$_FILES` array to cleaner one with this function:\n\n```php\n<?php\nfunction normalizeFiles( &$files )\n{\n\t$_files       = [ ];\n\t$_files_count = count( $files[ 'name' ] );\n\t$_files_keys  = array_keys( $files );\n\n\tfor ( $i = 0; $i < $_files_count; $i++ )\n\t\tforeach ( $_files_keys as $key )\n\t\t\t$_files[ $i ][ $key ] = $files[ $key ][ $i ];\n\n\treturn $_files;\n}\n```\n\nThen we can use it like so:\n\n```php\n<?php\nif ( $_FILES[ 'upload' ] )\n{\n\t$files = normalizeFiles( $_FILES[ 'myfiles' ] );\n\tforeach ( $files as $file )\n\t{\n\t\tprint 'File Name: ' . $file[ 'name' ] . \"<br>\\n\";\n\t\tprint 'File Type: ' . $file[ 'type' ] . \"<br>\\n\";\n\t\tprint 'File Size: ' . $file[ 'size' ] . \"<br><br>\\n\";\n\t}\n}\n```\n\nOutput:\n```\nFile Name: shanideveloper-blogspot-com.pdf\nFile Type: application/pdf\nFile Size: 175928\n\nFile Name: Packtpub.Yii.1.1.Application.Development.Cookbook.Aug.2011.rar\nFile Type: application/octet-stream\nFile Size: 5960406\n```"
  },
  {
    "html_url": "https://gist.github.com/9889371",
    "description": "Yii: Add additional `data-` attributes to each row in `CGridView`",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9889371/raw/66278a356b54f5dff4be8626b826b25a9611cfd3/rowHtmlOptionsExpression.md"
    ],
    "content": "# Add additional `data-` attributes to each row in `CGridView`\n\nSometimes we need to hold some values from model in `data-` attributes of tag. But we can't use `$data` special variable in cell's `htmlOptions` attributes. Instead of holding data in cell, we can generate `data-` attributes for rows (`tr`). For this purpose `CGridView` has special attribute `rowHtmlOptionsExpression`.\n\n```php\n<?php\n$this->widget( 'zii.widgets.grid.CGridView',\n[\n\t'id'                       => 'my-grid',\n\t'dataProvider'             => $model->search(),\n\t'filter'                   => null,\n\t'itemsCssClass'            => 'table table-striped table-hover table-condensed',\n\t'template'                 => '{items}{pager}',\n\t'columns'                  =>\n\t\t[\n\t\t\t[\n\t\t\t\t'name'        => 'id',\n\t\t\t\t'htmlOptions' => [ 'class' => 'id' ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'name'        => 'animal_class',\n\t\t\t\t'value'       => 'AnimalClass::visualValues( $data->animal_class )', // class name, not class ID\n\t\t\t\t'htmlOptions' => [ 'class' => 'animal-class', ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'name'        => 'title',\n\t\t\t\t'htmlOptions' => [ 'class' => 'title' ],\n\t\t\t],\n\t\t],\n\t'rowHtmlOptionsExpression' => '[ \"data-animalclass\" => $data->animal_class, ]', // <tr data-animalclass = \"123\">\n] );\n```\n\nAccess `data-animalclass` property using jQuery.\n\n```js\n// $(this) - clicked link in the row or, for example, button in the CButtonColumn.\nvar row=$(this).closest('tr'),\n\tanimalClassID=row.data('animalclass');\nconsole.log('Animal class ID:', animalClassID);\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9888711",
    "description": "Yii: Access translated messages from JavaScript",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9888711/raw/2971721e7ea885556fe62982acbe5ed426ae9994/access-translated-messages-from-javascript.md"
    ],
    "content": "# Access translated messages from JavaScript\n\nCreate `PhpMessageSource` class in `protected/components/` folder and inherit `CPhpMessageSource` class. Override its `loadMessages` method to make it available to public (parent's method is `protected`, we can't access it from outside).\n\n```php\n<?php\nclass PhpMessageSource extends CPhpMessageSource\n{\n\t// override this, just to make it available for public\n\tpublic function loadMessages( $category, $language )\n\t{\n\t\treturn parent::loadMessages( $category, $language );\n\t}\n}\n```\n\nConfigure application configuration to use `PhpMessageSource` class instead of `CPhpMessageSource`:\n\n```php\n<?php\nreturn [\n\t// ...\n\t'components' => [\n\t\t// ...\n\t\t'messages' => [\n\t\t\t'class' => 'PhpMessageSource',\n\t\t],\n\t\t// ...\n\t]\n\t// ...\n]\n```\n\nHelper method to load messages by category.\n\n```php\n<?php\nclass F\n{\n\t/**\n\t * Load Yii messages for a given category, and makes it available via jQuery.Yii.t(text).<br>\n\t * NOTE: Just one category can be loaded!\n\t * @param string $category category of messages\n\t */\n\tpublic static function jsTranslations( $category )\n\t{\n\t\t$trans=CJSON::encode(Yii::app()->messages->loadMessages($category,Yii::app()->language));\n\t\t$js   ='\n\t\tjQuery.Yii=\n\t\t\t{\n\t\t\t\ttranslations:'.$trans.',\n\t\t\t\tt           : function(text)\n\t\t\t\t{\n\t\t\t\t\tif(text in this.translations && this.translations[text])\n\t\t\t\t\t\treturn this.translations[text];\n\t\t\t\t\treturn text;\n\t\t\t\t}\n\t\t\t};\n\t\t';\n\t\tYii::app()->clientScript->registerScript('jsTranslations',$js,CClientScript::POS_END);\n\t}\n}\n```\n\nLoad messages in, for example layout file:\n\n```php\n<?php\n/* @var SiteController $this */\nF::jsTranslations( 'zr' ); // load before javascript files, that may use translations\n?>\n<!DOCTYPE html>\n<html>\n...\n```\n\nIn JavaScript files use as following:\n\n```js\n$.Yii.t(\"Add\"); // \"Добавить\"\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9884932",
    "description": "Yii: Using `CHtml::ajaxSubmitButton` in active forms",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9884932/raw/ed5cbb0b42baf5f3fe1c83664444316a6a94c1bb/chtml-ajaxsubmitbutton.md"
    ],
    "content": "# Using `CHtml::ajaxSubmitButton` in active forms\n\n```php\n<div class=\"form-group\">\n\t<div class=\"col-sm-12 text-right\">\n\t\t<?=\n\t\tCHtml::ajaxSubmitButton( Yii::t( 'zr', 'Add' ), [ 'createProperty' ],\n\t\t\t[\n\t\t\t\t'type'     => 'POST',\n\t\t\t\t'dataType' => 'json',\n\t\t\t\t'data'     => 'js:$(\"#property-form\").serialize()',\n\t\t\t\t'complete' => 'js:function(){location.reload();}',\n\t\t\t\t'success'  => 'js:function(resp){console.log(resp);}',\n\t\t\t],\n\t\t\t[ 'class' => 'btn btn-default' ] );\n\t\t?>\n\t</div>\n</div>\n```\n\nSerialize form with `$(form#form-id).serialize()` method.\nReload whole page with `location.reload()` method.\nTo accept response in `JSON` format, set `dataType` to `json`. Then we can use response as `JSON` object (no need to parse response with `$.parseJSON()`).\n\nAction `createProperty` may look like as following:\n\n```php\n<?php\npublic function actionCreateProperty()\n{\n\t//echo CJSON::encode( $_POST[ 'Property' ] ); // just echo data back\n\t\n\t// actual data saving:\n\t$model = new Property();\n\tif ( isset( $_POST[ 'Property' ] ) )\n\t{\n\t\t$model->attributes = $_POST[ 'Property' ];\n\t\tif ( $model->save() )\n\t\t\tCJSON::encode( [ 'msg' => Yii::t( 'zr', 'New Property successfully added.' ) ] );\n\t\telse\n\t\t\tCJSON::encode( $model->getErrors() );\n\t}\n}\n```\n\nWe can also control request type via filters, for example, we can accept only `AJAX POST` request:\n\n```php\n<?php\npublic function filters()\n{\n\treturn [\n\t\t'accessControl',\n\t\t'postOnly + createProperty',\n\t\t'ajaxOnly + createProperty',\n\t];\n}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9829421",
    "description": "Work with common parameters in Yii",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9829421/raw/19177378eb20ac6095d3877e67129e2510f9955b/common-parameters-yii.md"
    ],
    "content": "# Work with common parameters in Yii\n\n`Params` table structure:\n\n```sql\n-- ----------------------------\n-- Table structure for params\n-- ----------------------------\nDROP TABLE IF EXISTS `params`;\nCREATE TABLE `params` (\n  `param_type` varchar(50) NOT NULL,\n  `param_name` varchar(50) NOT NULL,\n  `param_value` varchar(255) NOT NULL,\n  `param_description` varchar(255) NOT NULL,\n  PRIMARY KEY (`param_type`,`param_name`,`param_value`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\nExample records:\n\n```sql\n-- ----------------------------\n-- Records of params\n-- ----------------------------\nINSERT INTO `params` VALUES ('citizenship', 'foreigner', '2', 'Иностранец');\nINSERT INTO `params` VALUES ('citizenship', 'legalPerson', '3', 'Юридическое лицо');\nINSERT INTO `params` VALUES ('citizenship', 'uzbekistan', '1', 'Гражданин Узбекистана');\nINSERT INTO `params` VALUES ('contentStatus', 'deleted', '2', 'Удален');\nINSERT INTO `params` VALUES ('contentStatus', 'draft', '0', 'Черновик');\nINSERT INTO `params` VALUES ('contentStatus', 'published', '1', 'Опубликован');\nINSERT INTO `params` VALUES ('noticeType', 'forbid', '2', 'Налоговый или таможенный запрет');\nINSERT INTO `params` VALUES ('noticeType', 'restrictionOfRights', '3', 'Ограничение прав');\nINSERT INTO `params` VALUES ('noticeType', 'rightsOfCreditor', '1', 'Право кредитора на имущество');\nINSERT INTO `params` VALUES ('personType', 'creditor', '2', 'Кредитор');\nINSERT INTO `params` VALUES ('personType', 'debtor', '1', 'Дебитор');\nINSERT INTO `params` VALUES ('propertyClass', 'attachedProperty', '3', 'Прикрепленный объект');\nINSERT INTO `params` VALUES ('propertyClass', 'immovableProperty', '1', 'Недвижимое имущество');\nINSERT INTO `params` VALUES ('propertyClass', 'movableProperty', '2', 'Движимое имущество');\nINSERT INTO `params` VALUES ('status', 'active', '1', 'Активный');\nINSERT INTO `params` VALUES ('status', 'disabled', '0', 'Отключенный');\n```\n\nGenerate model for params, remove unnecessary methods:\n\n```php\n<?php\n\n/**\n * The followings are the available columns in table 'params':\n * @property string $param_type\n * @property string $param_name\n * @property string $param_value\n * @property string $param_description\n */\nclass Params extends CActiveRecord\n{\n\tpublic function tableName()\n\t{\n\t\treturn 'params';\n\t}\n\n\tpublic static function model( $className = __CLASS__ )\n\t{\n\t\treturn parent::model( $className );\n\t}\n\n\t/**\n\t * Get parameter types as array.\n\t * @return array parameter types.\n\t */\n\tpublic static function types()\n\t{\n\t\t$criteria    = new CDbCriteria( [ 'select' => 'param_type', 'distinct' => true ] );\n\t\t$param_types = CHtml::listData( self::model()->findAll( $criteria ), 'param_type', 'param_type' );\n\t\treturn array_values( $param_types );\n\t}\n\n\t/**\n\t * Get parameter values as array.\n\t * @param string $paramType\n\t * @return array parameter values.\n\t */\n\tpublic static function values( $paramType )\n\t{\n\t\t$values = self::model()->findAll( [ 'condition' => 'param_type=:param_type', 'params' => [ ':param_type' => $paramType ] ] );\n\t\treturn CHtml::listData( $values, 'param_value', 'param_name' );\n\t}\n\n\t/**\n\t * Get parameter value by type and name.\n\t * @param string $paramType type of the parameter\n\t * @param string $paramName name of the parameter\n\t * @return mixed parameter value or null, if no such parameter exist.\n\t */\n\tpublic static function value( $paramType, $paramName )\n\t{\n\t\treturn self::model()->find( [\n\t\t\t'condition' => 'param_type=:param_type AND param_name=:param_name',\n\t\t\t'params'    => [\n\t\t\t\t':param_type' => $paramType,\n\t\t\t\t':param_name' => $paramName,\n\t\t\t], ] )->param_value;\n\t}\n}\n```\n\nUsage example:\n\n```php\n<?php\nYii::log( 'types: ' . print_r( Params::types(), true ) );\nYii::log( 'values: ' . print_r( Params::values( 'noticeType' ), true ) );\nYii::log( 'value: ' . print_r( Params::value( 'noticeType', 'restrictionOfRights' ), true ) );\n```\n\nOutputs\n\n```\ntypes: Array\n(\n    [0] => citizenship\n    [1] => contentStatus\n    [2] => noticeType\n    [3] => personType\n    [4] => propertyClass\n    [5] => status\n)\n```\n\n```\nvalues: Array\n(\n    [2] => forbid\n    [3] => restrictionOfRights\n    [1] => rightsOfCreditor\n)\n```\n\n```\nvalue: 3\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9802253",
    "description": "Yii: Configuring number format & using in CGridView column",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9802253/raw/b041867074747dbdd94d92ef6b526db3f36e1061/configuring-number-date-time-formats.md"
    ],
    "content": "# Configuring number format & using in CGridView column\n\nWe can configure numbers format in application configuration as below:\n\n```php\n<?php\nreturn [\n\t// ...\n\t'components'     => [\n\t\t// ...\n\t\t'format'        => [\n\t\t\t// number format\n\t\t\t'numberFormat'   => [ 'decimals' => 2, 'decimalSeparator' => '.', 'thousandSeparator' => false ],\n\t\t\t\n\t\t\t// date time formats\n\t\t\t'datetimeFormat' => 'd.m.Y H:i:s',\n\t\t\t'dateFormat'     => 'd.m.Y',\n\t\t],\n\t],\n];\n```\n\nIn CGridView we can set columns' format as follow:\n\n```php\n<?php $this->widget( 'zii.widgets.grid.CGridView', [\n\t'id'            => 'service-grid',\n\t'dataProvider'  => $model->search(),\n\t'filter'        => null,\n\t'itemsCssClass' => 'table table-striped table-hover table-condensed',\n\t'template'      => '{items}{pager}',\n\t'columns'       => [\n\t\t[\n\t\t\t'header'      => Yii::t( 'zr', 'Service' ),\n\t\t\t'name'        => 'description',\n\t\t\t'htmlOptions' => [ 'class' => 'service-name' ],\n\t\t],\n\t\t[\n\t\t\t'header'      => Yii::t( 'zr', 'Price' ),\n\t\t\t'name'        => 'price',\n\t\t\t'value'       => '$data->currentPrice->price',\n\t\t\t'htmlOptions' => [ 'class' => 'service-price' ],\n\t\t\t'type'        => 'number', // format as number\n\t\t],\n\t\t[\n\t\t\t'header' => Yii::t( 'zr', 'Create Date' ),\n\t\t\t'name'   => 'created_at',\n\t\t\t'value'  => '$data->currentPrice->created_at',\n\t\t\t'type'   => 'datetime', // format as date and time\n\t\t],\n\t\t[\n\t\t\t'class'    => 'CButtonColumn',\n\t\t],\n\t],\n] ); ?>\n```\n\nIn other places we can format number like:\n\n```php\n<?= Yii::app()->format->formatNumber( \"6632678.64857\" ); ?>\n```"
  },
  {
    "html_url": "https://gist.github.com/9800039",
    "description": "Yii: Sorting associative array by value preserving keys",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9800039/raw/f6c89446ca2fc666f467fbfe328594b26bf129da/sort-associative-array-by-value-preserving-keys.md"
    ],
    "content": "# Sort associative array by value preserving indexes/keys\n\nI want to get a list of roles, sort them by description, then use it to output list of checkboxes. First I should get list of roles, but I don't need all properties, only `name` and `description`.\n\n```php\n<?php\n// get roles as ['name1'=>'description1','name2'=>'description2','name3'=>'description3', ...]\n$roles = CHtml::listData( Yii::app()->authManager->roles, 'name', 'description' );\nYii::log( '$roles before sort: ' . print_r( $roles, true ) );\n```\n\nBefore sort `$roles` array looks like as following:\n\n```\n$roles before sort: Array\n(\n    [arestor] => Государственные организации налагающие арест на имущество лица\n    [authorizedUser] => Авторизованный пользователь\n    [creditor] => Организация, обладающая правами кредитора на имущество\n    [groupAdministrator] => Администратор группы\n    [lawEnforcement] => Правоохранительные органы, ограничивающие права лица на его имущество\n    [registrar] => Регистратор\n    [siteModerator] => Модератор сайта\n    [statist] => Статистик\n    [superAdministrator] => Супер администратор\n    [user] => Пользователь\n)\n```\n\nIf I sort using `sort` function I lost `name` indexes. They will be reindexed.\n\n```php\n<?php\nsort( $roles );\nYii::log( '$roles after sort: ' . print_r( $roles, true ) );\n```\n\nArray after `sort`:\n\n```\nArray\n(\n    [0] => Авторизованный пользователь\n    [1] => Администратор группы\n    [2] => Государственные организации налагающие арест на имущество лица\n    [3] => Модератор сайта\n    [4] => Организация, обладающая правами кредитора на имущество\n    [5] => Пользователь\n    [6] => Правоохранительные органы, ограничивающие права лица на его имущество\n    [7] => Регистратор\n    [8] => Статистик\n    [9] => Супер администратор\n)\n```\n\nSo I need a way to sort array by value and preserve keys. `array_multisort` is handy in this situation. We can use it as below:\n\n```php\n<?php\n// sort associative array by value preserving keys\n\n// prepare for sorting by value/description:\n$descriptions = [ ];\nforeach ( $roles as $name => $desc )\n\t$descriptions[ $name ] = $desc;\n\n// sort $roles array by $description array value:\narray_multisort( $descriptions, SORT_ASC, $roles );\n\n// output array after sort\nYii::log( '$roles after sort: ' . print_r( $roles, true ) );\n```\n\nOutput of array after sorting with `array_multisort`:\n\n```\n$roles after sort: Array\n(\n    [authorizedUser] => Авторизованный пользователь\n    [groupAdministrator] => Администратор группы\n    [arestor] => Государственные организации налагающие арест на имущество лица\n    [siteModerator] => Модератор сайта\n    [creditor] => Организация, обладающая правами кредитора на имущество\n    [user] => Пользователь\n    [lawEnforcement] => Правоохранительные органы, ограничивающие права лица на его имущество\n    [registrar] => Регистратор\n    [statist] => Статистик\n    [superAdministrator] => Супер администратор\n)\n```\n\nNow we can use this array, for example in checkbox-lists or dropdown-lists. Below is example for checkbox-list:\n\n```php\n<?php\n// output checkboxlist, name as value, description as text/title\necho $form->checkBoxList( $model, 'roles', $roles );\n```\n\nAbove code will generate following HTML output:\n\n```html\n<input id=\"ytUser_roles\" type=\"hidden\" value=\"\" name=\"User[roles]\">\n<span id=\"User_roles\"><input id=\"User_roles_0\" value=\"authorizedUser\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_0\">Авторизованный пользователь</label><br>\n<input id=\"User_roles_1\" value=\"groupAdministrator\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_1\">Администратор группы</label><br>\n<input id=\"User_roles_2\" value=\"arestor\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_2\">Государственные организации налагающие арест на имущество лица</label><br>\n<input id=\"User_roles_3\" value=\"siteModerator\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_3\">Модератор сайта</label><br>\n<input id=\"User_roles_4\" value=\"creditor\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_4\">Организация, обладающая правами кредитора на имущество</label><br>\n<input id=\"User_roles_5\" value=\"user\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_5\">Пользователь</label><br>\n<input id=\"User_roles_6\" value=\"lawEnforcement\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_6\">Правоохранительные органы, ограничивающие права лица на его имущество</label><br>\n<input id=\"User_roles_7\" value=\"registrar\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_7\">Регистратор</label><br>\n<input id=\"User_roles_8\" value=\"statist\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_8\">Статистик</label><br>\n<input id=\"User_roles_9\" value=\"superAdministrator\" checked=\"checked\" type=\"checkbox\" name=\"User[roles][]\"> <label for=\"User_roles_9\">Супер администратор</label></span>\n```"
  },
  {
    "html_url": "https://gist.github.com/9780505",
    "description": "PHP: Generate longer session ID",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9780505/raw/ad6bd4a10d4cd185fdf4fcf2259b0a0b54a95c7d/generate-longer-session-id.md"
    ],
    "content": "# Generate longer session IDs\nTo generate longer session IDs change these settings in `php.ini`\n```\n# number of bytes which will be read from the file\nsession.entropy_length = 32\n# 0-MD5 (128bits), 1-SHA1 (160bits)\nsession.hash_function = 1\n```"
  },
  {
    "html_url": "https://gist.github.com/9757055",
    "description": "Yii: Helper class to publish assets (including twitter bootstrap)",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9757055/raw/4e270625ca34b7b0dd069bda548f8b1226cd6aa8/yii-helper-class-to-publish-assets.md"
    ],
    "content": "# Helper class to publish assets\n\nThis method will include javascript file without extension from the `protected/assets/js/` folder.\n\n```php\n<?php\nclass F\n{\n\t/**\n\t * Publish and include script file from protected/assets/js folder.\n\t * @param string  $file script file name without extension.\n\t * @param integer $pos  the position of the JavaScript code. Valid values include the following:\n\t * <ul>\n\t * <li>CClientScript::POS_HEAD : the script is inserted in the head section right before the title element.</li>\n\t * <li>CClientScript::POS_BEGIN : the script is inserted at the beginning of the body section.</li>\n\t * <li>CClientScript::POS_END : the script is inserted at the end of the body section.</li>\n\t * </ul>\n\t * @return CClientScript the CClientScript object itself.\n\t */\n\tpublic static function regScriptFile( $file, $pos = CClientScript::POS_END )\n\t{\n\t\t$assetsDir = Yii::app()->basePath . DIRECTORY_SEPARATOR . 'assets' . DIRECTORY_SEPARATOR;\n\t\treturn Yii::app()->clientScript->registerScriptFile( Yii::app()->assetManager->publish( $assetsDir . 'js' . DIRECTORY_SEPARATOR . $file . '.js' ), $pos );\n\t}\n\n\t/**\n\t * Publish and include css file from protected/assets/css folder.\n\t * @param string $file css file name without extension.\n\t * @return CClientScript the CClientScript object itself.\n\t */\n\tpublic static function regCssFile( $file )\n\t{\n\t\t$assetsDir = Yii::app()->basePath . DIRECTORY_SEPARATOR . 'assets' . DIRECTORY_SEPARATOR;\n\t\treturn Yii::app()->clientScript->registerCssFile( Yii::app()->assetManager->publish( $assetsDir . 'css' . DIRECTORY_SEPARATOR . $file . '.css' ) );\n\t}\n\n\t/**\n\t * Publish Twitter Bootstrap fonts from /protected/assets/fonts folder.\n\t * Copies them from /protected/assets/fonts/ into /var/www/mysite/assets/b732073/, for example.\n\t */\n\tpublic static function publishTwbsFonts()\n\t{\n\t\t$am             = Yii::app()->assetManager;\n\t\t$font_path      = Yii::app()->basePath . DIRECTORY_SEPARATOR . 'assets' . DIRECTORY_SEPARATOR . 'fonts' . DIRECTORY_SEPARATOR; // /protected/assets/fonts/\n\t\t$font_path_dest = $am->basePath . DIRECTORY_SEPARATOR . 'fonts' . DIRECTORY_SEPARATOR; // /assets/fonts/\n\t\t$font_filename  = 'glyphicons-halflings-regular';\n\t\t$copy_needed    = false;\n\t\tforeach ( [ 'eot', 'svg', 'ttf', 'woff' ] as $f_ext )\n\t\t\tif ( !file_exists( $font_filename . '.' . $f_ext ) )\n\t\t\t{\n\t\t\t\t$fp          = $am->publish( $font_path . $font_filename . '.' . $f_ext );\n\t\t\t\t$copy_needed = true;\n\t\t\t}\n\t\tif ( $copy_needed )\n\t\t{\n\t\t\t$font_path_src = Yii::getPathOfAlias( 'webroot' ) . dirname( $fp ); // /var/www/mysite/assets/b732073/\n\t\t\tCFileHelper::copyDirectory( $font_path_src, $font_path_dest, [ 'level' => 0 ] );\n\t\t}\n\t}\n\n\t/**\n\t * Publish Twitter Bootstrap assets.\n\t */\n\tpublic static function regTwitterBootstrap()\n\t{\n\t\t// publish CSSs\n\t\tF::regCssFile( 'bootstrap.min' ); // protected/assets/css/boostrap.min.css\n\t\tF::regCssFile( 'bootstrap-theme.min' ); // protected/assets/css/boostrap-theme.min.css\n\t\tF::regCssFile( 'styles' ); // protected/assets/css/styles.css\n\t\t\n\t\t// include jQuery\n\t\tYii::app()->clientScript->registerCoreScript( 'jquery' );\n\t\t\n\t\t// publish JSs\n\t\tF::regScriptFile( 'bootstrap.min' ); // protected/assets/js/bootstrap.min.js\n\t\tF::publishTwbsFonts(); // publish fonts\n\t}\n}\n```\n\nUsage example in view:\n\n```php\n<?php\nF::regTwitterBootstrap();\nF::regScriptFile( 'scripts' ); // include custom JS from protected/assets/js/scripts.js\n```"
  },
  {
    "html_url": "https://gist.github.com/9757010",
    "description": "Convert title to slug",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9757010/raw/368e9675ef979a8e154dd4407ec838e7eeb97bfb/convert-title-to-slug-php-js.md"
    ],
    "content": "# Content:\n- [PHP: Convert title to slug](#php-convert-title-to-slug)\n- [JS: Convert title to slug](#js-convert-title-to-slug)\n- [Bind converting to slug to input changes](#bind-converting-to-slug-to-input-changes)\n\n# PHP: Convert title to slug\n```php\n<?php\nfunction slug( $text )\n\t{\n\t\t$trans = [\n\t\t\t'а' => 'a', 'б' => 'b', 'в' => 'v', 'г' => 'g', 'д' => 'd', 'е' => 'e', 'ё' => 'jo', 'ж' => 'zh', 'з' => 'z', 'и' => 'i', 'й' => 'jj',\n\t\t\t'к' => 'k', 'л' => 'l', 'м' => 'm', 'н' => 'n', 'о' => 'o', 'п' => 'p', 'р' => 'r', 'с' => 's', 'т' => 't', 'у' => 'u', 'ф' => 'f',\n\t\t\t'х' => 'kh', 'ц' => 'c', 'ч' => 'ch', 'ш' => 'sh', 'щ' => 'shh', 'ъ' => '', 'ы' => 'y', 'ь' => '', 'э' => 'eh', 'ю' => 'ju', 'я' => 'ja',\n\t\t];\n\t\t$text  = mb_strtolower( $text, 'UTF-8' ); // lowercase cyrillic letters too\n\t\t$text  = strtr( $text, $trans ); // transliterate cyrillic letters\n\t\t$text  = preg_replace( '/[^A-Za-z0-9 _.]/', '', $text );\n\t\t$text  = preg_replace( '/[ _.]+/', '-', trim( $text ) );\n\t\t$text  = trim( $text, '-' );\n\t\treturn $text;\n\t}\n```\n# JS: Convert title to slug\nPHP `strtr` function alternative in JavaScript.\nWe add this function as part of `jQuery`.\n\n```js\njQuery.strtr=function(str, from, to)\n{\n\tvar fr='', i=0, j=0, lenStr=0, lenFrom=0, tmpStrictForIn=false, fromTypeStr='', toTypeStr='', istr='';\n\tvar tmpFrom=[];\n\tvar tmpTo=[];\n\tvar ret='';\n\tvar match=false;\n\n\t// Received replace_pairs?\n\t// Convert to normal from->to chars\n\tif(typeof from==='object')\n\t{\n\t\tfor(fr in from)\n\t\t\tif(from.hasOwnProperty(fr))\n\t\t\t{\n\t\t\t\ttmpFrom.push(fr);\n\t\t\t\ttmpTo.push(from[fr]);\n\t\t\t}\n\n\t\tfrom=tmpFrom;\n\t\tto=tmpTo;\n\t}\n\n\t// Walk through subject and replace chars when needed\n\tlenStr=str.length;\n\tlenFrom=from.length;\n\tfromTypeStr=typeof from==='string';\n\ttoTypeStr=typeof to==='string';\n\n\tfor(i=0; i<lenStr; i++)\n\t{\n\t\tmatch=false;\n\t\tif(fromTypeStr)\n\t\t{\n\t\t\tistr=str.charAt(i);\n\t\t\tfor(j=0; j<lenFrom; j++)\n\t\t\t\tif(istr==from.charAt(j))\n\t\t\t\t{\n\t\t\t\t\tmatch=true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\t\telse\n\t\t\tfor(j=0; j<lenFrom; j++)\n\t\t\t\tif(str.substr(i, from[j].length)==from[j])\n\t\t\t\t{\n\t\t\t\t\tmatch=true;\n\t\t\t\t\t// Fast forward\n\t\t\t\t\ti=(i+from[j].length)-1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\tif(match) ret+=toTypeStr ? to.charAt(j) : to[j];\n\t\telse ret+=str.charAt(i);\n\t}\n\n\treturn ret;\n}\n```\n\nActual function to convert text into slug.\nAgain we impelement it as `jQuery`'s method.\n\n```js\njQuery.toSlug=function(text)\n{\n\tvar trans={\n\t\t'а': 'a', 'б': 'b', 'в': 'v', 'г': 'g', 'д': 'd', 'е': 'e', 'ё': 'jo', 'ж': 'zh', 'з': 'z', 'и': 'i', 'й': 'jj',\n\t\t'к': 'k', 'л': 'l', 'м': 'm', 'н': 'n', 'о': 'o', 'п': 'p', 'р': 'r', 'с': 's', 'т': 't', 'у': 'u', 'ф': 'f',\n\t\t'х': 'kh', 'ц': 'c', 'ч': 'ch', 'ш': 'sh', 'щ': 'shh', 'ъ': '', 'ы': 'y', 'ь': '', 'э': 'eh', 'ю': 'ju', 'я': 'ja'\n\t};\n\treturn jQuery.strtr(text.toLowerCase(), trans) // transliterate cyrillic letters\n\t\t.replace(/[^A-Za-z0-9 _.]/g, '') // leave only known characters \n\t\t.replace(/[ _\\.]+/g, '-') // convert 'space', '_', '.' into '-'\n\t\t.replace(/^-|-$/gm, ''); // remove '-' from start and end of the text\n}\n```\n\nUsage example:\n\n```js\n$.toSlug(\"Hello world ... фыва ФЫВА привет_done   123.345  Транслитерация русского алфавита----латиницей >>> ...   \\n\")\n```\n\nOutput:\n\n```\nhello-world-fyva-fyva-privet-done-123-345-transliteracija-russkogo-alfavitalatinicejj\n```\n\n#### Bind converting to slug to input changes\n\n```js\njQuery(document).ready(function($)\n{\n\t// on change convert input value to slug\n\t$('[data-slugger=1][data-target]').on('change', function()\n\t{\n\t\t$($(this).data('target')).val($.toSlug($(this).val()));\n\t});\n});\n```\n\nIn view we should put inputs with `data-slugger=1` and `data-target='#Model_attr'` attributes\n\n```php\n\t<?php $form = $this->beginWidget( 'CActiveForm', [\n\t\t'id'                   => 'news-form',\n\t\t'enableAjaxValidation' => false,\n\t\t'htmlOptions'          => [\n\t\t\t'class' => 'form-horizontal',\n\t\t\t'role'  => 'form',\n\t\t],\n\t] ); ?>\n\n\t<?= $form->errorSummary( $model, null, null, [ 'class' => 'alert alert-danger' ] ); ?>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-12\">\n\t\t\t<?= $form->label( $model, 'title' ); ?>\n\t\t\t<?= $form->textField( $model, 'title', [ 'class' => 'form-control', 'data-slugger' => '1', 'data-target' => '#' . CHtml::activeId( $model, 'slug' ), ] ); ?>\n\t\t\t<?= $form->error( $model, 'title', [ 'class' => 'text-danger' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-12\">\n\t\t\t<?= $form->label( $model, 'slug' ); ?>\n\t\t\t<?= $form->textField( $model, 'slug', [ 'class' => 'form-control', ] ); ?>\n\t\t\t<?= $form->error( $model, 'slug', [ 'class' => 'text-danger' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<?php $this->endWidget(); ?>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9755999",
    "description": "Yii: Helper class for notification messages",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9755999/raw/ea5b41edf731012174ab6572d475a456331b661e/yii-notification-message.md"
    ],
    "content": "# Helper class for notification messages\n\n```php\n<?php\nclass Msg\n{\n\t/**\n\t * Add info message into queue.\n\t * @param string $message info message\n\t */\n\tpublic static function info( $message )\n\t{\n\t\tself::message( $message, 'info' );\n\t}\n\n\t/**\n\t * Add success message into queue.\n\t * @param string $message success message\n\t */\n\tpublic static function success( $message )\n\t{\n\t\tself::message( $message, 'success' );\n\t}\n\n\t/**\n\t * Add warning message into queue.\n\t * @param string $message warning message\n\t */\n\tpublic static function warning( $message )\n\t{\n\t\tself::message( $message, 'warning' );\n\t}\n\n\t/**\n\t * Add error message(s) into queue.\n\t * @param string|array $message error message(s). Can be simple string or $model->getErrors() array.\n\t */\n\tpublic static function error( $message )\n\t{\n\t\tif ( is_array( $message ) ) // array\n\t\t\tforeach ( $message as $msg ) // foreach element check...\n\t\t\t\tif ( is_array( $msg ) ) // if array, then [attribute=>[err1, err2, ...], ...]\n\t\t\t\t\tself::error( $msg ); // recurse for element\n\t\t\t\telse\n\t\t\t\t\tself::message( $msg, 'danger' ); // simple string\n\t\telse\n\t\t\tself::message( $message, 'danger' ); // simple string\n\t}\n\n\t/**\n\t * Add message into queue with specified type.<br>\n\t * NOTE: Internal use only.\n\t * @param string $message typed message text\n\t * @param string $type    type of the message. Available values: info, success, warning, error.\n\t */\n\tprivate static function message( $message, $type )\n\t{\n\t\t$_SESSION[ 'flash_messages' ][ ] = [ $message, $type ];\n\t}\n\n\t/**\n\t * Get array of messages. Format: [ [message, type], [message, type], ... ]\n\t * @return mixed array of messages.\n\t */\n\tpublic static function getMessages()\n\t{\n\t\treturn $_SESSION[ 'flash_messages' ];\n\t}\n\n\t/**\n\t * Shows floating notifications. Also removes already shown messages from queue.\n\t * To dismiss notification, just click to it.\n\t */\n\tpublic static function show()\n\t{\n\t\t// register JS\n\t\t$js_flash_messages = \"\n\t\t\tnextAnim($('.alert-fixed:not(:visible)'));\n\t\t\tfunction nextAnim(elems){\n\t\t\t\telems.eq(0).slideDown(function(){\n\t\t\t\t\tnextAnim(elems.slice(1));\n\t\t\t\t});\n\t\t\t}\n\t\t\t$('.alert-fixed').on('click', function(__event){\n\t\t\t\t$(this).slideUp();\n\t\t\t});\n\t\t\";\n\n\t\tYii::app()->clientScript->registerScript( 'flash_messages', $js_flash_messages, CClientScript::POS_READY );\n\n\t\t// register CSS\n\t\t$css_flash_messages = \"\n\t\t\t.alert-container {\n\t\t\t  position: fixed;\n\t\t\t  width: 300px;\n\t\t\t  top: 5px;\n\t\t\t  right: 5px;\n\t\t\t  z-index: 100;\n\t\t\t}\n\t\t\t.alert-container .alert-fixed {\n\t\t\t  margin: 3px;\n\t\t\t  float: right;\n\t\t\t  display: none;\n\t\t\t}\n\t\t\";\n\n\t\tYii::app()->clientScript->registerCss( 'flash_messages', $css_flash_messages );\n\n\t\t// show messages\n\t\tif ( isset( $_SESSION[ 'flash_messages' ] ) )\n\t\t{\n\t\t\t?>\n\t\t\t<div class=\"alert-container\">\n\t\t\t\t<?php\n\t\t\t\twhile ( $_SESSION[ 'flash_messages' ] )\n\t\t\t\t{\n\t\t\t\t\tlist( $txt, $type ) = array_shift( $_SESSION[ 'flash_messages' ] );\n\t\t\t\t\t?><span class=\"alert alert-fixed alert-<?= $type; ?>\"><?= CHtml::encode( $txt ); ?></span><?php\n\t\t\t\t}\n\t\t\t\t?>\n\t\t\t</div>\n\t\t<?php\n\t\t}\n\t}\n}\n```\n\nUsing in layouts\n\n```php\n<body>\n\n<?php\nMsg::info( 'Information text is here' );\nMsg::success( 'Success text is here' );\nMsg::warning( 'Warning text is here' );\nMsg::error( 'Error text is here' );\n?>\n\n<?php Msg::show(); ?>\n\n<div class=\"container\">\n<!-- ... -->\n</div>\n```\n\nUsing in controller\n\n```php\n<?php\nif ( $model->save() )\n{\n\tMsg::success( Yii::t( 'zr', 'Content has been duplicated.' ) );\n\t$this->redirect( [ 'update', 'id' => $model->id ] );\n}\nelse\n\tMsg::error( $model->getErrors() ); // batch assign errors\n```"
  },
  {
    "html_url": "https://gist.github.com/9755797",
    "description": "jQuery: animate elements one after another",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9755797/raw/efd657f2fec26301a34c1ac8142f63700798ebc0/animate-elements-one-after-another.md"
    ],
    "content": "# Animate elements one by one\nWe have these `div`s with `.a` class.\n```html\n<div class=\"a b\">d</div>    \n<div class=\"a c\">d</div>    \n<div class=\"a d\">d</div>    \n<div class=\"a e\">d</div>    \n<div class=\"a f\">d</div>    \n<div class=\"a g\">d</div>    \n<div class=\"a h\">d</div>    \n<div class=\"a i\">d</div>    \n<div class=\"a j\">d</div>    \n<div class=\"a k\">d</div>    \n<div class=\"a l\">d</div>    \n<div class=\"a m\">d</div>    \n```\nWe want animate them one after another.\n```js\n// start animation\nnextAnim($('.a'));\n\nfunction nextAnim(elems)\n{\n\t// if we have element, animate it\n\telems.eq(0).animate({'left': 50}, function()\n\t{\n\t\tnextAnim(elems.slice(1));  // slice off the first element\n\t});\n}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9614157",
    "description": "JavaScript: sort object properties by value (numeric or string)",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9614157/raw/e399dd1fad97a60f51bc3c3a485ed800d74bfb41/sort-object-properties-by-value.md"
    ],
    "content": "### Sort object properties by value (values are text)\nI have following object:\n```js\nvar cities={10:'Tashkent', 14:'Karakalpakiya', 16:'Andijan'};\n```\nI want sort it by city names, so after sort it should be:\n```js\nvar cities={16:'Andijan', 14:'Karakalpakiya', 10:'Tashkent'};\n```\nBut I can't sort object properties, instead can convert object into array, then sort items.\n```js\nfunction sortProperties(obj)\n{\n  // convert object into array\n\tvar sortable=[];\n\tfor(var key in obj)\n\t\tif(obj.hasOwnProperty(key))\n\t\t\tsortable.push([key, obj[key]]); // each item is an array in format [key, value]\n\t\n\t// sort items by value\n\tsortable.sort(function(a, b)\n\t{\n\t\tvar x=a[1].toLowerCase(),\n\t\t\ty=b[1].toLowerCase();\n\t\treturn x<y ? -1 : x>y ? 1 : 0;\n\t});\n\treturn sortable; // array in format [ [ key1, val1 ], [ key2, val2 ], ... ]\n}\n```\n\nExample:\n```js\nvar sortedCities=sortProperties(cities);\nconsole.log(sortedCities); // [[16, 'Andijan'], [14, 'Karakalpakiya'], [10, 'Tashkent']]\n```\n### Sort object properties by value (values are numbers)\nI have following object:\n```js\nvar cities={Tashkent:447, Karakalpakiya:900, Andijan:120};\n```\nI want sort it by city rating, so after sort it should be:\n```js\nvar cities={Andijan:120, Tashkent:447, Karakalpakiya:900};\n```\nBut again I can't sort object properties, instead can convert object into array, then sort items.\n```js\nfunction sortProperties(obj)\n{\n  // convert object into array\n\tvar sortable=[];\n\tfor(var key in obj)\n\t\tif(obj.hasOwnProperty(key))\n\t\t\tsortable.push([key, obj[key]]); // each item is an array in format [key, value]\n\t\n\t// sort items by value\n\tsortable.sort(function(a, b)\n\t{\n\t  return a[1]-b[1]; // compare numbers\n\t});\n\treturn sortable; // array in format [ [ key1, val1 ], [ key2, val2 ], ... ]\n}\n```\nExample:\n```js\nvar sortedCities=sortProperties(cities);\nconsole.log(sortedCities); // [[Andijan, 120], [Tashkent, 447], [Karakalpakiya, 900]]\n```\n###Improved version with additional parameter to set sort type (numeric or text)\n```js\n/**\n * Sort object properties (only own properties will be sorted).\n * @param {object} obj object to sort properties\n * @param {bool} isNumericSort true - sort object properties as numeric value, false - sort as string value.\n * @returns {Array} array of items in [[key,value],[key,value],...] format.\n */\nfunction sortProperties(obj, isNumericSort)\n{\n\tisNumericSort=isNumericSort || false; // by default text sort\n\tvar sortable=[];\n\tfor(var key in obj)\n\t\tif(obj.hasOwnProperty(key))\n\t\t\tsortable.push([key, obj[key]]);\n\tif(isNumericSort)\n\t\tsortable.sort(function(a, b)\n\t\t{\n\t\t\treturn a[1]-b[1];\n\t\t});\n\telse\n\t\tsortable.sort(function(a, b)\n\t\t{\n\t\t\tvar x=a[1].toLowerCase(),\n\t\t\t\ty=b[1].toLowerCase();\n\t\t\treturn x<y ? -1 : x>y ? 1 : 0;\n\t\t});\n\treturn sortable; // array in format [ [ key1, val1 ], [ key2, val2 ], ... ]\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/9597815",
    "description": "Yii: Custom extension/widget with custom action",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9597815/raw/dff29683862ee14dc70f5fc02c1eb8c87948fef5/extension-widget-with-custom-action.md"
    ],
    "content": "#Custom extension/widget with custom action\nCreate `myext` folder in `extensions` folder. Create `myext/EMyExt.php` and `myext/EMyExtAction.php` files. Create `myext.php` view and `myext.js` files in `myext/views/` folder.\n###`EMyExt.php` class implementation\n```php\n<?php\nclass EMyExt extends CWidget\n{\n  public $param1 = false;\n  public $param2 = false;\n  \n\tpublic function init()\n\t{\n\t  // initialization code...\n\t}\n\n\tpublic function run()\n\t{\n\t\t$this->render( 'myext.php' ); // render widgets view\n\t}\n}\n```\n###`myext.php` view\n```php\n<?php\n/* @var $this EMyExt */\n?>\n\n<!-- View implementation is here... -->\n\n<?php\n// publish resources\n$assetsDir = __DIR__ . DIRECTORY_SEPARATOR;\nYii::app()->clientScript->registerScriptFile( Yii::app()->assetManager->publish( $assetsDir . DIRECTORY_SEPARATOR . 'myext.js' ) );\n?>\n<script type=\"text/javascript\">\n\tjQuery(document).ready(function($)\n\t{\n\t\tvar myext=new MyExtJS({\n\t\t\tajaxUrl    : \"<?= $this->route; ?>\",\n\t\t\tmyInputId  : \"#<?= $this->myInputId; ?>\",\n\t\t});\n\t\tmyext._fill(myext.myInput);\n\t});\n</script>\n```\n###`EMyExtAction.php` implementation\n```php\n<?php\nclass EMyExtAction extends CAction\n{\n\tpublic $some_property;\n\t\n\tpublic function run()\n\t{\n\t\t// action login is here...\n\t\t// response to AJAX request in JSON format\n\t\tif ( Yii::app()->request->isAjaxRequest )\n\t\t{\n\t\t\techo CJSON::encode( [ 'mykey' => $this->some_property ] );\n\t\t\tYii::app()->end( 200, true );\n\t\t}\n\t}\n}\n```\n###`myext.js` implementation\n```js\nvar MyExtJS=function(options)\n{\n\tvar self=this;\n\tthis.myInput=$(this.options.myInputId);\n\tthis.myInput.on('change', function(__event)\n\t{\n\t\t__event.preventDefault();\n\t\t// some login is here...\n\t});\n}\n\nMyExtJS.prototype._fill=function(input)\n{\n\tvar self=this;\n\t$.ajax(this.options.ajaxUrl, {\n\t\ttype    : 'POST',\n\t\tdataType: 'json',\n\t\tdata    : {param1 : 123, param2 : 234},\n\t\tsuccess : function(resp)\n\t\t{\n\t\t\tif($.isPlainObject(resp))\n\t\t\t\t$.each(resp, function(value, title)\n\t\t\t\t{\n\t\t\t\t\t// some login with response\n\t\t\t\t});\n\t\t}\n\t});\n\treturn this;\n}\n```\n###Bind action into controller\n```php\nclass SiteController extends Controller\n{\n\tpublic function filters()\n\t{\n\t\treturn [ 'accessControl', ];\n\t}\n\t\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'myext' ],\n\t\t\t\t'users'   => [ '@' ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'deny',\n\t\t\t\t'users' => [ '*' ]\n\t\t\t],\n\t\t];\n\t}\n\n\tpublic function actions()\n\t{\n\t\treturn [\n\t\t\t'myext'   => [\n\t\t\t\t'class' => 'ext.myext.EMyExtAction',\n\t\t\t]\n\t\t];\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/9597513",
    "description": "Yii: Using CMaskedTextField",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9597513/raw/993576111ceb4ddf3afe50d0c5e00fe75bd40c1c/cmasked-text-field.md"
    ],
    "content": "#Using CMaskedTextField\n###Simple usage\nInput field for Taxpayer Identification Number\n```php\n<div class=\"form-group\">\n\t<div class=\"col-sm-4\">\n\t\t<?= $form->label( $model, 'tin' ); ?>\n\t\t<?php\n\t\t$this->widget( 'CMaskedTextField', [\n\t\t\t'model'       => $model,\n\t\t\t'attribute'   => 'tin', // numbers with 9 length\n\t\t\t'mask'        => '999999999',\n\t\t\t'htmlOptions' => [ 'class' => 'form-control' ]\n\t\t] ); ?>\n\t</div>\n</div>\n```\n###Custom characters map\nFor passport series and numbers in `SS NNNNNNN` format\n```php\n<div class=\"form-group\">\n\t<div class=\"col-sm-4\">\n\t\t<?= $form->label( $model, 'passport' ); ?>\n\t\t<?php\n\t\t$this->widget( 'CMaskedTextField', [\n\t\t\t'model'       => $model,\n\t\t\t'attribute'   => 'passport',\n\t\t\t'mask'        => 'AA nnnnnnn',\n\t\t\t'charMap'     => [ 'A' => '[A-Z]', 'n' => '[0-9]', ],\n\t\t\t'htmlOptions' => [ 'class' => 'form-control' ]\n\t\t] ); ?>\n\t</div>\n</div>\n```\nFor cell phone number with predefined prefix (country code)\n```php\n<div class=\"col-sm-4\">\n\t<?= $form->label( $model, 'cell_phone' ); ?>\n\t<?php\n\t$this->widget( 'CMaskedTextField', [\n\t\t'model'       => $model,\n\t\t'attribute'   => 'cell_phone',\n\t\t'mask'        => '+998 nn nnn-nn-nn',\n\t\t'charMap'     => [ 'n' => '[0-9]', ],\n\t\t'htmlOptions' => [ 'class' => 'form-control' ],\n\t] );\n\t?>\n</div>\n```\n\n###Modify data before save\nIt is safe to remove helper characters, because they are applied/restored in view when data is read from the model attribute. In model we can remove unnecessary characters from the attribute before saving it.\n```php\n<?php\nprotected function beforeSave()\n{\n\tif ( $this->scenario == 'profile' )\n\t\t$this->cell_phone = str_replace( [ ' ', '-' ], '', $this->cell_phone ); // remove whitespaces and dash\n\treturn parent::beforeSave();\n}\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9542049",
    "description": "Yii: Determine which button was clicked",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9542049/raw/70cab9680832127fc7160b2a31387e0ba914631f/which-button-clicked.md"
    ],
    "content": "# Determine which button was clicked\nTo determine which button was clicked simple give buttons name.\nFor example:\n```php\n<div class=\"col-sm-9\">\n\t<?php\n\t$form = $this->beginWidget( 'CActiveForm', [\n\t\t'id'                   => 'user-profile',\n\t\t'enableAjaxValidation' => true,\n\t\t'htmlOptions'          => [\n\t\t\t'class' => 'form-horizontal',\n\t\t\t'role'  => 'form',\n\t\t],\n\t] );\n\t?>\n\n\t<?php if ( Yii::app()->user->hasFlash( 'success' ) ): ?>\n\t\t<div class=\"alert alert-success\">\n\t\t\t<?= Yii::app()->user->getFlash( 'success' ); ?>\n\t\t</div>\n\t<?php endif; ?>\n\n\t<?= $form->errorSummary( $model, null, null, [ 'class' => 'alert alert-danger' ] ); ?>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-6\">\n\t\t\t<?= $form->label( $model, 'email' ); ?>\n\t\t\t<?= $form->emailField( $model, 'email', [ 'class' => 'form-control' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-6\">\n\t\t\t<?= $form->label( $model, 'address' ); ?>\n\t\t\t<?= $form->textField( $model, 'address', [ 'class' => 'form-control' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-12 text-right\">\n\t\t\t<?= CHtml::submitButton( 'Save', [ 'class' => 'btn btn-primary', 'name'=>'btnProfile' ] ); ?>\n\t\t\t<?= CHtml::submitButton( 'Delete', [ 'class' => 'btn btn-primary', 'name'=>'btnDelete' ] ); ?>\n\t\t</div>\n\t</div>\n\t\n\t<?php $this->endWidget(); ?>\n\t\n</div>\n```\n\nThen in action just check that names:\n```php\n<?php\n\tpublic function actionProfile()\n\t{\n\t\t$user = User::model()->findByPk( Yii::app()->user->id );\n\t\t// if it is ajax validation request\n\t\tif ( isset( $_POST[ 'ajax' ] ) && $_POST[ 'ajax' ] === 'user-profile' )\n\t\t{\n\t\t\techo CActiveForm::validate( $user );\n\t\t\tYii::app()->end();\n\t\t}\n\n\t\tif ( isset( $_POST[ 'User' ] ) )\n\t\t{\n\t\t\t$user->attributes = $_POST[ 'User' ];\n\n\t\t\tif ( isset( $_POST[ 'btnProfile' ] ) ) // is btnProfile clicked?\n\t\t\t{\n\t\t\t\t$user->scenario = 'profile';\n\t\t\t\t$attr           = [ 'email', 'address' ];\n\t\t\t\tif ( $user->save( true, $attr ) )\n\t\t\t\t{\n\t\t\t\t\tYii::app()->user->setFlash( 'success', 'Profile updated!' );\n\t\t\t\t\t$this->refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t\telseif ( isset( $_POST[ 'btnDelete' ] ) ) // is btnDelete clicked\n\t\t\t{\n\t\t\t\t$user->delete();\n\t\t\t\tYii::app()->user->setFlash( 'success', 'User deleted!' );\n\t\t\t\t$this->redirect( Yii::app()->user->returnUrl );\n\t\t\t}\n\t\t}\n\n\t\t$this->render( 'profile', [ 'model' => $user, ] );\n\t}\n```"
  },
  {
    "html_url": "https://gist.github.com/9525300",
    "description": "Yii: Using ServerFileInput widget of ElFinder extension with Bootstrap to upload & choose image.",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9525300/raw/cd813b4d4629faa0e839b96404f674e94363adf6/elfinder.serverfileinput.md"
    ],
    "content": "## Using `ServerFileInput` widget of the `ElFinder` extension with `Bootstrap` to upload & select image\n\nDownload [ElFinder](http://www.yiiframework.com/extension/elfinder/) extension.\nExtract it into `ext.elfinder`.\n\n### Prepare `ServerFileInput` for `Twitter Bootstrap`\n\nAdd `twbsControls` public property into `ServerFileInput` class.\n```php\n<?php\nclass ServerFileInput extends CInputWidget\n{\n  // ...\n  public $twbsControls = false; // true - use twitter bootstrap controls\n  // ...\n}\n```\n\nChange `run` method as follow:\n```php\n<?php\nclass ServerFileInput extends CInputWidget\n{\n  // ...\n\tpublic function run()\n\t{\n\t\tlist( $name, $id ) = $this->resolveNameID();\n\t\tif ( isset( $this->htmlOptions[ 'id' ] ) )\n\t\t\t$id = $this->htmlOptions[ 'id' ];\n\t\telse\n\t\t\t$this->htmlOptions[ 'id' ] = $id;\n\t\tif ( isset( $this->htmlOptions[ 'name' ] ) )\n\t\t\t$name = $this->htmlOptions[ 'name' ];\n\t\telse\n\t\t\t$this->htmlOptions[ 'name' ] = $name;\n\n\t\t$contHtmlOptions         = $this->htmlOptions;\n\t\t$contHtmlOptions[ 'id' ] = $id . 'container';\n\n\t\techo CHtml::openTag( 'div', $contHtmlOptions );\n\n\t\tif ( !$this->twbsControls )\n\t\t{\n\t\t\t// input:\n\t\t\t$inputOptions = array( 'id' => $id, 'style' => 'float:left;' );\n\t\t\tif ( $this->hasModel() )\n\t\t\t\techo CHtml::activeTextField( $this->model, $this->attribute, $inputOptions );\n\t\t\telse\n\t\t\t\techo CHtml::textField( $name, $this->value, $inputOptions );\n\n\t\t\t// button:\n\t\t\techo CHtml::button( 'Browse', array( 'id' => $id . 'browse', 'class' => 'btn' ) );\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$inputOptions = [ 'id' => $id, 'class' => 'form-control', 'readonly' => 'readonly' ];\n\t\t\techo CHtml::openTag( 'div', [ 'class' => 'input-group' ] );\n\t\t\tif ( $this->hasModel() )\n\t\t\t\techo CHtml::activeTextField( $this->model, $this->attribute, $inputOptions );\n\t\t\telse\n\t\t\t\techo CHtml::textField( $name, $this->value, $inputOptions );\n\t\t\techo CHtml::openTag( 'span', [ 'class' => 'input-group-btn' ] );\n\t\t\techo CHtml::button( 'Browse', [ 'id' => $id . 'browse', 'class' => 'btn btn-default', 'type' => 'button' ] );\n\t\t\techo CHtml::closeTag( 'span' );\n\t\t\techo CHtml::closeTag( 'div' );\n\t\t}\n\n\t\techo CHtml::closeTag( 'div' );\n\n\t\t$settings = array_merge( array(\n\t\t\t\t'places'          => \"\",\n\t\t\t\t'rememberLastDir' => false, ),\n\t\t\t$this->settings\n\t\t);\n\n\t\t$settings[ 'dialog' ]                = array(\n\t\t\t'zIndex' => 400001,\n\t\t\t'width'  => 900,\n\t\t\t'modal'  => true,\n\t\t\t'title'  => \"Files\",\n\t\t);\n\t\t$settings[ 'editorCallback' ]        = 'js:function(url) {\n        $(\\'#\\'+aFieldId).attr(\\'value\\',url);\n        }';\n\t\t$settings[ 'closeOnEditorCallback' ] = true;\n\t\t$connectorUrl                        = CJavaScript::encode( $this->settings[ 'url' ] );\n\t\t$settings                            = CJavaScript::encode( $settings );\n\t\t$script                              = <<<EOD\n        window.elfinderBrowse = function(field_id, connector) {\n            var aFieldId = field_id, aWin = this;\n            if($(\"#elFinderBrowser\").length == 0) {\n                $(\"body\").append($(\"<div/>\").attr(\"id\", \"elFinderBrowser\"));\n                var settings = $settings;\n                settings[\"url\"] = connector;\n                $(\"#elFinderBrowser\").elfinder(settings);\n            }\n            else {\n                $(\"#elFinderBrowser\").elfinder(\"open\", connector);\n            }\n        }\nEOD;\n\t\t$cs                                  = Yii::app()->getClientScript();\n\t\t$cs->registerScript( 'ServerFileInput#global', $script );\n\n\t\t$js = //'$(\"#'.$id.'\").focus(function(){window.elfinderBrowse(\"'.$name.'\")});'.\n\t\t\t'$(\"#' . $id . 'browse\").click(function(){window.elfinderBrowse(\"' . $id . '\", ' . $connectorUrl . ')});';\n\n\t\t$cs->registerScript( 'ServerFileInput#' . $id, $js );\n\t}\n  // ...\n}\n```\n\nAdd custom parameters into configuration:\n```php\n<?php\nreturn [\n\t'params'     => [\n\t\t// ...\n\t\t'adminEmail'        => 'admin@garovreestri.uz',\n\t\t'uploadsFolder'     => '/uploads/', // common uploads folder\n\t\t'userUploadsFolder' => '/uploads/users/', // private uploads folder for each user\n\t\t'defaultAvatar'     => 'default_avatar.png', // default avatar\n\t],\n];\n```\n\nAdd action into controller to handle uploads:\n```php\n<?php\nclass SiteController extends Controller\n{\n\n\tpublic function filters()\n\t{\n\t\treturn [ 'accessControl', ];\n\t}\n\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t\t// ...\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'profile', 'elFinderConnector' ],\n\t\t\t\t'users'   => [ '@' ],\n\t\t\t],\n\t\t\t// ...\n\t\t\t[\n\t\t\t\t'deny',\n\t\t\t\t'users' => [ '*' ]\n\t\t\t],\n\t\t];\n\t}\n\n\tpublic function actionElFinderConnector()\n\t{\n\t\t// each user has own path named with ID, e.g.: /uploads/users/190/ for user with ID 190\n\t\t$userPath = Yii::app()->params[ 'userUploadsFolder' ] . Yii::app()->user->id . '/';\n\t\t$userRoot = Yii::getPathOfAlias( 'webroot' ) . $userPath; // full path to the user's folder\n\n\t\t// if directory doesn't exist, create them\n\t\tif ( !file_exists( $userRoot ) )\n\t\t\tmkdir( $userRoot, 0777, true );\n\n\t\t// initialize ElFinder\n\t\t$connector                            = new ElFinderConnectorAction( $this, $this->action->id );\n\t\t$connector->settings[ 'root' ]        = $userRoot;\n\t\t$connector->settings[ 'URL' ]         = Yii::app()->baseUrl . $userPath;\n\t\t$connector->settings[ 'rootAlias' ]   = 'Home';\n\t\t$connector->settings[ 'uploadAllow' ] = [ 'image/jpeg', 'image/gif', 'image/png' ]; // allowed mime-types\n\t\t$connector->settings[ 'uploadDeny' ]  = [ 'all' ]; // deny all other mime-types\n\t\t$connector->run();\n\t}\n\n\tpublic function actionProfile()\n\t{\n\t\t$this->layout   = '//layouts/wide';\n\t\t$user           = User::model()->findByPk( Yii::app()->user->id );\n\t\t$user->scenario = 'profile';\n\n\t\tif ( !$user->pic ) // $user->pic  - URL to avatar\n\t\t{\n\t\t\t$uplDir        = Yii::getPathOfAlias( 'webroot' ) . Yii::app()->params[ 'userUploadsFolder' ];\n\t\t\t$defAvatarPath = $uplDir . Yii::app()->params[ 'defaultAvatar' ];\n\t\t\t$userPath      = $uplDir . Yii::app()->user->id . '/' . Yii::app()->params[ 'defaultAvatar' ];\n\t\t\t\n\t\t\t// copy default avatar into user's private uploads folder\n\t\t\tif ( copy( $defAvatarPath, $userPath ) )\n\t\t\t\t$user->pic = Yii::app()->baseUrl . Yii::app()->params[ 'userUploadsFolder' ]\n\t\t\t\t\t. Yii::app()->user->id . '/' . Yii::app()->params[ 'defaultAvatar' ];\n\t\t}\n\n\t\t// if it is ajax validation request\n\t\tif ( isset( $_POST[ 'ajax' ] ) && $_POST[ 'ajax' ] === 'user-profile' )\n\t\t{\n\t\t\techo CActiveForm::validate( $user );\n\t\t\tYii::app()->end();\n\t\t}\n\n\t\tif ( isset( $_POST[ 'User' ] ) )\n\t\t{\n\t\t\t$user->attributes = $_POST[ 'User' ];\n\t\t\t$attr             = [ 'email', 'pic' ]; // attributes to save\n\t\t\tif ( $user->save( true, $attr ) )\n\t\t\t\tYii::app()->user->setFlash( 'success', 'Profile Updated!' );\n\t\t}\n\n\t\t$this->render( 'profile', [ 'model' => $user, ] );\n\t}\n\t// ...\n}\n```\n\nOur `profile.php` view looks like this:\n```php\n<?php\n/* @var $this SiteController */\n/* @var $model User */\n/* @var $form CActiveForm */\n\n$this->pageTitle = 'User Profile';\n?>\n<div class=\"col-sm-3\">\n\t<div class=\"col-sm-10 col-sm-offset-1\">\n\t\t<img src=\"<?= $model->pic; ?>\" alt=\"\" class=\"thumbnail\"/> \n\t</div>\n\t<div class=\"col-sm-10 col-sm-offset-1\">\n\t\t<table class=\"table table-condensed table-striped\">\n\t\t\t<tr>\n\t\t\t\t<td>User Name</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><em><?= $model->username; ?></em></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Registered At</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><em><?= Yii::app()->format->formatDatetime( $model->created_at ); ?></em></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>Updated At</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><em><?= Yii::app()->format->formatDatetime( $model->updated_at ); ?></em></td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>\n\n<div class=\"col-sm-9\">\n\t<?php\n\t$form = $this->beginWidget( 'CActiveForm', [\n\t\t'id'                   => 'user-profile',\n\t\t'enableAjaxValidation' => true,\n\t\t'htmlOptions'          => [\n\t\t\t'class' => 'form-horizontal',\n\t\t\t'role'  => 'form',\n\t\t],\n\t] );\n\t?>\n\n\t<?php if ( Yii::app()->user->hasFlash( 'success' ) ): ?>\n\t\t<div class=\"alert alert-success\">\n\t\t\t<?= Yii::app()->user->getFlash( 'success' ); ?>\n\t\t</div>\n\t<?php endif; ?>\n\n\t<?= $form->errorSummary( $model, null, null, [ 'class' => 'alert alert-danger' ] ); ?>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-6\">\n\t\t\t<?= $form->label( $model, 'email' ); ?>\n\t\t\t<?= $form->emailField( $model, 'email', [ 'class' => 'form-control' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-12\">\n\t\t\t<?= $form->label( $model, 'pic' ); ?> <span class=\"text-muted\">(166 x 190)</span>\n\t\t\t<?php\n\t\t\t$this->widget( 'ext.elfinder.ServerFileInput', [\n\t\t\t\t'model'          => $model,\n\t\t\t\t'attribute'      => 'pic',\n\t\t\t\t'connectorRoute' => 'site/elFinderConnector', // bind our file/image upload handler\n\t\t\t\t'twbsControls'   => true, // enable twitter bootstrap style\n\t\t\t] );\n\t\t\t?>\n\t\t\t<?= $form->error( $model, 'pic', [ 'class' => 'text-danger' ] ); ?>\n\t\t</div>\n\t</div>\n\n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-12 text-right\">\n\t\t\t<?= CHtml::submitButton( 'Save', [ 'class' => 'btn btn-primary' ] ); ?>\n\t\t</div>\n\t</div>\n\t\n\t<?php $this->endWidget(); ?>\n\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/9483258",
    "description": "Yii: PhpStorm configurations for Yii framework",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9483258/raw/400d521a292b5d307b8de96c6674d3835e4ea4ac/yii-autocomplete-phpstorm.md"
    ],
    "content": "# Additional configurations for PhpStorm to develop with Yii framework\n\n### Autocomplete Yii::app() components\nOpen `framework/yii.php` file, override app() static method as follow:\n```php\n<?php\nclass Yii extends YiiBase\n{\n\t/**\n\t * @static\n\t * @return CWebApplication\n\t */\n\tpublic static function app()\n\t{\n\t\treturn parent::app();\n\t}\n\t\n\t// ...\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/9462265",
    "description": "Yii: custom button in CGridView with AJAX functionality",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9462265/raw/8f778744158895d8ab9ecd2c13c4e342d9e9961e/yii-cgridview-custom-button-ajax.md"
    ],
    "content": "#Approve/Unapprove comments\n\nCreate `approve` action in our controller:\n```php\n<?php\nclass CommentsController extends Controller\n{\n\t// ...\n\tpublic function actionApprove( $id, $oper = NewsComments::STATUS_APPROVED )\n\t{\n\t\t$model = NewsComments::model()->findByPk( $id );\n\t\tif ( $model )\n\t\t{\n\t\t\t$model->scenario = 'approve';\n\t\t\t$model->status   = $oper; // 0-not published, 1-approved/published\n\t\t\tif ( $model->save() )\n\t\t\t\techo CJSON::encode( [ 'code' => 200 ] );\n\t\t\telse\n\t\t\t\techo CJSON::encode( $model->getErrors() );\n\t\t}\n\t}\n\t// ...\n}\n```\n\nAllow `approve` action in `accessRules`\n```php\n<?php\nclass CommentsController extends Controller\n{\n    // ...\n\tpublic function filters()\n\t{\n\t\treturn array(\n\t\t\t'accessControl', // perform access control for CRUD operations\n\t\t\t'postOnly + delete, approve', // we only allow approving via POST request\n\t\t);\n\t}\n\t\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'admin', 'view', 'delete', 'approve' ],\n\t\t\t\t'roles'   => [ 'siteModerator', ],\n\t\t\t],\n\t\t\t[ 'deny', // deny all users\n\t\t\t\t'users' => [ '*' ],\n\t\t\t],\n\t\t];\n\t}\n    // ...\n}\n```\n\nPut `CGrigView` widget into view:\n```php\n<?php\n$this->widget( 'zii.widgets.grid.CGridView', [\n\t'id'            => 'news-comments-grid',\n\t'itemsCssClass' => 'table table-striped table-hover table-condensed',\n\t'dataProvider'  => $model->search(),\n\t'filter'        => null,\n\t'template'      => '{items}{pager}',\n\t'columns'       => [\n\t\t'id',\n\t\t'news_id',\n\t\t'author_id',\n\t\t'author',\n\t\t'text',\n\t\t'status',\n\t\t[\n\t\t\t'class'                => 'CButtonColumn',\n\t\t\t'template'             => '{approve}{unapprove}<br>{view}{delete}', // buttons here...\n\t\t\t'viewButtonLabel'      => '<span class=\"glyphicon glyphicon-search\"></span>&nbsp;', // custom icon\n\t\t\t'viewButtonOptions'    => [ 'title' => 'Details', ], // change hint/tooltip text\n\t\t\t'viewButtonImageUrl'   => false, // disable default image\n\t\t\t'deleteButtonLabel'    => '<span class=\"glyphicon glyphicon-remove\"></span>&nbsp;',\n\t\t\t'deleteButtonOptions'  => [ 'title' => 'Remove', ],\n\t\t\t'deleteButtonImageUrl' => false,\n\t\t\t'deleteConfirmation'   => 'Remove comment?', // confirmation message for delete\n\t\t\t'buttons'              => [ // custom buttons options here...\n\t\t\t\t'approve'   => [\n\t\t\t\t\t'label'   => '<span class=\"glyphicon glyphicon-ok-sign\"></span>&nbsp;',\n\t\t\t\t\t'url'     => '[ \"approve\", \"id\" => $data->id, ]', // ?r=controller/approve/id/123\n\t\t\t\t\t'options' => [\n\t\t\t\t\t\t'title'        => 'Approve',\n\t\t\t\t\t\t'data-confirm' => 'Approve comment?', // custom attribute to hold confirmation message\n\t\t\t\t\t],\n\t\t\t\t\t'click'   => $approveJs, // JS string which processes AJAX request\n\t\t\t\t],\n\t\t\t\t'unapprove' => [\n\t\t\t\t\t'label'   => '<span class=\"glyphicon glyphicon-minus-sign\"></span>&nbsp;',\n\t\t\t\t\t'url'     => '[ \"approve\", \"id\" => $data->id, \"oper\" => 0 ]', // ?r=controller/approve/id/123/oper/0\n\t\t\t\t\t'options' => [\n\t\t\t\t\t\t'title'        => 'Un-Approve',\n\t\t\t\t\t\t'data-confirm' => 'Un-approve comment?', // custom attribute to hold confirmation message\n\t\t\t\t\t],\n\t\t\t\t\t'click'   => $approveJs, // JS string which processes AJAX request\n\t\t\t\t],\n\t\t\t],\n\t\t],\n\t],\n] ); ?>\n\n```\n\nInitialize `$approveJs` variable before `CGridView` widget:\n\n```php\n<?php\n$approveJs = 'js:function(__event)\n{\n\t__event.preventDefault(); // disable default action\n\n\tvar $this = $(this), // link/button\n\t\tconfirm_message = $this.data(\"confirm\"), // read confirmation message from custom attribute\n\t\turl = $this.attr(\"href\"); // read AJAX URL with parameters from HREF attribute on the link\n\n\tif(confirm(confirm_message)) // if user confirmed operation, then...\n\t{\n\t\t// perform AJAX request\n\t\t$(\"#news-comments-grid\").yiiGridView(\"update\",\n\t\t{\n\t\t\ttype\t: \"POST\", // importatnt! we only allow POST in filters()\n\t\t\tdataType: \"json\",\n\t\t\turl\t\t: url,\n\t\t\tsuccess\t: function(data)\n\t\t\t{\n\t\t\t\tconsole.log(\"Success:\", data);\n\t\t\t\t$(\"#news-comments-grid\").yiiGridView(\"update\"); // refresh gridview via AJAX\n\t\t\t},\n\t\t\terror\t: function(xhr)\n\t\t\t{\n\t\t\t\tconsole.log(\"Error:\", xhr);\n\t\t\t}\n\t\t});\n\t}\n}';\n\n```"
  },
  {
    "html_url": "https://gist.github.com/9460276",
    "description": "Yii: Set custom text for label",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9460276/raw/c5dfe853fac869a81b2bd5672b5241049426fdf0/yii-label-custom-text.md"
    ],
    "content": "#Set custom text for `label`\n\n`htmlOptions` of such `CHtml::activeLabel` and `CActiveForm::label` methods have `label` special option. It specifies the label to be displayed instead of `CModel::getAttributeLabel` value.\n\n```php\n<div class=\"form-group\">\n\t<div class=\"col-sm-6\">\n\t\t<?= $form->label( $model, 'source_title', [ 'label' => Yii::t( 'myApp', 'Resource title' ) ] ); ?>\n\t\t<?= $form->textField( $model, 'source_title', [ 'class' => 'form-control', ] ); ?>\n\t\t<?= $form->error( $model, 'source_title', [ 'class' => 'text-danger' ] ); ?>\n\t</div>\n</div>\n```"
  },
  {
    "html_url": "https://gist.github.com/9459926",
    "description": "Using ajaxButton to process AJAX requests",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9459926/raw/08e620b16c941b8fc935fbabdc0ca2810ce76d5e/chtml-ajaxbutton-example.md"
    ],
    "content": "#Using `CHtml::ajaxButton` to process ajax request\n\nFirst, check if a current user has `siteModerator` role, if so, then show ajax button in view.\nWhen request success, we check response code, if it is `200` - OK, then remove `Wait moderation` label and `Publish comment` button.\n\n```php\n<?php\necho '<span class=\"label label-warning comment-status-' . $comment->id; . '\"' . Yii::t( 'myApp', 'Wait moderation' ); . '</span>';\nif ( Yii::app()->authManager->checkAccess( 'siteModerator', Yii::app()->user->id ) )\n{\n    echo CHtml::ajaxButton(\n        Yii::t( 'myApp', 'Publish comment' ),\n        [ 'approveComment', 'comment_id' => $comment->id ], // URL: ?r=myCtrl/approveComment&comment_id=123\n        [\n            'dataType' => 'json',\n            'success'  => 'js:function(response)\n                {\n                    console.log(\"Approve comment response:\", response);\n                    if(response && response.code==200)\n                    {\n                        $(\".comment-status-' . $comment->id . '\").remove();\n                        $(\".approve-link-' . $comment->id . '\").remove();\n                    }\n                }',\n        ],\n        [ 'class' => 'btn btn-info btn-xs approve-link-' . $comment->id ]\n    );\n}\n```\n\nCreate `approveComment` action in `MyCtrlController`:\n\n```php\n<?php\nclass MyCtrlController extends Controller {\n\t// ...\n\tpublic function actionApproveComment( $comment_id )\n\t{\n\t\tif ( Yii::app()->request->isAjaxRequest )\n\t\t{\n\t\t    // get model by ID\n\t\t\t$comment = NewsComments::model()->findByPk( $comment_id );\n\t\t\tif ( $comment ) // if found...\n\t\t\t{\n\t\t\t\t$comment->scenario = 'approve'; // set scenario\n\t\t\t\t$comment->status   = 1; // approve\n\t\t\t\tif ( $comment->save() ) // save\n\t\t\t\t\techo CJSON::encode( [ 'code' => '200', ] ); // OK status\n\t\t\t\telse\n\t\t\t\t\techo CJSON::encode( $comment->getErrors() ); // errors\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nAllow execution of action `approveComment`:\n```php\n<?php\nclass MyCtrlController extends Controller{\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t    // ...\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'approveComment', ],\n\t\t\t\t'roles'   => [ 'siteModerator', ],\n\t\t\t],\n\t\t\t// ...\n\t\t\t[\n\t\t\t\t'deny',\n\t\t\t\t'users' => [ '*' ]\n\t\t\t],\n\t\t];\n\t}\n}\n```\n\nAlso set scenario, this is useful when for example you don't want to validate all fields (e.g. captcha verifyCode field).\n```php\n<?php\nclass NewsComments extends CActiveRecord{\n\t// ...\n\tpublic function rules()\n\t{\n\t\treturn array(\n\t\t\t[ 'news_id, author, text', 'required' ],\n\t\t\t[ 'news_id, status', 'numerical', 'integerOnly' => true ],\n\t\t\t[ 'author', 'length', 'max' => 50 ],\n\t\t\t[ 'verifyCode', 'captcha', 'allowEmpty' => !CCaptcha::checkRequirements(), 'except' => 'approve' ], // do not validate this attribute on approve scenario\n\t\t\t[ 'id, news_id, author, text, status, created_at, updated_at', 'safe', 'on' => 'search' ],\n\t\t);\n\t}\n}\n```"
  },
  {
    "html_url": "https://gist.github.com/9426217",
    "description": "Yii tips",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9426217/raw/53c3b2c95b4dd86334b3cc7bb6253a7fd2d10df4/Yii-tips.md"
    ],
    "content": "#Yii Tutorials/Gists\n\n- [Set aliases in configuration file](https://gist.github.com/umidjons/2bf96c14fb5e8bf55733)\n- [Up and Down icons for sorted columns in CGridView with Twitter Bootstrap](https://gist.github.com/umidjons/5cfde5d260835e2c6d2f)\n- [Inherit controller actions](https://gist.github.com/umidjons/11208197)\n- [QueryBuilder example](https://gist.github.com/umidjons/11140374)\n- [Get a file MIME type](https://gist.github.com/umidjons/10861091)\n- [Using number formatter](https://gist.github.com/umidjons/10824124)\n- [Helper class to work with parameters without DB](https://gist.github.com/umidjons/10803531)\n- [Using more than one ServerFileInput widgets on a page](https://gist.github.com/umidjons/10462499)\n- [Multilingual application name](https://gist.github.com/umidjons/10102626)\n- [Using transactions with ActiveRecord](https://gist.github.com/umidjons/9969749)\n- [Using more checkboxlists with the same model](https://gist.github.com/umidjons/9912003)\n- [Using clips in widgets](https://gist.github.com/umidjons/9911915)\n- [Add additional data- attributes to each row in CGridView (using rowHtmlOptionsExpression)](https://gist.github.com/umidjons/9889371)\n- [Access translated messages from javascript](https://gist.github.com/umidjons/9888711)\n- [Work with common parameters](https://gist.github.com/umidjons/9829421)\n- [Configuring number and date time formats](https://gist.github.com/umidjons/9802253)\n- [Sort associative array by value preserving keys](https://gist.github.com/umidjons/9800039)\n- [Helper class to publish assets (Twitter Bootstrap)](https://gist.github.com/umidjons/9757055)\n- [Convert title to slug](https://gist.github.com/umidjons/9757010)\n- [Helper class for notification messages](https://gist.github.com/umidjons/9755999)\n- [Authenticate user from DB in Yii](https://gist.github.com/umidjons/9425772)\n- [Using CHtml::ajaxButton to process ajax request](https://gist.github.com/umidjons/9459926)\n- [Using CHtml::ajaxSubmitButton in active form](https://gist.github.com/umidjons/9884932)\n- [Custom text for form label](https://gist.github.com/umidjons/9460276)\n- [Custom button in CGridView with AJAX functionality](https://gist.github.com/umidjons/9462265)\n- [Additional configurations for PhpStorm to develop in Yii](https://gist.github.com/umidjons/9483258)\n- [ServerFileInput widget of ElFinder extension to upload & select image file](https://gist.github.com/umidjons/9525300)\n- [Link with confirmation dialog](https://gist.github.com/umidjons/9406329)\n- [Using drop-downs](https://gist.github.com/umidjons/9406148)\n- [Using EJuiDateTimePicker extension to select date & time](https://gist.github.com/umidjons/9406042)\n- [Determine which button was clicked](https://gist.github.com/umidjons/9542049)\n- [Using CMaskedTextField](https://gist.github.com/umidjons/9597513)\n- [My favorite extensions](https://gist.github.com/umidjons/9406440)\n"
  },
  {
    "html_url": "https://gist.github.com/9425772",
    "description": "Yii: Authenticate user from DB",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9425772/raw/4559d99de898472bc811a53bdc4305bdc1959f6c/authenticate-user-from-db.md"
    ],
    "content": "Authenticate user from DB in Yii\n================================\n\n### Create `user` table\n\n```sql\nCREATE TABLE user (\n    id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(128) NOT NULL,\n    password VARCHAR(128) NOT NULL,\n    email VARCHAR(128) NOT NULL\n);\n```\n\n### User model\nGenerate `User` model with Gii tool.\nAdd `validatePassword` and `hashPassword` methods into User model\n\n```php\n<?php\nclass User extends CActiveRecord\n{\n  // ...\n\tpublic function validatePassword( $password )\n\t{\n\t\treturn CPasswordHelper::verifyPassword( $password, $this->password );\n\t}\n\n\tpublic function hashPassword( $password )\n\t{\n\t\treturn CPasswordHelper::hashPassword( $password );\n\t}\n}\n```\n\n\n### Change UserIdentity class\n\n```php\n<?php\nclass UserIdentity extends CUserIdentity\n{\n\tprivate $_id;\n\tpublic function authenticate()\n\t{\n\t\t$user = User::model()->find( 'username=:username', [ ':username' => $this->username ] );\n\t\tif ( null === $user )\n\t\t\t$this->errorCode = self::ERROR_USERNAME_INVALID;\n\t\telseif ( !$user->validatePassword( $this->password ) )\n\t\t\t$this->errorCode = self::ERROR_PASSWORD_INVALID;\n\t\telse\n\t\t{\n\t\t\t$this->_id       = $user->id;\n\t\t\t$this->username  = $user->username;\n\t\t\t$this->errorCode = self::ERROR_NONE;\n\t\t}\n\t\treturn $this->errorCode == self::ERROR_NONE;\n\t}\n\tpublic function getId()\n\t{\n\t\treturn $this->_id;\n\t}\n}\n```\n\n### Show errors\n\nAdd error summary to login form in `protected/views/site/login.php` to show errors\n\n```php\n\t<?= $form->errorSummary( $model ); ?>\n```\n\n### Controller changes\nConfigure `accessControl` filter & `accessRules`.\n\n```php\n<?php\nclass SiteController extends Controller\n{\n\tpublic function filters()\n\t{\n\t\treturn [ 'accessControl', ];\n\t}\n\n\tpublic function accessRules()\n\t{\n\t\treturn [\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'login', 'index', 'public1', 'public2', ],\n\t\t\t\t'users'   => [ '*' ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'allow',\n\t\t\t\t'actions' => [ 'secure1', 'secure2', ],\n\t\t\t\t'users'   => [ '@' ],\n\t\t\t],\n\t\t\t[\n\t\t\t\t'deny',\n\t\t\t\t'users' => [ '*' ],\n\t\t\t]\n\t\t];\n\t}\n\t\n\t// ...\n}\n```\n\n### Action to add new users\n\nAdd following method to controller, then call it like so:\n`http://mysite.com/index.php?r=site/addUser&username=admin&password=a123&email=admin@mysite.com`\n\n```php\n<?php\nclass SiteController extends Controller\n{\n  // ...\n\tpublic function actionAddUser( $username, $password, $email )\n\t{\n\t\t$user           = new User;\n\t\t$user->username = $username;\n\t\t$user->password = $user->hashPassword( $password );\n\t\t$user->email    = $email;\n\t\tif ( $user->save() )\n\t\t\techo \"User $username added!\";\n\t\telse\n\t\t\techo '<pre>' . print_r( $user->getErrors(), true ) . '</pre>';\n\t}\n}\n```\n\nAlso change `accessRules` method for using `addUser` action:\n```php\n<?php\n    public function accessRules()\n    {\n        return [\n            [\n                'allow',\n                'actions' => [ 'login', 'index', 'public1', 'public2', ],\n                'users'   => [ '*' ],\n            ],\n            [\n                'allow',\n                'actions' => [ 'secure1', 'secure2', ],\n                'users'   => [ '@' ],\n            ],\n            [\n                'allow',\n                'actions' => [ 'addUser', ],\n                'users'   => [ 'admin', ],\n            ],\n            [\n                'deny',\n                'users' => [ '*' ],\n            ]\n        ];\n    }\n```"
  },
  {
    "html_url": "https://gist.github.com/9406440",
    "description": "My favorite Yii extensions",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9406440/raw/bb1715b5ff2c3a000ebe424fd42904c4c62f0b0d/yii-favorite-extensions.md"
    ],
    "content": "- [Easy Image for generating thumbnails](http://www.yiiframework.com/extension/easyimage/)\n- [TinyMCE](http://www.yiiframework.com/extension/newtinymce/)\n- [ElFinder to browse/upload files](http://www.yiiframework.com/extension/elfinder/)\n- [JuiDateTimePicker](http://www.yiiframework.com/extension/juidatetimepicker)"
  },
  {
    "html_url": "https://gist.github.com/9406329",
    "description": "Yii: Link with confirmation dialog.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9406148",
    "description": "Yii: using CActiveForm::dropDownList",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9406042",
    "description": "Yii: using EJuiDateTimePicker example",
    "files": [
      "https://gist.githubusercontent.com/umidjons/9406042/raw/63d218b12f1c79eca31ed6aedaf56f7a1e70cf1d/ejui-date-time-picker.md"
    ],
    "content": "Download `EJuiDateTimePicker` from Github [repo](https://github.com/magefad/EJuiDateTimePicker)\nExtract extension into `ext.juidatetimepicker` folder.\nEnable auto-loading:\n```php\n<?php\n'import'     => [\n    // ...\n    'ext.juidatetimepicker.EJuiDateTimePicker',\n],\n```\n\nThen in views you can use it as follow:\n```php\n<div class=\"form-wrapper\">\n \n\t<?php $form = $this->beginWidget( 'CActiveForm', array(\n\t\t'action'      => Yii::app()->createUrl( $this->route ),\n\t\t'method'      => 'get',\n\t\t'htmlOptions' => [\n\t\t\t'class' => 'form-horizontal search-form',\n\t\t\t'role'  => 'form',\n\t\t]\n\t) ); ?>\n\t\n    <!-- ... -->\n    \n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-2\">\n\t\t\t<?= $form->label( $model, 'created_at' ); ?>\n\t\t\t<?php\n\t\t\t$this->widget( 'ext.juidatetimepicker.EJuiDateTimePicker', [\n\t\t\t\t'model'       => $model,\n\t\t\t\t'attribute'   => 'created_at',\n\t\t\t\t'language'    => 'ru',\n\t\t\t\t'options'     => [\n\t\t\t\t\t'dateFormat' => 'dd.mm.yy',\n\t\t\t\t\t'timeFormat' => 'HH:mm',\n\t\t\t\t],\n\t\t\t\t'htmlOptions' => [\n\t\t\t\t\t'class' => 'form-control',\n\t\t\t\t],\n\t\t\t] );\n\t\t\t?>\n\t\t</div>\n \n\t\t<div class=\"col-sm-2\">\n\t\t\t<?= $form->label( $model, 'edited_at' ); ?>\n\t\t\t<?php\n\t\t\t$this->widget( 'ext.juidatetimepicker.EJuiDateTimePicker', [\n\t\t\t\t'model'       => $model,\n\t\t\t\t'attribute'   => 'edited_at',\n\t\t\t\t'language'    => 'ru',\n\t\t\t\t'options'     => [\n\t\t\t\t\t'dateFormat' => 'dd.mm.yy',\n\t\t\t\t\t'timeFormat' => 'HH:mm',\n\t\t\t\t],\n\t\t\t\t'htmlOptions' => [\n\t\t\t\t\t'class' => 'form-control',\n\t\t\t\t],\n\t\t\t] );\n\t\t\t?>\n\t\t</div>\n\t</div>\n\t\n    <!-- ... -->\n    \n\t<div class=\"form-group\">\n\t\t<div class=\"col-sm-offset-6 col-sm-6 text-right\">\n\t\t\t<?= CHtml::submitButton( 'Submit', [ 'class' => 'btn btn-default' ] ); ?>\n\t\t</div>\n\t</div>\n \n\t<?php $this->endWidget(); ?>\n</div>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/9405991",
    "description": "Yii: Advanced search form with Twitter Bootstrap controls/components",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9405919",
    "description": "Yii: Custom button on CGridView, configure CButtonColumn buttons",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9386957",
    "description": "Yii: change user's password if new one typed (not empty), otherwise do not change",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9385973",
    "description": "Yii: using clips - captured output (CClipWidget example)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9383758",
    "description": "PhpStorm: Record Auto semicolon macro and bind shortcut to it",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9382132",
    "description": "Stylus: mixin for linearGradient",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9382090",
    "description": "Yii: sort and filter related table column in CGridView",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9319044",
    "description": "Yii: User registration, roles & privileges",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9318960",
    "description": "Using active record's beforeSave() and afterSave() methods/events in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9204361",
    "description": "Yii: Prevent resending form data on page refresh by using CController::refresh() method",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9203479",
    "description": "Yii: Named and parameterized scopes example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9203452",
    "description": "Yii: CTimestampBehavior example to automatically set create and update datetimes",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9203429",
    "description": "Yii: Refresh captcha on every page load/refresh",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9183820",
    "description": "Publish assets (Bootstrap css, js, fonts) with CAssetManager in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9183805",
    "description": "Use bootstrap menu in Yii with CMenu",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9183784",
    "description": "Hide index file in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9183735",
    "description": "Format date and time in Yii with CFormatter",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/9107445",
    "description": "Allow GET,POST,PUT,DELETE RESTful requests in .htaccess",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8782442",
    "description": "Installing laravel in OpenServer via Composer",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8781955",
    "description": "Create symlink to php.ini in c:\\windows in OpenServer to use php.ini configuration in PHP CLI",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8739045",
    "description": "Yii: Read DB records row by row in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8738869",
    "description": "Using PHPExcel in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8738580",
    "description": "Compress file with ZipArchive",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8732226",
    "description": "Use PHPExcel in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8730745",
    "description": "Left pad of string/number",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8665635",
    "description": "Last row and column numbers with data in Excel via VB",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8662929",
    "description": "Configure VIM",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8654069",
    "description": "Custom function example in BASH.\nLog function with date and time prefixed to the message.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8612712",
    "description": "JS/JQuery: add copyright text on copy event",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8593789",
    "description": "NodeJS: HTTP Server with re-listening capability, when configuration changes",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8593706",
    "description": "NodeJS: HTTP Server which work with static html files.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8592647",
    "description": "NodeJS: Simple read file example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8473468",
    "description": "MySQL: if row exists check",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8417405",
    "description": "Parse HTML via phpQuery example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8417312",
    "description": "Redirect nohup output to a file",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8396981",
    "description": "PubSub pattern / Events in PHP",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8395825",
    "description": "Change database and table character set and collate",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8395603",
    "description": "Archive/Compress folder, split into chunks, recreate/join original archive, decompress file",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8395466",
    "description": "Split the file into 50 MB pieces with the given prefix",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8350866",
    "description": "MySQL ERROR 2003 Solving",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8348744",
    "description": "MySQL: show version information",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8317490",
    "description": "NodeJS: Hello World Server Example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8281068",
    "description": "JavaScript: Convert number to bin, oct, hex strings and opposite",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280975",
    "description": "JavaScript: convert to number",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280971",
    "description": "Using getters/setters, using class members as properties.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280961",
    "description": "Using backtick in PHP. Using linux find command in PHP. Split lines by EOL.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280953",
    "description": "Round minutes by 15",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280949",
    "description": "array_map example to return modified array",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280944",
    "description": "Parse datetime from string and convert it to other format",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280940",
    "description": "Helper method to log into stdout with variable arguments.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280935",
    "description": "Update with JOIN and CASE example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280933",
    "description": "Copy tables from one database to another using mysqldump",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280927",
    "description": "mysqldump example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280921",
    "description": "Create user and grant access to a table for modifications.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280915",
    "description": "Get phpinfo() from command line",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280912",
    "description": "Emit & listen events on NodeJS",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280907",
    "description": "NodeJS: async module example (install async module before executing example)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280897",
    "description": "Set NODE_PATH to load globally installed modules",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280885",
    "description": "Get URL parameter value with jQuery",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8280867",
    "description": "Read CSV file in PHP",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8265657",
    "description": "NodeJS: Write/Append into a file",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8265535",
    "description": "NodeJS: read file",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8265223",
    "description": "Vim: .vimrc example for easy programming",
    "files": [
      "https://gist.githubusercontent.com/umidjons/8265223/raw/f4d50d085c59bddbebe4a4de3e3973f9f3b0aba9/vimrc.md"
    ],
    "content": "# Vim & gVim configurations\n\nChange color scheme\n```vim\ncolorscheme candycode\n```\n\nShow line numbers\n```vim\nset nu!\n```\n\nSet `gVim` font\n```vim\nset guifont=Consolas:h12:cRUSSIAN\n```\n\nChange language\n```vim\nset langmenu=en_US\nlet $LANG='en_US'\nsource $VIMRUNTIME/delmenu.vim\nsource $VIMRUNTIME/menu.vim\n```\n\nChange encoding\n```vim\nset encoding=utf8\n```\n\nSet `TAB` size\n```vim\nset softtabstop=2\n```\n\nEnable auto indentation\n```vim\nset autoindent\n```\n\nEnable indentation according to file type\n```vim\nfiletype plugin indent on\n```\n\nConfigure paired characters\n```vim\ninoremap ' ''<ESC>ha\ninoremap \" \"\"<ESC>ha\ninoremap ` ``<ESC>ha\ninoremap ( ()<ESC>ha\ninoremap [ []<ESC>ha\ninoremap { {}<ESC>ha\ninoremap /* /** */<ESC>2ha\n```\n\nEnable 256 colors in terminal\n```vim\nset t_Co=256\n```\n\nChange default `netrw` window size\n```vim\nlet g:netrw_winsize=25\n```\n\nEnable preview in `netrw`\n```vim\nlet g:netrw_preview=1\n```\n\nSet commands and search patterns history (default is 50)\n```vim\nset history=100\n```\n\nSome mapping related to PHP\n===\n\nCreate new file in `c:\\program\\ files\\vim\\vimfiles\\ftplugin\\php_mymaps.vim`.\n\nPut colon `,`, semicolon `;` at EOL:\n\n```vim\ninoremap ;; <C-o>A;\ninoremap ,, <C-o>A,\n```\n\nSpaces around `=`, `=>`\n\n```vim\ninoremap =<space> <space>=<space>\ninoremap =><space> <space>=><space>\n```\n"
  },
  {
    "html_url": "https://gist.github.com/8265173",
    "description": "NodeJS: create and remove directory",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/8255504",
    "description": "NodeJS: Hello World HTTP Server",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7924438",
    "description": "Generate random color in JS",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7924411",
    "description": "Generate random web color in PHP\nFrom http://www.craiglotter.co.za/2010/04/17/php-select-random-web-color-with-one-line-of-code/",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7905491",
    "description": "CActiveForm::checkBoxList() example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7887520",
    "description": "Get specified minutes before date and time from current date and specified time value.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7887496",
    "description": "Convert comma separated day of weeks (number representation) to day of weeks names",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7869564",
    "description": "MySQL: create stored procedure and cursor example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7822124",
    "description": "Yii: Tooltips for CGridView cell value",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7820509",
    "description": "Yii: change presenting/display values of the column in CGridView",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7802282",
    "description": "Yii: CGridView column with drop-down filter",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7786750",
    "description": "Yii: Send additional data in yiiGridView.update(), and access it in action & model",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7785506",
    "description": "Yii: JQuery UI Button Set",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7783521",
    "description": "Yii: EJuiDateTimePicker extension to choose only time (no date controls)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7768149",
    "description": "Run MySQL statement from bash script",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7767881",
    "description": "Defragment table in MySQL",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7749234",
    "description": "Get list of proxy servers as SQL insert statements from tipaproxy in console",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7745190",
    "description": "Current and yesterday date",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7716835",
    "description": "Class to work with Yandex Market Partner API. Using cURL in PHP.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7716280",
    "description": "Send PUT request to Yandex Market on terminal via CURL",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7703637",
    "description": "Directories size in linux terminal",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7702746",
    "description": "Remove array item in foreach loop",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7675613",
    "description": "MySQL: Row number per group",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7672514",
    "description": "Typehinting of variable/property type in PHPStorm",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7656475",
    "description": "PHP: Log message into file with variable length parameters",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7655748",
    "description": "PHP: Create directories if not already exists",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7655702",
    "description": "PHP: Persistent connection to DB via PDO / use existing connection if available.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7653667",
    "description": "Swapping two variables values without third variable.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7611722",
    "description": "Excel: Search cell value from column B in column A and give position if found, else -1.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7599105",
    "description": "Remove grep command while grepping something using ps command",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7595266",
    "description": "Yii: drop down to choose page size for CGridView",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7595157",
    "description": "Apache: Redirect www.example.com/someurl/ to www.example.com permanently",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7579786",
    "description": "Linux: zip/unzip folder on linux terminal",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7543076",
    "description": "Yii: Publish and load js from view folder via AssetManager",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7483031",
    "description": "Nearest integer value by 10 time",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7465458",
    "description": "Get user agents from http://www.useragentstring.com/pages/opera/ without jQuery",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7370885",
    "description": "MySQL: Logging column changes via triggers",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7331295",
    "description": "Yandex Market: Information about bids\nhttp://api.yandex.ru/market/partner/doc/dg/reference/post-campaigns-id-bids.xml?lang=ru",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7331182",
    "description": "Yandex Market: Get product offers by company id",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7299374",
    "description": "jQuery: Show or Hide / Toggle element with condition",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7298716",
    "description": "Yii: Breadcrumbs widget with Breadcrumb microdata optimized for search engines\nMore: https://support.google.com/webmasters/answer/185417",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7278285",
    "description": "Redirect www.domain.com to domain.com",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7263427",
    "description": "Get GET parameters/query string from URL in javascript",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7211910",
    "description": "JavaScript: Format number",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7210459",
    "description": "Yii: send JSON object to controller action via Ajax request",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7210077",
    "description": "Yii: find all records as array trick",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7136010",
    "description": "Customize breadcrumbs widget in Yii layout example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7097797",
    "description": "Create SQL command example in Yii",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7081744",
    "description": "Create new web application",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/7024337",
    "description": "Append one array to another array in JS",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6865350",
    "description": "Traverse DOM elements recursively.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6863188",
    "description": "Object.keys() fallback",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6821227",
    "description": "Getter/Setter example via Object.defineProperty/Object.defineProperties or via Object.prototype.__defineGetter/Setter__",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6793330",
    "description": "Getter and Setter in JavaScript (new syntax)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6790994",
    "description": "Getter/Setter legacy syntax",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6728820",
    "description": "AngularJS: angular.element(), scope.$watch() example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6728473",
    "description": "AngularJS: Zippy component example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6727938",
    "description": "AngularJS: Alternative, more clear approach to bind attributes via controller name",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6727838",
    "description": "AngularJS: Transclusion Basics",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6727621",
    "description": "AngularJS: Understanding isolate scope =, accept callbacks",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6727104",
    "description": "AngularJS: Isolate scope =, accept/set value as object",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6726930",
    "description": "AngularJS: Understanding Isolate scope @ - accept/set values as string",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6726700",
    "description": "AngularJS: Understanding isolate scope",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6726242",
    "description": "AngularJS: Directive to directive communication example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6725525",
    "description": "AngularJS: Custom directive calls function specified in binding element attribute. ( using $apply() method )",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6725370",
    "description": "AngularJS: Using custom attributes in custom directives via attrs parameter of directive function.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6725290",
    "description": "AngularJS: Behaviors via directive",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6725087",
    "description": "AngularJS: Filters example (filter, orderBy, lowercase, uppercase, limitTo)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6724666",
    "description": "AngularJS: Create custom filter injecting factory data",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6724658",
    "description": "AngularJS: Create custom filter",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6724520",
    "description": "AngularJS: Defining a method on the Scope",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6724503",
    "description": "AngularJS: Share data between Controllers",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6713728",
    "description": "AngularJS: Communication between controllers via common service.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6698103",
    "description": "AngularJS: Accordion with custom directives (restrict, replace, transclude, template, controller, angular.forEach(), scope, link)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6697453",
    "description": "AngularJS: Create custom directive, use jqLite/jQuery methods instead of ng-click to bind/handle events",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6696447",
    "description": "AngularJS: Create custom directive/tag. 'custom-expander-directive.html' - scope : {title: '=expanderTitle'} set expanderTitle via model, 'custom-expander-directive-2.html' - scope : {title: '@expanderTitle'} set expanderTitle via template, with @ strategy we also can set title via interpolation like expander-title=\"{{title}}\", so where possible use @.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6695929",
    "description": "AngularJS: Custom tag with transclude option.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6695797",
    "description": "AngularJS: Custom tag/element via templateUrl, first loading/creating template into cache",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6695761",
    "description": "AngularJS: Custom tag/element via templateUrl",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6695723",
    "description": "AngularJS: custom tag/element with directive",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6684138",
    "description": "AngularJS: Set default headers for all type of requests or for specific type of requests",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6682907",
    "description": "AngularJS: Custom directive, templates via <script> tag, routing to views",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680827",
    "description": "AngularJS: Using ng-src instead of src, on <img> and ng-href instead of href on <a> elements",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680709",
    "description": "AngularJS: Using conditional expression in ng-class attribute.\r\nSelect/Add class to clicked row of a table.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680582",
    "description": "AngularJS ng-class example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680546",
    "description": "AngularJS ng-show, ng-hide example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680466",
    "description": "AngularJS Example\r\n(using filter, $index)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6680388",
    "description": "AngularJS Validation example\r\n(ng-show, ng-maxlength, ng-minlength, ng-disabled)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6669708",
    "description": "AngularJS Custom Directive Example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6669531",
    "description": "AngularJS get data via AJAX, filter data by specific property | field.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6669048",
    "description": "AngularJS E-Mail Application\r\n(module, controller, route, view)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6668763",
    "description": "AngularJS Custom Filter to Camel Case words.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6605393",
    "description": "Is array associative?",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6548287",
    "description": "toArray(), strToDate(), dateToStr(), isYYYYMMDD() functions",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6492051",
    "description": "Maximum Integer values in MySQL",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6419933",
    "description": "Select table rows that contain checked checkbox using jQuery",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6419816",
    "description": "Export HTML Table to Excel.\r\n\r\nExamples of jQuery methods:\r\n\r\nclone(), wrap(), unwrap(),\r\nremoveAttr(), remove(),\r\nfind(), children(), parent(), first(), last(), end()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6396958",
    "description": "Custom validator for phone number for Uzbekistan using jquery.validate.js plugin",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6376525",
    "description": "CSS rules to avoid selection (for example, on double click)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6374090",
    "description": "conn db wrapper class demonstration in Deex-CMF",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6352807",
    "description": "Load CSS, JS files\r\nAlso, execute code after system initialization in Deex-CMF",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6349938",
    "description": "Read JSON string from file, convert PHP stdClass object to array",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6349715",
    "description": "Generate random JSON data for jquery.DataTable plugin",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6304353",
    "description": "Cross domain AJAX requests\r\nError: Origin is not allowed by Access-Control-Allow-Origin",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6303493",
    "description": "Returned array from AJAX treated as object, convert it to array using $.map()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6292714",
    "description": "Use $._data() to find out attached events to the element",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6277056",
    "description": "Work with modal window in Deex-CMF",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6277004",
    "description": "Create form elements using prot class of Deex-CMF\r\ntextarea, checkbox, radio, hr, group (fieldset/legend)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6268694",
    "description": "Set/Get/Remove page state in Deex-CMF",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6268391",
    "description": "AJAX request example using Deex-CMF",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6268315",
    "description": "Create button and bind click event using 'prot' library",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6268265",
    "description": "Create list (<ul>) and populate with items example using 'prot' library",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6247694",
    "description": "Suppress error throwing and get error message",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6247422",
    "description": "startsWith($haystack, $needle) and endsWith($haystack, $needle) PHP functions",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6240195",
    "description": "Get array of elements, its values/properties/attributes using .map() (NOT $.map())\r\n\r\nhttp://api.jquery.com/map/\r\nPass each element in the current matched set through a function, producing a new jQuery object containing the return values.\r\n\r\nhttp://api.jquery.com/get/#get \r\nRetrieve the DOM elements matched by the jQuery object\r\n",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6228205",
    "description": "Create custom selector/filter to get elements with additional properties (not attributes)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6220666",
    "description": "Add and use additional properties to HTML elements with jQuery",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6219928",
    "description": "jQuery Plugin Boilerplate\r\nsource: http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6208305",
    "description": "Shared and Static methods example in JavaScript class",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6183391",
    "description": "Extend JavaScript object via prototype",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6181762",
    "description": "Join/Concatenate path in PHP",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6173837",
    "description": "Upload File using jQuery.ajax() with progress support",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6172023",
    "description": "Get file extension in JavaScript",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6171744",
    "description": "Set error log location with .htaccess for virtual host",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6171162",
    "description": "jQuery plugin example",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6164042",
    "description": "PHP dirname() and basename() alternatives for JavaScript",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6163738",
    "description": "Sort <li> items by child element value",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6154548",
    "description": "realpath() alternative to detect absolute path (URN and URL is not supported, only local paths on the server)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6139693",
    "description": "Dynamically create <select> and populate <option>s with jQuery.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6137737",
    "description": "JSCompressor class to minify JS files (uses JSMin and JSMinPlus libraries)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6137647",
    "description": "Compress JavaScript file with JSMin",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6093986",
    "description": "Changing Timezone in php.ini",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6045180",
    "description": "Custom size for featured image in wordpress",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6037013",
    "description": "Cycle Slider Test",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6030711",
    "description": "Make div 100% of browser window",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6028283",
    "description": "Split text by EOL with preg_split()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6028077",
    "description": "Set Charset in Apache configuration file (.htaccess)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6027299",
    "description": "Manage access to menu items in Bitrix",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6017706",
    "description": "Send mail in Bitrix example.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/6007638",
    "description": "Clean & convert value from non numeric characters",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5993361",
    "description": "Replace multiple spaces with one using preg_replace()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5974576",
    "description": "* Change state programmatically with trigger() // hover, focus, active, visited\r\n* Build reqular expression on the fly",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5974534",
    "description": "Get current URL/path in javascript (without domain)",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5956807",
    "description": "Bitrix Dialog box example\r\nmore on that here: http://alexvaleev.ru/popup-window-bitrix/",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5946362",
    "description": "Bitrix: Get current site's date and time formats",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5939171",
    "description": "Bitrix Framework: Change pagination items count in navigation bar.\r\n",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5938829",
    "description": "Split string in MySQL with SUBSTRING_INDEX( str, delim, count )\r\nConvert string to mysql date with STR_TO_DATE( str, format )",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5933962",
    "description": "Convert date string to date and insert into another table\r\nFor example, string '14.03.2013' becomes '2013-03-14' date.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5933834",
    "description": "Convert (Excel date) 5 digit numbers to date in mysql",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5932707",
    "description": "RegExp Tips in Notepad++",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5925001",
    "description": "Accept form values safer with htmlspecialchars()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5917079",
    "description": "Dynamically create thumbnails",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5907857",
    "description": "SOAP server/client example in WSDL mode",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5907025",
    "description": "Basic Authentication through .htaccess",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5898766",
    "description": "Check, is PHP extension loaded.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5882601",
    "description": "BX: Retrieves active users list in specified groups.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5875156",
    "description": "Include Bitrix header and footer without template",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5866116",
    "description": "BX: Date picker with Bitrix's CalendarDate()",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5865318",
    "description": "For those who use file_get_contents for JSON or other RESTful services. Site using get urls go through load balancer instead of hitting the local server.\r\nLoad this function through a local url and set the Host: header for virtualhost entries on the site we wanted to load.",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5864820",
    "description": "BX: AddMessage2Log() implementation from Bitrix Framework",
    "files": [],
    "content": ""
  },
  {
    "html_url": "https://gist.github.com/5857590",
    "description": "Print JSON data to response for some request",
    "files": [],
    "content": ""
  }
]